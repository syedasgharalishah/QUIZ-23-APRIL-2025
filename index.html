<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - June 10, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex; /* Added for icon */
            align-items: center; /* Added for icon */
            gap: 0.5rem; /* Added for icon */
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50; /* Changed to main text color */
            margin-top: 0.5rem;
            font-weight: bold; /* Added bold as per request */
        }

        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02); /* Enlarge by 5% on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        .timer-display {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        .question-progress {
            font-size: 1rem;
            color: #6D6875;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                align-items: flex-start; /* Align to start on mobile */
            }
            .top-bar .date-display {
                order: 1; /* Move date to top-left on mobile */
                font-size: 0.8rem;
                align-self: flex-start; /* Align to start on mobile */
            }
            .top-bar .whatsapp-link {
                order: 2; /* Move whatsapp to bottom on mobile */
                font-size: 0.8rem;
                align-self: flex-end; /* Align to end on mobile */
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Pulse animation for correct answer */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        /* Shake animation for wrong answer */
        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <script>
        document.addEventListener('contextmenu', event => event.preventDefault()); // Disable right-click
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault(); // Disable Ctrl+U, Ctrl+Shift+I, Ctrl+Shift+J
            }
            if (e.key === 'F12') {
                e.preventDefault(); // Disable F12
            }
        });
        document.addEventListener('copy', event => event.preventDefault()); // Disable copy
        document.addEventListener('paste', event => event.preventDefault()); // Disable paste
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "June 10, 2025"; // Updated for June 10 quiz
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Update header dates
        document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
        document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
        document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;

        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 40;
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "35 minutes 10 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date();
            const todayNormalized = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const currentQuizDateNormalized = new Date(CURRENT_DATE.getFullYear(), CURRENT_DATE.getMonth(), CURRENT_DATE.getDate());

            if (question.special && todayNormalized.getTime() === currentQuizDateNormalized.getTime()) {
                quizCard.classList.add('special-question');
            }

            // Shuffle options for the current question
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);


            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                // Store the original index of the option, not its shuffled position
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === parseInt(button.dataset.originalOptionIndex)) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionOriginalIndex - The original index of the selected option.
         */
        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            // If already answered, do nothing
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback and disable options
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('option-button:hover:not(.selected)'); // Remove hover effect

                const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);

                if (btnOriginalIndex === selectedOptionOriginalIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
                // Highlight the correct answer if the selected answer was incorrect
                if (!isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                    button.classList.add('correct'); // Highlight correct answer
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            // Login credentials for June 10 quiz
            const expectedLoginId = "10JUNE"; // Updated for June 10 quiz
            const expectedPassword = "free";

            if (id === expectedLoginId && password === expectedPassword) {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // General Knowledge (20 MCQs)
            const generalKnowledgeMCQs = [
                // GK - June 10: International Observance (Important Days): Pages 70-73 (20 MCQs)
                { question: "When is International Women's Day observed?", options: ["March 8", "April 22", "June 5", "October 24"], correctOptionIndex: 0, explanation: "International Women's Day is celebrated on March 8 every year.", difficulty: "easy", source_page: 70 },
                { question: "World Environment Day is celebrated on:", options: ["March 22", "April 7", "June 5", "September 16"], correctOptionIndex: 2, explanation: "World Environment Day is observed on June 5 annually.", difficulty: "easy", source_page: 70 },
                { question: "When is World Health Day observed?", options: ["April 7", "May 1", "June 5", "July 11"], correctOptionIndex: 0, explanation: "World Health Day is celebrated on April 7 each year to mark the founding of the World Health Organization (WHO).", difficulty: "easy", source_page: 70 },
                { question: "International Literacy Day is celebrated on:", options: ["September 8", "August 12", "October 5", "November 14"], correctOptionIndex: 0, explanation: "International Literacy Day is observed on September 8 annually.", difficulty: "medium", source_page: 71 },
                { question: "When is Human Rights Day celebrated?", options: ["December 10", "October 24", "November 20", "January 30"], correctOptionIndex: 0, explanation: "Human Rights Day is observed every year on 10 December, the day the United Nations General Assembly adopted the Universal Declaration of Human Rights in 1948.", difficulty: "easy", source_page: 71 },
                { question: "World Aids Day is observed on:", options: ["December 1", "January 1", "February 2", "March 3"], correctOptionIndex: 0, explanation: "World AIDS Day is held on 1 December each year.", difficulty: "easy", source_page: 71 },
                { question: "When is Earth Day celebrated globally?", options: ["March 21", "April 22", "May 1", "June 5"], correctOptionIndex: 1, explanation: "Earth Day is an annual event on April 22 to demonstrate support for environmental protection.", difficulty: "easy", source_page: 70 },
                { question: "International Day of Peace is observed on:", options: ["August 9", "September 21", "October 24", "December 10"], correctOptionIndex: 1, explanation: "The International Day of Peace is observed annually on 21 September.", difficulty: "medium", source_page: 71 },
                { question: "When is World Population Day observed?", options: ["July 11", "August 15", "September 27", "October 16"], correctOptionIndex: 0, explanation: "World Population Day is an annual event, observed on July 11 every year.", difficulty: "easy", source_page: 71 },
                { question: "World Water Day is celebrated on:", options: ["March 22", "April 7", "June 8", "November 19"], correctOptionIndex: 0, explanation: "World Water Day is held annually on 22 March.", difficulty: "easy", source_page: 70 },
                { question: "When is World Refugee Day observed?", options: ["June 20", "July 28", "August 19", "September 29"], correctOptionIndex: 0, explanation: "World Refugee Day is an international day designated by the United Nations to honour refugees around the globe. It falls on 20 June each year.", difficulty: "medium", source_page: 70 },
                { question: "International Day of Older Persons is observed on:", options: ["September 1", "October 1", "November 1", "December 1"], correctOptionIndex: 1, explanation: "The International Day of Older Persons is observed annually on 1 October.", difficulty: "medium", source_page: 71 },
                { question: "When is World Tourism Day celebrated?", options: ["September 27", "October 12", "November 9", "December 25"], correctOptionIndex: 0, explanation: "World Tourism Day is celebrated every year on 27 September.", difficulty: "medium", source_page: 71 },
                { question: "World Food Day is observed on:", options: ["October 16", "November 19", "December 5", "January 26"], correctOptionIndex: 0, explanation: "World Food Day is celebrated every year around the world on 16 October.", difficulty: "easy", source_page: 71 },
                { question: "When is International Day for the Elimination of Violence against Women observed?", options: ["November 25", "December 1", "January 26", "March 8"], correctOptionIndex: 0, explanation: "The International Day for the Elimination of Violence against Women is observed on November 25.", difficulty: "tough", source_page: 72 },
                { question: "When is World Children's Day observed?", options: ["October 24", "November 20", "December 1", "January 1"], correctOptionIndex: 1, explanation: "World Children's Day is observed annually on November 20.", difficulty: "easy", source_page: 72 },
                { question: "International Volunteer Day for Economic and Social Development is observed on:", options: ["December 5", "December 10", "November 25", "October 1"], correctOptionIndex: 0, explanation: "International Volunteer Day (IVD) for Economic and Social Development is an international observance mandated by the UN General Assembly on December 5.", difficulty: "tough", source_page: 72 },
                { question: "When is World Heritage Day (International Day for Monuments and Sites) observed?", options: ["April 18", "May 22", "June 16", "July 30"], correctOptionIndex: 0, explanation: "International Day for Monuments and Sites (World Heritage Day) is observed on 18 April.", difficulty: "medium", source_page: 70 },
                { question: "World Press Freedom Day is observed on:", options: ["May 3", "July 4", "August 14", "September 27"], correctOptionIndex: 0, explanation: "World Press Freedom Day is observed on May 3 each year.", difficulty: "medium", source_page: 70 },
                { question: "When is International Day of the Girl Child observed?", options: ["October 11", "October 1", "November 19", "December 2"], correctOptionIndex: 0, explanation: "The International Day of the Girl Child is celebrated annually on October 11.", difficulty: "tough", source_page: 71 }
            ];
            quizQuestions.push(...generalKnowledgeMCQs);

            // English (40 MCQs)
            const englishMCQs = [
                // English - June 10: Active Passive Voice: Pages 468-471 (40 MCQs)
                { question: "Choose the correct active voice for: 'The ball was hit by the boy.'", options: ["The boy hit the ball.", "The boy is hitting the ball.", "The boy has hit the ball.", "The boy had hit the ball."], correctOptionIndex: 0, explanation: "Passive 'was hit' corresponds to simple past active 'hit'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'A letter is being written by her.'", options: ["She writes a letter.", "She wrote a letter.", "She is writing a letter.", "She has written a letter."], correctOptionIndex: 2, explanation: "Passive 'is being written' corresponds to present continuous active 'is writing'.", difficulty: "medium", source_page: 468 },
                { question: "Choose the correct active voice for: 'The work had been finished by them.'", options: ["They finish the work.", "They finished the work.", "They have finished the work.", "They had finished the work."], correctOptionIndex: 3, explanation: "Passive 'had been finished' corresponds to past perfect active 'had finished'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'A novel will be written by me.'", options: ["I write a novel.", "I wrote a novel.", "I will write a novel.", "I am writing a novel."], correctOptionIndex: 2, explanation: "Passive 'will be written' corresponds to simple future active 'will write'.", difficulty: "easy", source_page: 470 },
                { question: "Choose the correct active voice for: 'This problem can be solved by me.'", options: ["I solve this problem.", "I can solve this problem.", "I might solve this problem.", "I will solve this problem."], correctOptionIndex: 1, explanation: "Passive 'can be solved' corresponds to active 'can solve'.", difficulty: "medium", source_page: 471 },
                { question: "Choose the correct active voice for: 'By whom was the window broken?'", options: ["Who broke the window?", "Who is breaking the window?", "Who has broken the window?", "Who had broken the window?"], correctOptionIndex: 0, explanation: "Passive 'By whom was broken' corresponds to active 'Who broke'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'My pen has been stolen.'", options: ["Someone steals my pen.", "Someone stole my pen.", "Someone has stolen my pen.", "Someone had stolen my pen."], correctOptionIndex: 2, explanation: "Passive 'has been stolen' corresponds to present perfect active 'has stolen'.", difficulty: "medium", source_page: 471 },
                { question: "Choose the correct active voice for: 'Let the door be opened.'", options: ["Open the door.", "You should open the door.", "You are ordered to open the door.", "Someone opens the door."], correctOptionIndex: 0, explanation: "Passive imperative 'Let the door be opened' corresponds to active imperative 'Open the door'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'He was seen crossing the road by us.'", options: ["We saw him crossing the road.", "We see him crossing the road.", "We had seen him crossing the road.", "We were seeing him crossing the road."], correctOptionIndex: 0, explanation: "Passive 'was seen crossing' corresponds to past active 'saw him crossing'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'English is spoken all over the world.'", options: ["People speak English all over the world.", "People spoke English all over the world.", "People are speaking English all over the world.", "People have spoken English all over the world."], correctOptionIndex: 0, explanation: "Passive 'is spoken' corresponds to simple present active 'speak'. The general agent 'people' is implied.", difficulty: "medium", source_page: 471 },
                { question: "Choose the correct active voice for: 'The thief was caught by the police.'", options: ["The police catch the thief.", "The police caught the thief.", "The police are catching the thief.", "The police have caught the thief."], correctOptionIndex: 1, explanation: "Passive 'was caught' corresponds to simple past active 'caught'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'A kite is made by the boy.'", options: ["The boy makes a kite.", "The boy made a kite.", "The boy is making a kite.", "The boy has made a kite."], correctOptionIndex: 0, explanation: "Passive 'is made' corresponds to simple present active 'makes'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'A new bridge will be built by them.'", options: ["They build a new bridge.", "They built a new bridge.", "They will build a new bridge.", "They are building a new bridge."], correctOptionIndex: 2, explanation: "Passive 'will be built' corresponds to simple future active 'will build'.", difficulty: "easy", source_page: 470 },
                { question: "Choose the correct active voice for: 'The students were praised by the teacher.'", options: ["The teacher praises the students.", "The teacher praised the students.", "The teacher is praising the students.", "The teacher has praised the students."], correctOptionIndex: 1, explanation: "Passive 'were praised' corresponds to simple past active 'praised'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'Letters are being written by them.'", options: ["They write letters.", "They wrote letters.", "They are writing letters.", "They have written letters."], correctOptionIndex: 2, explanation: "Passive 'are being written' corresponds to present continuous active 'are writing'.", difficulty: "medium", source_page: 468 },
                { question: "Choose the correct active voice for: 'The wall has been painted by him.'", options: ["He paints the wall.", "He painted the wall.", "He is painting the wall.", "He has painted the wall."], correctOptionIndex: 3, explanation: "Passive 'has been painted' corresponds to present perfect active 'has painted'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The tree was blown down by the wind.'", options: ["The wind blows down the tree.", "The wind blew down the tree.", "The wind is blowing down the tree.", "The wind has blown down the tree."], correctOptionIndex: 1, explanation: "Passive 'was blown down' corresponds to simple past active 'blew down'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'Dinner was being prepared by her.'", options: ["She prepares dinner.", "She prepared dinner.", "She was preparing dinner.", "She had prepared dinner."], correctOptionIndex: 2, explanation: "Passive 'was being prepared' corresponds to past continuous active 'was preparing'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The project had been completed by them.'", options: ["They complete the project.", "They completed the project.", "They have completed the project.", "They had completed the project."], correctOptionIndex: 3, explanation: "Passive 'had been completed' corresponds to past perfect active 'had completed'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'You will be informed by us.'", options: ["We inform you.", "We informed you.", "We are informing you.", "We shall inform you."], correctOptionIndex: 3, explanation: "Passive 'will be informed' corresponds to simple future active 'shall inform'.", difficulty: "easy", source_page: 470 },
                { question: "Choose the correct active voice for: 'Promises should be kept.'", options: ["One keeps promises.", "One should keep promises.", "One kept promises.", "One is keeping promises."], correctOptionIndex: 1, explanation: "Passive with 'should be kept' implies 'one should keep'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'Why was the glass broken by you?'", options: ["Why do you break the glass?", "Why did you break the glass?", "Why have you broken the glass?", "Why had you broken the glass?"], correctOptionIndex: 1, explanation: "Passive 'Why was broken' corresponds to simple past interrogative active 'Why did you break'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'He is not known to anybody.'", options: ["Nobody knows him.", "Anybody does not know him.", "Someone does not know him.", "No one knows him."], correctOptionIndex: 3, explanation: "Passive 'is not known to anybody' corresponds to active 'No one knows him'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'Let your duty be done.'", options: ["Do your duty.", "You should do your duty.", "You are asked to do your duty.", "Someone does your duty."], correctOptionIndex: 0, explanation: "Passive imperative 'Let your duty be done' corresponds to active imperative 'Do your duty'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'I was pleased with the news.'", options: ["The news pleased me.", "The news is pleasing me.", "The news has pleased me.", "The news was pleasing me."], correctOptionIndex: 0, explanation: "Passive 'was pleased with' corresponds to simple past active 'pleased'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The old man was helped by him.'", options: ["He helps the old man.", "He helped the old man.", "He is helping the old man.", "He has helped the old man."], correctOptionIndex: 1, explanation: "Passive 'was helped' corresponds to simple past active 'helped'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'A picture is being drawn by the painter.'", options: ["The painter draws a picture.", "The painter drew a picture.", "The painter is drawing a picture.", "The painter has drawn a picture."], correctOptionIndex: 2, explanation: "Passive 'is being drawn' corresponds to present continuous active 'is drawing'.", difficulty: "medium", source_page: 468 },
                { question: "Choose the correct active voice for: 'The papers have been signed by the manager.'", options: ["The manager signs the papers.", "The manager signed the papers.", "The manager is signing the papers.", "The manager has signed the papers."], correctOptionIndex: 3, explanation: "Passive 'have been signed' corresponds to present perfect active 'has signed'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'A car was bought by her.'", options: ["She buys a car.", "She bought a car.", "She is buying a car.", "She has bought a car."], correctOptionIndex: 1, explanation: "Passive 'was bought' corresponds to simple past active 'bought'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'Noise was being made by the child.'", options: ["The child makes noise.", "The child made noise.", "The child was making noise.", "The child has made noise."], correctOptionIndex: 2, explanation: "Passive 'was being made' corresponds to past continuous active 'was making'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The work will have been finished by him.'", options: ["He will finish the work.", "He will have finished the work.", "He has finished the work.", "He had finished the work."], correctOptionIndex: 1, explanation: "Passive 'will have been finished' corresponds to future perfect active 'will have finished'.", difficulty: "tough", source_page: 470 },
                { question: "Choose the correct active voice for: 'Are apples liked by her?'", options: ["Does she like apples?", "Did she like apples?", "Is she liking apples?", "Has she liked apples?"], correctOptionIndex: 0, explanation: "Passive 'Are liked' corresponds to simple present interrogative active 'Does she like'.", difficulty: "tough", source_page: 471 },
                { question: "Choose the correct active voice for: 'The house is being built by masons.'", options: ["Masons build the house.", "Masons built the house.", "Masons are building the house.", "Masons have built the house."], correctOptionIndex: 2, explanation: "Passive 'is being built' corresponds to present continuous active 'are building'.", difficulty: "medium", source_page: 468 },
                { question: "Choose the correct active voice for: 'A poem was written by him.'", options: ["He writes a poem.", "He wrote a poem.", "He is writing a poem.", "He has written a poem."], correctOptionIndex: 1, explanation: "Passive 'was written' corresponds to simple past active 'wrote'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'The food has been cooked by mother.'", options: ["Mother cooks the food.", "Mother cooked the food.", "Mother is cooking the food.", "Mother has cooked the food."], correctOptionIndex: 3, explanation: "Passive 'has been cooked' corresponds to present perfect active 'has cooked'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The children were taught by the teacher.'", options: ["The teacher teaches the children.", "The teacher taught the children.", "The teacher is teaching the children.", "The teacher has taught the children."], correctOptionIndex: 1, explanation: "Passive 'were taught' corresponds to simple past active 'taught'.", difficulty: "easy", source_page: 468 },
                { question: "Choose the correct active voice for: 'He was being laughed at by his friends.'", options: ["His friends laugh at him.", "His friends laughed at him.", "His friends were laughing at him.", "His friends had laughed at him."], correctOptionIndex: 2, explanation: "Passive 'was being laughed at' corresponds to past continuous active 'were laughing at'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'The sum had been solved by me.'", options: ["I solve the sum.", "I solved the sum.", "I have solved the sum.", "I had solved the sum."], correctOptionIndex: 3, explanation: "Passive 'had been solved' corresponds to past perfect active 'had solved'.", difficulty: "medium", source_page: 469 },
                { question: "Choose the correct active voice for: 'You will be praised by all.'", options: ["All praise you.", "All praised you.", "All will praise you.", "All are praising you."], correctOptionIndex: 2, explanation: "Passive 'will be praised' corresponds to simple future active 'will praise'.", difficulty: "easy", source_page: 470 },
                { question: "Choose the correct active voice for: 'Can this box be lifted by you?'", options: ["Can you lift this box?", "Did you lift this box?", "Are you lifting this box?", "Have you lifted this box?"], correctOptionIndex: 0, explanation: "Passive 'Can be lifted' corresponds to active 'Can you lift'.", difficulty: "tough", source_page: 471 }
            ];
            quizQuestions.push(...englishMCQs);

            // Islamic Studies (20 MCQs)
            const islamicStudiesMCQs = [
                // IS - June 10: Establishment of First Islamic State & Early Battles (from Urdu/Islamic Studies Section): Pages 14-16 (20 MCQs)
                { question: "The first Islamic State was established in:", options: ["Makkah", "Madina", "Taif", "Jerusalem"], correctOptionIndex: 1, explanation: "The first Islamic State was established in Madina after the Hijrah (migration) of Prophet Muhammad (PBUH) from Makkah.", difficulty: "easy", source_page: 14 },
                { question: "The Charter of Madina (Mithaq-e-Madina) was a treaty between Muslims and which other group?", options: ["Quraish of Makkah", "Christians of Najran", "Jews of Madina", "Persians"], correctOptionIndex: 2, explanation: "The Charter of Madina was a constitution established by Prophet Muhammad (PBUH) for the nascent Islamic state in Madina, governing relations among Muslims and the local Jewish tribes.", difficulty: "easy", source_page: 14 },
                { question: "What was the year of Hijrah (migration to Madina) in the Islamic calendar?", options: ["570 AD", "610 AD", "622 AD", "632 AD"], correctOptionIndex: 2, explanation: "The Hijrah, or migration of Prophet Muhammad (PBUH) from Makkah to Madina, occurred in 622 AD, marking the beginning of the Islamic calendar (Hijri calendar).", difficulty: "easy", source_page: 14 },
                { question: "The first battle in Islam was:", options: ["Battle of Uhud", "Battle of Khandaq", "Battle of Tabuk", "Battle of Badr"], correctOptionIndex: 3, explanation: "The Battle of Badr was the first major battle between the early Muslims and their enemies from Makkah.", difficulty: "easy", source_page: 15 },
                { question: "The Battle of Badr was fought in which Hijri year?", options: ["1st Hijri", "2nd Hijri", "3rd Hijri", "4th Hijri"], correctOptionIndex: 1, explanation: "The Battle of Badr took place in the 2nd year of Hijrah (624 AD).", difficulty: "easy", source_page: 15 },
                { question: "Who was the leader of the Muslim army in the Battle of Badr?", options: ["Hazrat Ali (R.A)", "Hazrat Abu Bakar (R.A)", "Prophet Muhammad (PBUH)", "Hazrat Umar (R.A)"], correctOptionIndex: 2, explanation: "Prophet Muhammad (PBUH) led the Muslim army in the Battle of Badr.", difficulty: "easy", source_page: 15 },
                { question: "What was the total number of Muslim fighters in the Battle of Badr?", options: ["313", "700", "1000", "3000"], correctOptionIndex: 0, explanation: "Approximately 313 Muslim fighters participated in the Battle of Badr.", difficulty: "easy", source_page: 15 },
                { question: "The Battle of Uhud was fought in which Hijri year?", options: ["2nd Hijri", "3rd Hijri", "4th Hijri", "5th Hijri"], correctOptionIndex: 1, explanation: "The Battle of Uhud took place in the 3rd year of Hijrah (625 AD).", difficulty: "medium", source_page: 15 },
                { question: "In the Battle of Uhud, the Muslim archers were instructed to stay on:", options: ["A mountain pass", "A hill", "A plain ground", "Behind the enemy lines"], correctOptionIndex: 1, explanation: "In the Battle of Uhud, Prophet Muhammad (PBUH) instructed a group of archers to remain on a specific hill (Jabal al-Rumāt) to protect the rear of the Muslim army.", difficulty: "medium", source_page: 15 },
                { question: "The Battle of Khandaq is also known as the Battle of the:", options: ["Swords", "Wells", "Trench", "Mountains"], correctOptionIndex: 2, explanation: "The Battle of Khandaq (Ditch) involved Muslims digging a trench around Madina to defend against enemy forces.", difficulty: "easy", source_page: 16 },
                { question: "The Battle of Khandaq was fought in which Hijri year?", options: ["3rd Hijri", "4th Hijri", "5th Hijri", "6th Hijri"], correctOptionIndex: 2, explanation: "The Battle of Khandaq (or Battle of the Trench) occurred in the 5th year of Hijrah (627 AD).", difficulty: "medium", source_page: 16 },
                { question: "Who suggested digging a trench in the Battle of Khandaq?", options: ["Hazrat Abu Bakar (R.A)", "Hazrat Umar (R.A)", "Hazrat Salman Farsi (R.A)", "Hazrat Ali (R.A)"], correctOptionIndex: 2, explanation: "Hazrat Salman Farsi (R.A) suggested digging a trench around Madina, a strategy common in his native Persia.", difficulty: "tough", source_page: 16 },
                { question: "What was the primary reason for the Battle of Badr?", options: ["To capture Makkah", "To punish Makkah for persecuting Muslims", "To ambush a Quraish caravan", "To defend Madina"], correctOptionIndex: 2, explanation: "The Battle of Badr initially began as an attempt by Muslims to intercept a rich Quraish caravan to retrieve their seized property from Makkah.", difficulty: "tough", source_page: 15 },
                { question: "The Treaty of Hudaibiyah was signed in which Hijri year?", options: ["5th Hijri", "6th Hijri", "7th Hijri", "8th Hijri"], correctOptionIndex: 1, explanation: "The Treaty of Hudaibiyah was signed between Prophet Muhammad (PBUH) and the Makkans in the 6th year of Hijrah (628 AD).", difficulty: "medium", source_page: 16 },
                { question: "The Battle of Khyber was fought against which Jewish tribe?", options: ["Banu Qaynuqa", "Banu Nadir", "Banu Qurayza", "All of the above"], correctOptionIndex: 3, explanation: "The Battle of Khyber was fought against the Jewish community of Khyber, which consisted of several tribes, often referred to collectively.", difficulty: "tough", source_page: 16 },
                { question: "In the Battle of Uhud, the Muslim forces suffered losses mainly due to:", options: ["Lack of preparation", "Betrayal by allies", "Disobedience of archers", "Superior numbers of enemy"], correctOptionIndex: 2, explanation: "The Muslim archers' disobedience of Prophet Muhammad's (PBUH) orders to remain on the hill allowed the enemy cavalry to attack from the rear, leading to significant losses.", difficulty: "medium", source_page: 15 },
                { question: "The concept of 'Muakhat' (Brotherhood) was established between which two groups in Madina?", options: ["Muhajireen and Ansar", "Muslims and Jews", "Quraish and Ansar", "Muhajireen and Quraish"], correctOptionIndex: 0, explanation: "Muakhat was a bond of brotherhood established by Prophet Muhammad (PBUH) between the Muhajireen (emigrants from Makkah) and the Ansar (helpers of Madina).", difficulty: "easy", source_page: 14 },
                { question: "How many major battles are generally recognized in early Islam during the Prophet's time?", options: ["Three", "Four", "Five", "Six"], correctOptionIndex: 1, explanation: "Four major battles are often cited: Badr, Uhud, Khandaq (Trench), and Khyber.", difficulty: "medium", source_page: 15 },
                { question: "The Battle of Khyber took place in which Hijri year?", options: ["5th Hijri", "6th Hijri", "7th Hijri", "8th Hijri"], correctOptionIndex: 2, explanation: "The Battle of Khyber took place in the 7th year of Hijrah (629 AD).", difficulty: "medium", source_page: 16 },
                { question: "The first mosque in Islam was built in:", options: ["Makkah", "Madina", "Quba", "Jerusalem"], correctOptionIndex: 2, explanation: "The first mosque in Islam, Masjid Quba, was built just outside Madina by Prophet Muhammad (PBUH) upon his arrival during the Hijrah.", difficulty: "easy", source_page: 14 }
            ];
            quizQuestions.push(...generalKnowledgeMCQs);

            // Ensure exact counts for difficulty levels before trimming to 100
            let easyQuestions = [];
            let mediumQuestions = [];
            let toughQuestions = [];

            // Categorize questions by initial difficulty
            quizQuestions.forEach(q => {
                if (q.difficulty === "easy") easyQuestions.push(q);
                else if (q.difficulty === "medium") mediumQuestions.push(q);
                else if (q.difficulty === "tough") toughQuestions.push(q);
            });

            // Target distribution: 10 Easy, 50 Medium, 40 Tough
            const targetEasy = 10;
            const targetMedium = 50;
            const targetTough = 40;

            // Adjust Easy questions
            while (easyQuestions.length > targetEasy && mediumQuestions.length < targetMedium) {
                mediumQuestions.push(easyQuestions.pop());
            }
            while (easyQuestions.length < targetEasy && (easyQuestions.length + mediumQuestions.length + toughQuestions.length) < 100 && (mediumQuestions.length > 0 || toughQuestions.length > 0)) {
                if (mediumQuestions.length > 0) {
                    easyQuestions.push(mediumQuestions.pop());
                } else if (toughQuestions.length > 0) {
                    easyQuestions.push(toughQuestions.pop());
                } else {
                    break;
                }
            }


            // Adjust Tough questions
            while (toughQuestions.length > targetTough && mediumQuestions.length < targetMedium) {
                mediumQuestions.push(toughQuestions.pop());
            }
            while (toughQuestions.length < targetTough && (easyQuestions.length + mediumQuestions.length + toughQuestions.length) < 100 && (mediumQuestions.length > 0 || easyQuestions.length > 0)) {
                if (mediumQuestions.length > 0) {
                    toughQuestions.push(mediumQuestions.pop());
                } else if (easyQuestions.length > 0) {
                    toughQuestions.push(easyQuestions.pop());
                } else {
                    break;
                }
            }


            // Adjust Medium questions
            while (mediumQuestions.length > targetMedium && (easyQuestions.length < targetEasy || toughQuestions.length < targetTough)) {
                if (easyQuestions.length < targetEasy) {
                    easyQuestions.push(mediumQuestions.pop());
                } else if (toughQuestions.length < targetTough) {
                    toughQuestions.push(mediumQuestions.pop());
                } else {
                    break;
                }
            }


            // Recombine and shuffle before final trim
            quizQuestions = [...easyQuestions, ...mediumQuestions, ...toughQuestions];
            shuffleArray(quizQuestions); // Shuffle the entire combined list

            // Trim to exactly 100 questions
            quizQuestions = quizQuestions.slice(0, 100);

            // Recalculate difficulty counts to ensure final distribution (for logging/debugging)
            let finalEasyCount = quizQuestions.filter(q => q.difficulty === 'easy').length;
            let finalMediumCount = quizQuestions.filter(q => q.difficulty === 'medium').length;
            let finalToughCount = quizQuestions.filter(q => q.difficulty === 'tough').length;
            console.log(`Final Question Counts: Easy=${finalEasyCount}, Medium=${finalMediumCount}, Tough=${finalToughCount}, Total=${quizQuestions.length}`);


            // Randomly select one "Today's Special Question"
            specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
            quizQuestions[specialQuestionIndex].special = true;

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // Initialize the quiz when the script loads
        document.addEventListener('DOMContentLoaded', () => {
            // Set the login ID dynamically based on the CURRENT_DATE_STR
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase().substring(0, 3);
            const day = parseInt(dateParts[1].replace(',', ''));
            document.getElementById('loginId').value = `${day}${monthName}`; // e.g., 10JUNE

            initializeQuiz();
            // Initial call to set correct sticky date position on load
            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.style.alignSelf = 'flex-start';
            } else {
                liveDateElement.style.alignSelf = 'flex-end';
            }
        });

        // Handle mobile sticky date position on resize
        window.addEventListener('resize', () => {
            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.style.alignSelf = 'flex-start';
            } else {
                liveDateElement.style.alignSelf = 'flex-end';
            }
        });
    </script>
</body>
</html>
