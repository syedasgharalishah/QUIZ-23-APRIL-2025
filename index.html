<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - 31 July</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom CSS for animations and specific styles not easily covered by Tailwind */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Background color */
            color: #2C3E50; /* Default text color */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .text-primary {
            color: #2C3E50;
        }

        .date-color {
            color: #6D6875;
        }

        .gradient-button {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .gradient-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .option-card {
            transition: transform 0.2s ease-in-out, background-color 0.3s ease-in-out;
        }

        .option-card:hover {
            transform: scale(1.05);
        }

        /* Pulse animation for correct answer */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        .pulse-green {
            animation: pulse-green 0.6s ease-out;
            background-color: #90EE90; /* Light Green */
        }

        /* Shake animation for wrong answer */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake-red {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            background-color: #FF6B6B; /* Red */
        }

        /* Progress bar animation */
        .progress-bar-inner {
            background-image: linear-gradient(to right, #20B2AA, #3EB489);
            transition: width 0.5s ease-in-out;
        }

        /* Sticky date positioning for desktop */
        .sticky-date {
            position: sticky;
            top: 1rem;
            z-index: 10;
        }

        /* Responsive adjustments for sticky date */
        @media (min-width: 768px) {
            .sticky-date {
                right: 1rem;
                left: auto;
            }
        }

        @media (max-width: 767px) {
            .sticky-date {
                left: 1rem;
                right: auto;
            }
        }

        /* Hide elements for security */
        .no-select {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Old versions of Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
        }

        /* Modal styling */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 1001; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="no-select" oncontextmenu="return false;">

    <div id="login-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Quiz Login</h2>
            <div class="mb-4">
                <label for="username" class="block text-primary text-sm font-bold mb-2">Username:</label>
                <input type="text" id="username" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter username">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-primary text-sm font-bold mb-2">Password:</label>
                <input type="password" id="password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter password">
            </div>
            <button id="login-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Login</button>
            <p id="login-error" class="text-red-500 text-center mt-4 hidden">Invalid username or password.</p>
        </div>
    </div>

    <div id="candidate-info-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Candidate Information</h2>
            <div class="mb-6">
                <label for="full-name" class="block text-primary text-sm font-bold mb-2">Full Name:</label>
                <input type="text" id="full-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter your full name">
            </div>
            <button id="start-quiz-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Start Quiz</button>
            <p id="name-error" class="text-red-500 text-center mt-4 hidden">Please enter your full name.</p>
        </div>
    </div>

    <div id="quiz-page" class="min-h-screen bg-[#F8F9FA] p-4 md:p-8 hidden">
        <div class="relative mb-6">
            <div id="live-date" class="sticky-date text-sm font-semibold date-color p-2 rounded-lg bg-white shadow-md flex items-center justify-end md:justify-start">
                <i class="far fa-calendar-alt mr-2"></i>
                <span></span>
            </div>
            <h1 class="text-4xl font-bold text-center text-primary mt-4 mb-4">CSS MPT Daily Quiz â€“ <span id="quiz-date-title"></span></h1>

            <div class="w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner">
                <div id="progress-bar" class="progress-bar-inner h-full rounded-full text-xs text-white flex items-center justify-center" style="width: 0%;">
                    <span id="progress-text">0%</span>
                </div>
            </div>

            <div class="w-full rounded-xl overflow-hidden shadow-lg mb-4">
                <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Quiz Banner" class="w-full h-auto object-cover rounded-xl">
            </div>

            <div class="text-center text-primary text-sm md:text-base font-bold mb-6">
                <p>DAWNDIGEST</p>
                <p>PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698</p>
                <p>Updated on: <span id="updated-date"></span></p>
            </div>

            <div class="text-center text-lg font-bold text-primary mb-6">
                Time Remaining: <span id="timer">40:00</span>
            </div>
        </div>

        <div id="quiz-container" class="grid grid-cols-1 md:grid-cols-1 gap-6">
            <div id="question-card" class="bg-white p-6 rounded-xl shadow-lg border border-[#FFF5EE]">
                <p class="text-lg font-semibold mb-4 text-primary"><span id="question-number"></span>. <span id="question-text"></span></p>
                <div id="options-container" class="grid grid-cols-1 gap-3">
                    </div>
                <div id="explanation-container" class="mt-4 p-3 rounded-lg bg-gray-100 text-sm italic text-primary hidden">
                    <p id="explanation-text"></p>
                </div>
            </div>

            <div class="flex justify-around mt-6">
                <button id="prev-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg opacity-50 cursor-not-allowed" disabled>Previous</button>
                <button id="submit-now-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg">Submit</button>
                <button id="next-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg">Next</button>
            </div>
        </div>
    </div>

    <div id="results-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE] text-primary">
            <h2 class="text-3xl font-bold text-center mb-6">Quiz Results</h2>
            <p class="text-lg mb-2"><strong>Candidate Name:</strong> <span id="result-name"></span></p>
            <p class="text-lg mb-2"><strong>Total Score:</strong> <span id="result-score"></span> / 100</p>
            <p class="text-lg mb-2"><strong>Time Taken:</strong> <span id="result-time"></span></p>
            <p class="text-lg mb-4"><strong>Questions Attempted:</strong> <span id="result-attempted"></span></p>
            <button id="retake-quiz-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Retake Quiz</button>
        </div>
    </div>

    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message" class="text-lg text-primary"></p>
            <button id="modal-ok-button" class="gradient-button text-primary font-bold py-2 px-4 rounded-lg mt-4 hidden">OK</button>
            <button id="modal-cancel-button" class="gradient-button text-primary font-bold py-2 px-4 rounded-lg mt-4 ml-2 hidden">Cancel</button>
        </div>
    </div>

    <script type="module">
        // Import the functions you need from the SDKs you need
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyALjJrKf6acGhdEYlsKO-gCpBJHw6UbKTs",
            authDomain: "css-quiz-results.firebaseapp.com",
            projectId: "css-quiz-results",
            storageBucket: "css-quiz-results.appspot.com",
            messagingSenderId: "1077285247585",
            appId: "1:1077285247585:web:47e010dd8fa288b9fa2820",
            measurementId: "G-X4DZ2PC9P8"
        };

        // Initialize Firebase
        let app, db;
        try {
            app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            console.log("Firebase Initialized Successfully.");
        } catch(e) {
            console.error("Firebase initialization failed:", e);
        }

        // Disable right-click, copy/paste, and developer tools
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', event => {
            if (event.key === 'F12' ||
                (event.ctrlKey && event.shiftKey && event.key === 'I') ||
                (event.ctrlKey && event.key === 'u') ||
                (event.ctrlKey && event.key === 'U') ||
                (event.ctrlKey && event.key === 'c') ||
                (event.ctrlKey && event.key === 'C') ||
                (event.ctrlKey && event.key === 'v') ||
                (event.ctrlKey && event.key === 'V')
            ) {
                event.preventDefault();
            }
        });

        // Custom Modal Functions
        function showModal(message, type = 'alert', onConfirm = null) {
            const modal = document.getElementById('custom-modal');
            const modalMessage = document.getElementById('modal-message');
            const okButton = document.getElementById('modal-ok-button');
            const cancelButton = document.getElementById('modal-cancel-button');
            const closeButton = document.querySelector('#custom-modal .close-button');

            modalMessage.textContent = message;
            okButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(true);
                } else if (type === 'alert' && onConfirm) {
                    onConfirm();
                }
            };
            cancelButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(false);
                }
            };
            closeButton.onclick = () => modal.style.display = 'none';

            if (type === 'alert') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'none';
            } else if (type === 'confirm') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'inline-block';
            }
            modal.style.display = 'flex'; // Use flex to center
        }


        // Quiz Data and State
        let currentQuestionIndex = 0;
        let score = 0;
        let questionsAttempted = 0;
        let timerInterval;
        const quizDuration = 40 * 60; // 40 minutes in seconds
        let timeElapsed = 0;
        let userName = '';
        let quizStartTime;
        let quizCompleted = false;

        // Store answers
        const userAnswers = {}; // { questionIndex: selectedOptionIndex }

        // Curated MCQs for July 31st Syllabus: World Geography (Pages 25-29)
        const allQuizQuestions = [
            { question: "Which is the deepest point in the Pacific Ocean?", options: ["Mariana Trench", "Sunda Trench", "Puerto Rico Trench", "Java Trench"], answer: 0, explanation: "The Mariana Trench is the deepest oceanic trench on Earth, located in the western Pacific Ocean." },
            { question: "What is the average depth of the Pacific Ocean?", options: ["3,900 m", "4,280 m", "4,500 m", "5,000 m"], answer: 1, explanation: "The average depth of the Pacific Ocean is approximately 4,280 meters." },
            { question: "Which is the smallest ocean of the world?", options: ["Indian Ocean", "Atlantic Ocean", "Arctic Ocean", "Southern Ocean"], answer: 2, explanation: "The Arctic Ocean is the smallest and shallowest of the world's five major oceans." },
            { question: "Which is the busiest ocean of the world?", options: ["Pacific Ocean", "Atlantic Ocean", "Indian Ocean", "Arctic Ocean"], answer: 1, explanation: "The Atlantic Ocean is the busiest in terms of shipping traffic between Europe and North America." },
            { question: "Which is the warmest ocean in the world?", options: ["Pacific", "Atlantic", "Indian", "Arctic"], answer: 2, explanation: "The Indian Ocean is the warmest ocean in the world." },
            { question: "The Baltic Sea is a sea of which ocean?", options: ["Pacific Ocean", "Atlantic Ocean", "Indian Ocean", "Arctic Ocean"], answer: 1, explanation: "The Baltic Sea is an arm of the Atlantic Ocean, enclosed by Denmark, Estonia, Finland, Germany, Latvia, Lithuania, Poland, Russia, Sweden and the North and Central European Plain." },
            { question: "Which is the shallowest sea of the world?", options: ["North Sea", "Baltic Sea", "Hudson Bay", "Red Sea"], answer: 1, explanation: "The Baltic Sea is considered one of the shallowest seas in the world." },
            { question: "Which is the largest island of the world?", options: ["Greenland", "New Guinea", "Borneo", "Madagascar"], answer: 0, explanation: "Greenland is the world's largest island." },
            { question: "Which is the largest island in the Indian Ocean?", options: ["Sri Lanka", "Sumatra", "Madagascar", "Borneo"], answer: 2, explanation: "Madagascar is the largest island in the Indian Ocean." },
            { question: "Great Britain is an island located in the:", options: ["Pacific Ocean", "Atlantic Ocean", "Indian Ocean", "Arctic Ocean"], answer: 1, explanation: "Great Britain is an island in the North Atlantic Ocean off the northwest coast of continental Europe." },
            { question: "Which is the largest archipelago in the world?", options: ["Indonesia", "Philippines", "Japan", "Malaysia"], answer: 0, explanation: "Indonesia is the world's largest archipelagic state." },
            { question: "The Persian Gulf is located in:", options: ["Pacific Ocean", "Atlantic Ocean", "Indian Ocean", "Arabian Sea"], answer: 3, explanation: "The Persian Gulf is a mediterranean sea in Western Asia, an extension of the Indian Ocean through the Strait of Hormuz." },
            { question: "Which is the largest gulf of the world?", options: ["Gulf of Mexico", "Gulf of Aden", "Gulf of Riga", "Gulf of Siam"], answer: 0, explanation: "The Gulf of Mexico is the largest gulf in the world." },
            { question: "The Bay of Biscay is situated between which two countries?", options: ["France and Spain", "UK and France", "Portugal and Spain", "Italy and France"], answer: 0, explanation: "The Bay of Biscay is a gulf of the northeast Atlantic Ocean located south of the Celtic Sea, between France and Spain." },
            { question: "The Strait of Gibraltar connects the Atlantic Ocean with which sea?", options: ["Black Sea", "Mediterranean Sea", "Red Sea", "North Sea"], answer: 1, explanation: "The Strait of Gibraltar connects the Atlantic Ocean to the Mediterranean Sea." },
            { question: "The Suez Canal connects which two seas?", options: ["Red Sea and Mediterranean Sea", "Arabian Sea and Red Sea", "Black Sea and Mediterranean Sea", "Caribbean Sea and Pacific Ocean"], answer: 0, explanation: "The Suez Canal is an artificial sea-level waterway in Egypt, connecting the Mediterranean Sea to the Red Sea." },
            { question: "Which is the world's longest canal?", options: ["Suez Canal", "Panama Canal", "Grand Canal of China", "Kiel Canal"], answer: 2, explanation: "The Grand Canal in China is the longest canal or artificial river in the world." },
            { question: "Which country is known as the 'Land of Thousand Lakes'?", options: ["Sweden", "Norway", "Finland", "Canada"], answer: 2, explanation: "Finland is known as 'The Land of a Thousand Lakes'." },
            { question: "Which is the largest freshwater lake in the world?", options: ["Lake Victoria", "Lake Huron", "Lake Superior", "Lake Michigan"], answer: 2, explanation: "Lake Superior is the largest of the Great Lakes of North America, and by surface area, it is the world's largest freshwater lake." },
            { question: "Which is the world's highest waterfall?", options: ["Niagara Falls", "Victoria Falls", "Angel Falls", "Iguazu Falls"], answer: 2, explanation: "Angel Falls in Venezuela is the world's tallest uninterrupted waterfall." },
            { question: "Where is Niagara Falls located?", options: ["USA", "Canada", "On the border of USA and Canada", "Mexico"], answer: 2, explanation: "Niagara Falls is located on the border between Ontario, Canada, and New York, USA." },
            { question: "Which is the largest and busiest seaport in the world?", options: ["Port of Shanghai", "Port of Singapore", "Port of Rotterdam", "Port of Hong Kong"], answer: 0, explanation: "The Port of Shanghai is the busiest port in the world in terms of container throughput." },
            { question: "Which is the largest seaport in the United States?", options: ["Port of Los Angeles", "Port of Long Beach", "Port of New York and New Jersey", "Port of Savannah"], answer: 0, explanation: "The Port of Los Angeles is the busiest container port in the United States." },
            { question: "The port of 'Alexandria' is located in which country?", options: ["Greece", "Turkey", "Egypt", "Italy"], answer: 2, explanation: "Alexandria is a major port city on the Mediterranean coast of Egypt." },
            { question: "Which is the deepest ocean in the world?", options: ["Atlantic", "Arctic", "Indian", "Pacific"], answer: 3, explanation: "The Pacific Ocean is the largest and deepest of the world's five oceans." },
            { question: "The Strait of Malacca separates which two landmasses?", options: ["Peninsular Malaysia and Sumatra", "Java and Sumatra", "Borneo and Sulawesi", "Thailand and Cambodia"], answer: 0, explanation: "The Strait of Malacca is a narrow stretch of water between the Malay Peninsula and the Indonesian island of Sumatra." },
            { question: "The Panama Canal connects which two oceans?", options: ["Atlantic and Arctic", "Atlantic and Pacific", "Indian and Pacific", "Atlantic and Indian"], answer: 1, explanation: "The Panama Canal connects the Atlantic Ocean with the Pacific Ocean." },
            { question: "Which is the largest lake in Africa?", options: ["Lake Tanganyika", "Lake Malawi", "Lake Victoria", "Lake Chad"], answer: 2, explanation: "Lake Victoria is the largest lake in Africa and the largest tropical lake in the world." },
            { question: "Which is the largest saltwater lake in the world?", options: ["Great Salt Lake", "Aral Sea", "Caspian Sea", "Lake Van"], answer: 2, explanation: "The Caspian Sea is the world's largest inland body of water, often described as the world's largest lake or a full-fledged sea." },
            { question: "Victoria Falls is located on which river?", options: ["Nile River", "Congo River", "Zambezi River", "Niger River"], answer: 2, explanation: "Victoria Falls is a waterfall on the Zambezi River in southern Africa." },
            { question: "The port of Rotterdam is in which country?", options: ["Belgium", "Germany", "Netherlands", "France"], answer: 2, explanation: "The Port of Rotterdam is the largest seaport in Europe, located in the city of Rotterdam, Netherlands." },
            { question: "The Bosphorus Strait connects the Black Sea with which other sea?", options: ["Aegean Sea", "Sea of Marmara", "Mediterranean Sea", "Adriatic Sea"], answer: 1, explanation: "The Bosphorus Strait connects the Black Sea with the Sea of Marmara." },
            { question: "Which is the largest bay in the world?", options: ["Hudson Bay", "Bay of Bengal", "Gulf of Mexico", "Bay of Biscay"], answer: 1, explanation: "The Bay of Bengal is the largest bay in the world, forming the northeastern part of the Indian Ocean." },
            { question: "The Strait of Hormuz connects the Persian Gulf with which body of water?", options: ["Red Sea", "Arabian Sea", "Gulf of Oman", "Indian Ocean"], answer: 2, explanation: "The Strait of Hormuz connects the Persian Gulf with the Gulf of Oman and the open ocean." },
            { question: "Which is the longest river in the world?", options: ["Amazon River", "Nile River", "Yangtze River", "Mississippi River"], answer: 1, explanation: "The Nile River is credited as the longest river in the world." },
            { question: "Which is the largest river in the world by discharge volume of water?", options: ["Nile River", "Congo River", "Amazon River", "Yangtze River"], answer: 2, explanation: "The Amazon River in South America is the largest river by discharge volume of water in the world." },
            { question: "The famous 'Suez Canal' was opened in which year?", options: ["1859", "1869", "1879", "1889"], answer: 1, explanation: "The Suez Canal was officially opened on November 17, 1869." },
            { question: "The world's largest waterfall system is:", options: ["Niagara Falls", "Victoria Falls", "Iguazu Falls", "Angel Falls"], answer: 2, explanation: "Iguazu Falls, on the border of Argentina and Brazil, is the largest waterfall system in the world." },
            { question: "Which is the highest navigable lake in the world?", options: ["Lake Superior", "Lake Baikal", "Lake Titicaca", "Caspian Sea"], answer: 2, explanation: "Lake Titicaca, on the border of Peru and Bolivia, is often cited as the highest navigable lake in the world." },
            { question: "The Port of Antwerp, one of the world's largest, is in which country?", options: ["Netherlands", "Germany", "France", "Belgium"], answer: 3, explanation: "The Port of Antwerp is the port of the city of Antwerp, located in Flanders, Belgium." },
            { question: "The Strait of Magellan is located where?", options: ["South of South America", "Between Africa and Europe", "Between Asia and North America", "North of Australia"], answer: 0, explanation: "The Strait of Magellan is a navigable sea route in southern Chile separating mainland South America to the north and Tierra del Fuego to the south." },
            { question: "The Great Lakes are a series of interconnected freshwater lakes located in:", options: ["Europe", "Asia", "North America", "Africa"], answer: 2, explanation: "The Great Lakes are located in east-central North America, on the Canadaâ€“United States border." },
            { question: "Which is the deepest lake in the world?", options: ["Lake Tanganyika", "Caspian Sea", "Lake Baikal", "Lake Superior"], answer: 2, explanation: "Lake Baikal in Siberia, Russia, is the world's deepest lake." },
            { question: "The port of Hamburg is a major seaport in which country?", options: ["Netherlands", "Denmark", "Germany", "Poland"], answer: 2, explanation: "The Port of Hamburg is a seaport on the river Elbe in Hamburg, Germany." },
            { question: "The English Channel separates Great Britain from which part of Europe?", options: ["Scandinavia", "The Iberian Peninsula", "Mainland Europe (France)", "Italy"], answer: 2, explanation: "The English Channel separates Southern England from northern France." },
            { question: "Which sea is known for having the highest salinity?", options: ["Mediterranean Sea", "Caribbean Sea", "Red Sea", "Dead Sea"], answer: 3, explanation: "The Dead Sea is a salt lake whose shores are more than 400m below sea level, the lowest point on dry land. Its famously hypersaline water makes floating easy." },
            { question: "The world's largest coral reef system is the:", options: ["Belize Barrier Reef", "Great Barrier Reef", "Red Sea Coral Reef", "Maldives Coral Reefs"], answer: 1, explanation: "The Great Barrier Reef, off the coast of Queensland, Australia, is the world's largest coral reef system." },
            { question: "The Kiel Canal connects which two seas?", options: ["North Sea and Baltic Sea", "Black Sea and Mediterranean Sea", "Red Sea and Mediterranean Sea", "Irish Sea and North Sea"], answer: 0, explanation: "The Kiel Canal is a freshwater canal in Germany that connects the North Sea at BrunsbÃ¼ttel to the Baltic Sea at Kiel-Holtenau." },
            { question: "Which is the largest seaport in the Middle East?", options: ["Port of Jeddah", "Port of Dubai (Jebel Ali)", "Port of Salalah", "Port Said"], answer: 1, explanation: "The Port of Jebel Ali in Dubai is the largest man-made harbour and the biggest and by far the busiest port in the Middle-East." },
            { question: "The Bering Sea is part of which ocean?", options: ["Atlantic Ocean", "Arctic Ocean", "Indian Ocean", "Pacific Ocean"], answer: 3, explanation: "The Bering Sea is a marginal sea of the Northern Pacific Ocean." },
            { question: "The world's largest inland delta is formed by which river?", options: ["Nile River", "Niger River", "Okavango River", "Volga River"], answer: 2, explanation: "The Okavango Delta in Botswana is a vast inland river delta formed where the Okavango River reaches a tectonic trough in the central part of the endorheic basin of the Kalahari." },
            { question: "The Strait of Dover is the narrowest part of which channel?", options: ["English Channel", "Mozambique Channel", "North Channel", "St. George's Channel"], answer: 0, explanation: "The Strait of Dover is the strait at the narrowest part of the English Channel." },
            { question: "Which famous island is located in the Tyrrhenian Sea?", options: ["Crete", "Sicily", "Sardinia", "Corsica"], answer: 1, explanation: "Sicily is the largest island in the Mediterranean Sea and is located in the Tyrrhenian Sea off the coast of Italy." },
            { question: "The Gulf of Carpentaria is a large, shallow sea enclosed on three sides by which country?", options: ["Indonesia", "Papua New Guinea", "Australia", "New Zealand"], answer: 2, explanation: "The Gulf of Carpentaria is enclosed on three sides by northern Australia and bounded on the north by the Arafura Sea." },
            { question: "The world's longest pier is located in which country?", options: ["USA", "UK", "Thailand", "Australia"], answer: 1, explanation: "The Southend Pier in Southend-on-Sea, Essex, United Kingdom is the longest pleasure pier in the world." },
            { question: "The 'Ring of Fire' is a major area in the basin of which ocean?", options: ["Atlantic Ocean", "Indian Ocean", "Pacific Ocean", "Arctic Ocean"], answer: 2, explanation: "The Ring of Fire is a region around much of the rim of the Pacific Ocean where many volcanic eruptions and earthquakes occur." },
            { question: "The Great Australian Bight is a large oceanic bight, or open bay, off which coast of Australia?", options: ["Northern", "Eastern", "Western", "Southern"], answer: 3, explanation: "The Great Australian Bight is off the central and western portions of the southern coastline of mainland Australia." },
            { question: "The world's largest man-made lake by surface area is:", options: ["Lake Kariba", "Lake Volta", "Lake Nasser", "Lake Mead"], answer: 1, explanation: "Lake Volta, in Ghana, is the largest artificial reservoir in the world based on surface area." },
            { question: "The Strait of Juan de Fuca separates which island from the Olympic Peninsula?", options: ["Vancouver Island", "Queen Charlotte Islands", "Kodiak Island", "Aleutian Islands"], answer: 0, explanation: "The Strait of Juan de Fuca is a large body of water about 96 miles long that is the Salish Sea's outlet to the Pacific Ocean. It separates Vancouver Island from the Olympic Peninsula." },
            { question: "The world's largest natural harbor by area is:", options: ["Sydney Harbour, Australia", "Port Jackson, Australia", "Poole Harbour, UK", "Halifax Harbour, Canada"], answer: 2, explanation: "Poole Harbour in Dorset, England, is one of several contenders for the title of largest natural harbour in the world." },
            { question: "Which of the following is an inland sea?", options: ["Caribbean Sea", "Aral Sea", "Sea of Japan", "South China Sea"], answer: 1, explanation: "The Aral Sea was an endorheic lake (an inland sea) lying between Kazakhstan and Uzbekistan." },
            { question: "The Davis Strait lies between which two landmasses?", options: ["Greenland and Baffin Island", "Iceland and Greenland", "UK and Ireland", "Spain and Morocco"], answer: 0, explanation: "The Davis Strait is a northern arm of the Labrador Sea, lying between mid-eastern Baffin Island (Canada) and southwestern Greenland." },
            { question: "The world's largest estuary is that of which river?", options: ["Amazon River", "Ob River", "Saint Lawrence River", "Rio de la Plata"], answer: 2, explanation: "The Saint Lawrence River estuary is the largest estuary in the world." },
            { question: "Which sea separates Europe from Africa?", options: ["Red Sea", "Black Sea", "Mediterranean Sea", "Arabian Sea"], answer: 2, explanation: "The Mediterranean Sea separates the continents of Europe and Africa." },
            { question: "The Torres Strait separates Australia from which island?", options: ["New Zealand", "Tasmania", "New Guinea", "Java"], answer: 2, explanation: "The Torres Strait is a strait which lies between Australia and the Melanesian island of New Guinea." },
            { question: "The world's highest tides occur in which bay?", options: ["Bay of Bengal", "Bay of Fundy", "Hudson Bay", "Bay of Biscay"], answer: 1, explanation: "The Bay of Fundy on the Atlantic coast of North America is known for having the highest tidal range in the world." },
            { question: "The Palk Strait separates India from which country?", options: ["Maldives", "Sri Lanka", "Bangladesh", "Myanmar"], answer: 1, explanation: "The Palk Strait is a strait between the Tamil Nadu state of India and the Jaffna District of the Northern Province of the island nation of Sri Lanka." },
            { question: "Which is the world's largest inland port?", options: ["Port of Montreal", "Port of Chicago", "Port of Duluth-Superior", "Port of Duisburg"], answer: 2, explanation: "The Port of Duluth-Superior, at the western end of Lake Superior, is the world's largest inland port by tonnage." },
            { question: "The Gulf of Aqaba is a large gulf at the northern tip of which sea?", options: ["Mediterranean Sea", "Arabian Sea", "Red Sea", "Persian Gulf"], answer: 2, explanation: "The Gulf of Aqaba is located at the northern end of the Red Sea, east of the Sinai Peninsula and west of the Arabian Peninsula." },
            { question: "The world's largest single-dish radio telescope is located near which city?", options: ["Arecibo, Puerto Rico", "Pingtang, China", "Green Bank, USA", "Jodrell Bank, UK"], answer: 1, explanation: "The Five-hundred-meter Aperture Spherical Telescope (FAST) in Pingtang, China is the world's largest filled-aperture radio telescope." },
            { question: "The Strait of Belle Isle separates Newfoundland from which part of mainland Canada?", options: ["Quebec", "Nova Scotia", "Labrador Peninsula", "New Brunswick"], answer: 2, explanation: "The Strait of Belle Isle is a waterway in eastern Canada that separates the island of Newfoundland from the Labrador Peninsula on the mainland." },
            { question: "Which is the world's northernmost seaport?", "options": ["Murmansk, Russia", "Hammerfest, Norway", "Dikson, Russia", "Tiksi, Russia"], "answer": 2, "explanation": "Dikson in Russia is one of the northernmost ports in the world and remains ice-free for a part of the year." },
            { question: "The Gulf of Bothnia is the northernmost arm of which sea?", "options": ["North Sea", "Norwegian Sea", "Baltic Sea", "Barents Sea"], "answer": 2, "explanation": "The Gulf of Bothnia is situated in the Baltic Sea, between Sweden to the west, Finland to the east." },
            { question: "Which is the largest and principal port of Italy?", "options": ["Port of Naples", "Port of Genoa", "Port of Venice", "Port of Trieste"], "answer": 1, "explanation": "The Port of Genoa is the major seaport of Italy, in the Mediterranean Sea." },
            { question: "The 'Golden Horn' is an inlet of which strait?", "options": ["Strait of Gibraltar", "Dardanelles", "Bosphorus Strait", "Strait of Messina"], "answer": 2, "explanation": "The Golden Horn is a major urban waterway and the primary inlet of the Bosphorus in Istanbul, Turkey." },
            { question: "Which is the largest port in Africa?", "options": ["Port of Durban, South Africa", "Port Said, Egypt", "Port of Lagos, Nigeria", "Port of Mombasa, Kenya"], "answer": 0, "explanation": "The Port of Durban is the largest and busiest shipping terminal in sub-Saharan Africa." },
            { question: "The world's largest naval base is located in which city?", "options": ["San Diego, California", "Norfolk, Virginia", "Pearl Harbor, Hawaii", "Bremerton, Washington"], "answer": 1, "explanation": "Naval Station Norfolk, in Norfolk, Virginia, is the world's largest naval station." },
            { question: "The 'Sunda Strait' separates which two Indonesian islands?", "options": ["Java and Sumatra", "Borneo and Sulawesi", "Bali and Lombok", "Flores and Timor"], "answer": 0, "explanation": "The Sunda Strait is the strait between the Indonesian islands of Java and Sumatra." },
            { question: "Which is the largest port of Pakistan?", "options": ["Port Qasim", "Port of Gwadar", "Port of Karachi", "Port of Pasni"], "answer": 2, "explanation": "The Port of Karachi is one of South Asia's largest and busiest deep-water seaports, handling about 60% of the nation's cargo." },
            { question: "The 'Cook Strait' separates which two main islands of New Zealand?", "options": ["North and South Islands", "Stewart Island and South Island", "Chatham Islands", "Kermadec Islands"], "answer": 0, "explanation": "The Cook Strait separates the North and South Islands of New Zealand." },
            { question: "The world's largest cruise ship port is located in which state?", "options": ["California", "Florida", "Texas", "New York"], "answer": 1, "explanation": "PortMiami in Florida is known as the 'Cruise Capital of the World' and is the busiest cruise port in the world." },
            { question: "The 'Yucatan Channel' separates Mexico from which island nation?", "options": ["Jamaica", "Cuba", "Haiti", "The Bahamas"], "answer": 1, "explanation": "The YucatÃ¡n Channel or Straits of YucatÃ¡n is a strait between Mexico and Cuba." },
            { question: "Which is the largest port in South America?", "options": ["Port of Santos, Brazil", "Port of Buenos Aires, Argentina", "Port of Callao, Peru", "Port of Cartagena, Colombia"], "answer": 0, "explanation": "The Port of Santos in Brazil is the busiest container port in Latin America." },
            { question: "The 'Strait of Georgia' is a strait between Vancouver Island and which mainland?", "options": ["Washington, USA", "British Columbia, Canada", "Oregon, USA", "Alaska, USA"], "answer": 1, "explanation": "The Strait of Georgia is a strait between Vancouver Island and the mainland coast of British Columbia, Canada." },
            { question: "Which is the largest port in the United Kingdom?", "options": ["Port of Felixstowe", "Port of London", "Port of Southampton", "Port of Liverpool"], "answer": 0, "explanation": "The Port of Felixstowe is the busiest container port in the United Kingdom." },
            { question: "The 'Florida Straits' separate Florida from which two island nations?", "options": ["The Bahamas and Cuba", "Jamaica and Haiti", "Puerto Rico and Dominican Republic", "Mexico and Belize"], "answer": 0, "explanation": "The Straits of Florida are located south-southeast of the North American mainland, generally accepted to be between the Florida Keys and Cuba." },
            { question: "Which is the largest port in the Indian subcontinent?", "options": ["Port of Karachi, Pakistan", "Port of Colombo, Sri Lanka", "Jawaharlal Nehru Port (Nhava Sheva), India", "Port of Chittagong, Bangladesh"], "answer": 2, "explanation": "Jawaharlal Nehru Port, also known as Nhava Sheva, is the largest container port in India." },
            { question: "The 'Drake Passage' separates South America from which continent?", "options": ["Africa", "Australia", "Antarctica", "Asia"], "answer": 2, "explanation": "The Drake Passage is the body of water between South America's Cape Horn and the South Shetland Islands of Antarctica." },
            { question: "Which is the largest port in Canada?", "options": ["Port of Montreal", "Port of Vancouver", "Port of Halifax", "Port of Prince Rupert"], "answer": 1, "explanation": "The Port of Vancouver is the largest port in Canada and the third largest in North America by tonnes of cargo." },
            { question: "The 'Strait of Tartary' separates which Russian island from the Asian mainland?", "options": ["Novaya Zemlya", "Sakhalin Island", "Wrangel Island", "Kuril Islands"], "answer": 1, "explanation": "The Strait of Tartary is a strait in the Pacific Ocean dividing the Russian island of Sakhalin from mainland Asia." }
        ];

        // Shuffle questions
        let quizQuestions = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeQuizQuestions() {
            quizQuestions = shuffleArray([...allQuizQuestions]).slice(0, 100);
        }


        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const candidateInfoPage = document.getElementById('candidate-info-page');
        const quizPage = document.getElementById('quiz-page');
        const resultsPage = document.getElementById('results-page');

        const loginButton = document.getElementById('login-button');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');

        const fullNameInput = document.getElementById('full-name');
        const startQuizButton = document.getElementById('start-quiz-button');
        const nameError = document.getElementById('name-error');

        const liveDateSpan = document.querySelector('#live-date span');
        const quizDateTitleSpan = document.getElementById('quiz-date-title');
        const updatedDateSpan = document.getElementById('updated-date');
        const timerSpan = document.getElementById('timer');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        const questionNumberSpan = document.getElementById('question-number');
        const questionTextSpan = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');

        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitNowButton = document.getElementById('submit-now-button');


        const resultNameSpan = document.getElementById('result-name');
        const resultScoreSpan = document.getElementById('result-score');
        const resultTimeSpan = document.getElementById('result-time');
        const resultAttemptedSpan = document.getElementById('result-attempted');
        const retakeQuizButton = document.getElementById('retake-quiz-button');

        // Functions
        function updateLiveDate() {
            const quizDate = new Date('2025-07-31T00:00:00');
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = quizDate.toLocaleDateString('en-US', options);
            liveDateSpan.textContent = formattedDate;
            quizDateTitleSpan.textContent = formattedDate;
            updatedDateSpan.textContent = formattedDate;
        }

        function startTimer() {
            quizStartTime = Date.now();
            timerInterval = setInterval(() => {
                timeElapsed++;
                const remainingSeconds = quizDuration - timeElapsed;

                if (remainingSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerSpan.textContent = "00:00";
                    if (!quizCompleted) {
                        showModal("Time's up! Your quiz will be submitted.", "alert", submitQuiz);
                    }
                } else {
                    const minutes = Math.floor(remainingSeconds / 60);
                    const seconds = remainingSeconds % 60;
                    timerSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;
        }
        
        function loadQuestion(index) {
            if (index >= 0 && index < quizQuestions.length) {
                currentQuestionIndex = index;
                const question = quizQuestions[currentQuestionIndex];

                questionNumberSpan.textContent = currentQuestionIndex + 1;
                questionTextSpan.textContent = question.question;
                optionsContainer.innerHTML = ''; // Clear previous options
                explanationContainer.classList.add('hidden');
                explanationText.textContent = '';

                const optionsWithOriginalIndex = question.options.map((option, originalIndex) => ({ option, originalIndex }));
                const shuffledOptions = shuffleArray(optionsWithOriginalIndex);

                shuffledOptions.forEach(({ option, originalIndex }) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.className = 'option-card p-3 rounded-lg shadow-md cursor-pointer bg-white hover:bg-gray-50 text-primary font-medium border border-gray-200';
                    optionDiv.textContent = option;
                    optionDiv.dataset.originalIndex = originalIndex;
                    optionDiv.addEventListener('click', () => selectOption(optionDiv));
                    optionsContainer.appendChild(optionDiv);
                });
                
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    showPreviousAnswer();
                }

                updateNavigationButtons();
                updateProgressBar();
            }
        }

        function selectOption(selectedDiv) {
            if (userAnswers[currentQuestionIndex] !== undefined) return;

            const selectedOptionIndex = parseInt(selectedDiv.dataset.originalIndex);
            const question = quizQuestions[currentQuestionIndex];
            const correctAnswerIndex = question.answer;

            userAnswers[currentQuestionIndex] = selectedOptionIndex;
            questionsAttempted++;

            if (selectedOptionIndex === correctAnswerIndex) {
                score++;
                selectedDiv.classList.add('pulse-green', 'border-green-500');
            } else {
                selectedDiv.classList.add('shake-red', 'border-red-500');
                Array.from(optionsContainer.children).forEach(child => {
                    if (parseInt(child.dataset.originalIndex) === correctAnswerIndex) {
                        child.classList.add('pulse-green', 'border-green-500');
                    }
                });
            }

            explanationText.textContent = `Explanation: ${question.explanation}`;
            explanationContainer.classList.remove('hidden');

            Array.from(optionsContainer.children).forEach(child => {
                child.style.pointerEvents = 'none';
            });
        }

        function showPreviousAnswer() {
            const question = quizQuestions[currentQuestionIndex];
            const previouslySelected = userAnswers[currentQuestionIndex];
            const correctAnswerIndex = question.answer;

            Array.from(optionsContainer.children).forEach(child => {
                const childIndex = parseInt(child.dataset.originalIndex);
                child.style.pointerEvents = 'none'; 

                if (childIndex === correctAnswerIndex) {
                    child.classList.add('pulse-green', 'border-green-500');
                }
                if (childIndex === previouslySelected && previouslySelected !== correctAnswerIndex) {
                    child.classList.add('shake-red', 'border-red-500');
                }
            });

            explanationText.textContent = `Explanation: ${question.explanation}`;
            explanationContainer.classList.remove('hidden');
        }


        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            prevButton.classList.toggle('opacity-50', currentQuestionIndex === 0);
            prevButton.classList.toggle('cursor-not-allowed', currentQuestionIndex === 0);

            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextButton.style.visibility = 'hidden';
            } else {
                nextButton.style.visibility = 'visible';
            }
        }

        function navigateQuestions(direction) {
            if (direction === 'next' && currentQuestionIndex < quizQuestions.length - 1) {
                loadQuestion(currentQuestionIndex + 1);
            } else if (direction === 'prev' && currentQuestionIndex > 0) {
                loadQuestion(currentQuestionIndex - 1);
            }
        }

        async function submitQuiz() {
            if (quizCompleted) return;
            quizCompleted = true;
            clearInterval(timerInterval);

            const finalTimeSeconds = timeElapsed;
            const finalMinutes = Math.floor(finalTimeSeconds / 60);
            const finalSeconds = finalTimeSeconds % 60;
            const formattedFinalTime = `${finalMinutes.toString().padStart(2, '0')}:${finalSeconds.toString().padStart(2, '0')}`;
            const incorrectCount = questionsAttempted - score;
            const quizDate = new Date('2025-07-31T00:00:00').toLocaleDateString('en-CA');

            const resultData = {
                candidateName: userName,
                score: score,
                correctCount: score,
                incorrectCount: incorrectCount,
                attemptedCount: questionsAttempted,
                timeTaken: formattedFinalTime,
                timeTakenSeconds: finalTimeSeconds,
                quizDate: quizDate,
                submittedAt: new Date().toISOString()
            };

            if (db) {
                try {
                    await addDoc(collection(db, "quizResults"), resultData);
                } catch (e) {
                    console.error("Error adding document: ", e);
                }
            }

            resultNameSpan.textContent = userName;
            resultScoreSpan.textContent = score;
            resultTimeSpan.textContent = formattedFinalTime;
            resultAttemptedSpan.textContent = questionsAttempted;

            quizPage.classList.add('hidden');
            resultsPage.classList.remove('hidden');
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            questionsAttempted = 0;
            timeElapsed = 0;
            userName = '';
            quizCompleted = false;
            Object.keys(userAnswers).forEach(key => delete userAnswers[key]);
            clearInterval(timerInterval);
            timerSpan.textContent = "40:00";
            progressBar.style.width = '0%';
            progressText.textContent = '0%';
            loginPage.classList.remove('hidden');
            resultsPage.classList.add('hidden');
            candidateInfoPage.classList.add('hidden');
            quizPage.classList.add('hidden');
            usernameInput.value = '';
            passwordInput.value = '';
            fullNameInput.value = '';
            loginError.classList.add('hidden');
            nameError.classList.add('hidden');
            initializeQuizQuestions();
        }

        // Event Listeners
        loginButton.addEventListener('click', () => {
            const username = usernameInput.value.toUpperCase();
            const password = passwordInput.value;

            if (username === '31JULY' && password === 'free') {
                loginPage.classList.add('hidden');
                candidateInfoPage.classList.remove('hidden');
                loginError.classList.add('hidden');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        startQuizButton.addEventListener('click', () => {
            const enteredName = fullNameInput.value.trim();
            if (enteredName) {
                userName = enteredName;
                candidateInfoPage.classList.add('hidden');
                quizPage.classList.remove('hidden');
                nameError.classList.add('hidden');
                startTimer();
                loadQuestion(currentQuestionIndex);
            } else {
                nameError.classList.add('hidden');
            }
        });

        nextButton.addEventListener('click', () => navigateQuestions('next'));
        prevButton.addEventListener('click', () => navigateQuestions('prev'));
        
        submitNowButton.addEventListener('click', () => {
            if (!quizCompleted) {
                showModal("Are you sure you want to submit the quiz?", "confirm", (confirmed) => {
                    if (confirmed) {
                        submitQuiz();
                    }
                });
            }
        });

        retakeQuizButton.addEventListener('click', resetQuiz);

        document.addEventListener('DOMContentLoaded', () => {
            updateLiveDate();
            initializeQuizQuestions();
        });

        window.addEventListener('resize', () => {
            const liveDateElement = document.getElementById('live-date');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        });
        window.dispatchEvent(new Event('resize'));

    </script>
</body>
</html>
