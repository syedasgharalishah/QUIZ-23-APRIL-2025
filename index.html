<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 8, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Old Lace */
            color: #8B4513; /* SaddleBrown */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .top-bar .whatsapp-link {
            color: #555;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4513; /* SaddleBrown */
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #D2B48C, #CD853F); /* Tan to Peru */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling */
        .card {
            background-color: #FAF0E6; /* Linen */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #F4A460, #D2B48C); /* SandyBrown to Tan */
            color: #4B2E2E;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .button-gradient:disabled {
            background-image: linear-gradient(to right, #cccccc, #999999);
            cursor: not-allowed;
            opacity: 0.7;
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #8B4513;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #CD853F; /* Peru */
            background-color: #FFF8DC; /* Cornsilk */
            font-weight: bold;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-title { font-size: 1.5rem; }
            .card { padding: 1rem; }
        }
    </style>
</head>
<body>

    <script>
        // --- Anti-Cheating Measures ---
        // Disable right-click context menu
        document.addEventListener('contextmenu', event => event.preventDefault());
        
        // Disable common developer tool shortcuts (Ctrl+Shift+I, J, C, U) and F12
        document.addEventListener('keydown', e => {
            if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && ['I', 'J', 'C'].includes(e.key.toUpperCase())) || (e.ctrlKey && e.key.toUpperCase() === 'U')) {
                e.preventDefault();
            }
        });

        // Disable copy and paste events
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto" onerror="this.onerror=null;this.src='https://placehold.co/200x100/FDF5E6/8B4513?text=Logo';">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div id="attemptMessage" class="text-center text-red-600 font-bold mb-4 hidden"></div>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display text-lg font-bold text-red-600 mb-4 text-center" id="timerDisplay"></div>
            <div class="question-progress text-center text-sm text-gray-500 mb-4" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6"></div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Submitted Successfully</h2>
            <p class="text-center mb-4">Your results have been recorded.</p>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <p class="text-center mt-6 font-semibold text-gray-700">You may now close this window.</p>
        </div>
    </main>

    <script>
        // --- Quiz Configuration ---
        const CURRENT_DATE_STR = "July 8, 2025";
        const QUIZ_DURATION_MINUTES = 25; 
        const QUIZ_ID = `quiz_attempt_${CURRENT_DATE_STR.replace(/, /g, '_')}`;

        // --- Global State Variables ---
        let quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        let specialQuestionIndex = -1;

        // --- Helper Functions ---
        function shuffleArrayWithSeed(array, seed) {
            let rng = new Math.seedrandom(seed);
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function generateUniqueId() {
            return 'quiz_submission_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        function updateProgressBar() {
            const answeredQuestions = userAnswers.filter(a => a !== null).length;
            const progress = (answeredQuestions / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length}`;
        }

        function showPage(pageId) {
            ['loginPage', 'candidateNamePage', 'quizPage', 'resultsPage'].forEach(id => {
                document.getElementById(id).classList.add('hidden');
            });
            document.getElementById(pageId).classList.remove('hidden');
        }

        function startTimer() {
            quizStartTime = Date.now();
            const quizEndTime = quizStartTime + QUIZ_DURATION_MINUTES * 60 * 1000;

            timerInterval = setInterval(() => {
                const now = Date.now();
                const timeLeft = Math.round((quizEndTime - now) / 1000);

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    document.getElementById('timerDisplay').textContent = "Time's Up!";
                    submitQuiz(true); // Auto-submit
                } else {
                    const minutes = Math.floor(timeLeft / 60);
                    const seconds = timeLeft % 60;
                    document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const quizCard = document.getElementById('quizPage');
            quizCard.classList.toggle('special-question', !!question.special);
            
            // Options are shuffled once during initialization and stored.
            // This ensures options remain in the same order when navigating back and forth.
            question.shuffledOptions.forEach((option) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = option.text;
                button.onclick = () => selectOption(option.originalIndex);
                optionsContainer.appendChild(button);
            });

            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer && userAnswer.selectedOptionIndex !== undefined) {
                 Array.from(optionsContainer.children).forEach((button, index) => {
                    if (question.shuffledOptions[index].originalIndex === userAnswer.selectedOptionIndex) {
                        button.classList.add('selected');
                    }
                });
            }

            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: (selectedOptionOriginalIndex === question.correctOptionIndex)
            };
            
            // Visually update the selection
            renderQuestion();
            updateProgressBar();
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function submitQuiz(isAutoSubmit = false) {
            // Prevent multiple submissions
            if (localStorage.getItem(QUIZ_ID) === 'completed') return;
            
            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.isCorrect) {
                    correctCount++;
                }
            });
            const incorrectCount = userAnswers.filter(a => a !== null).length - correctCount;

            const score = (correctCount * 2) - incorrectCount;
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = `${score}`;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);
            
            showPage('resultsPage');
            
            // Set completion flag in localStorage
            localStorage.setItem(QUIZ_ID, 'completed');

            // Submit data to Formspree
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId());
            if (isAutoSubmit) {
                formData.append('Submission Type', 'Auto-submitted (Time Expired)');
            }

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: { 'Accept': 'application/json' }
            }).then(response => {
                if (!response.ok) console.error('Formspree submission failed.');
            }).catch(error => console.error('Formspree submission error:', error));
        }

        // --- Event Listeners ---
        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value.toUpperCase();
            const password = document.getElementById('loginPassword').value;
            if (id === '08JULY' && password === 'free') {
                document.getElementById('loginError').classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                document.getElementById('loginError').classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateName = document.getElementById('candidateName').value.trim();
            if (candidateName) {
                document.getElementById('nameError').classList.add('hidden');
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                document.getElementById('nameError').classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));

        // --- Quiz Initialization ---
        function initializeQuiz() {
            const dateSeed = CURRENT_DATE_STR;
            
            const allQuestions = [
                // NOTE: 'explanation' keys have been removed for security.
                // --- General Knowledge: Names of Parliaments (Pages 50-52) - 40 Qs ---
                { question: "What is the name of Afghanistan's parliament?", options: ["Loya Jirga", "Wolesi Jirga", "Shora", "None of these"], correctOptionIndex: 2, source_page: 50 },
                { question: "The parliament of which country is known as 'The Knesset'?", options: ["Egypt", "Israel", "Syria", "Lebanon"], correctOptionIndex: 1, source_page: 50 },
                { question: "The parliament of which country is called 'National People's Assembly'?", options: ["Nigeria", "China", "Ghana", "Hong Kong"], correctOptionIndex: 1, source_page: 50 },
                { question: "What is the name of the lower house of Argentina's parliament (National Congress)?", options: ["Senate", "Chamber of Deputies", "National Assembly", "People's Assembly"], correctOptionIndex: 1, source_page: 50 },
                { question: "Australia's parliament is called 'Federal Parliament'. What are its two houses called?", options: ["Senate and House of Representatives", "Senate and National Assembly", "Council of States and House of Commons", "None of these"], correctOptionIndex: 0, source_page: 50 },
                { question: "To which country 'Sabor' belongs?", options: ["Russia", "Croatia", "Jordan", "Palestine"], correctOptionIndex: 1, source_page: 50 },
                { question: "The parliament of which country is called 'Folketing'?", options: ["France", "Denmark", "Italy", "Germany"], correctOptionIndex: 1, source_page: 50 },
                { question: "What is the name of Egypt's parliament?", options: ["Majlis", "Shora", "People's Assembly", "House of Representatives"], correctOptionIndex: 3, source_page: 50 },
                { question: "What is the name of Germany's parliament?", options: ["Bundestag and Bundesrat", "Reichstag", "Volkskammer", "Diet"], correctOptionIndex: 0, source_page: 51 },
                { question: "The parliament of Iran is known as:", options: ["Majlis", "Shora", "Knesset", "Sabor"], correctOptionIndex: 0, source_page: 51 },
                { question: "What is the name of Japan's parliament?", options: ["Diet", "House of Councillors and House of Representatives", "Both of them", "None of them"], correctOptionIndex: 2, source_page: 51 },
                { question: "The parliament of which country is called 'Storting'?", options: ["Sweden", "Norway", "Finland", "Denmark"], correctOptionIndex: 1, source_page: 51 },
                { question: "What is the name of Pakistan's parliament?", options: ["Majlis-e-Shoora", "National Assembly and Senate", "Both of them", "None of them"], correctOptionIndex: 2, source_page: 51 },
                { question: "The parliament of Spain is known as:", options: ["Cortes Generales", "Senate", "Congress of Deputies", "All of the above"], correctOptionIndex: 0, source_page: 52 },
                { question: "What is the name of USA's parliament?", options: ["Congress", "Senate and House of Representatives", "Both of them", "None of them"], correctOptionIndex: 2, source_page: 52 },
                { question: "What is the name of the lower house of the UK parliament?", options: ["House of Lords", "House of Commons", "Senate", "National Assembly"], correctOptionIndex: 1, source_page: 52 },
                { question: "The parliament of which country is known as 'Duma'?", options: ["Russia", "Poland", "Hungary", "Ukraine"], correctOptionIndex: 0, source_page: 52 },
                { question: "What is the parliament of Bangladesh called?", options: ["Jatiya Sangsad", "Loya Jirga", "People's Council", "Union Council"], correctOptionIndex: 0, source_page: 50 },
                { question: "The parliament of Canada consists of the Senate and which other house?", options: ["House of Commons", "House of Representatives", "National Assembly", "Small House"], correctOptionIndex: 0, source_page: 50 },
                { question: "What is the name of China's parliament?", options: ["Council of China", "National People's Congress", "State Council", "People's Congress"], correctOptionIndex: 1, source_page: 50 },
                { question: "The 'Eduskunta' is the parliament of which country?", options: ["Sweden", "Finland", "Estonia", "Latvia"], correctOptionIndex: 1, source_page: 51 },
                { question: "The parliament of India is known as 'Sansad'. What is its upper house called?", options: ["Lok Sabha", "Rajya Sabha", "Vidhan Sabha", "None of these"], correctOptionIndex: 1, source_page: 51 },
                { question: "The parliament of Ireland's lower house is known as:", options: ["Dáil Éireann", "Seanad Éireann", "Oireachtas", "Ceann Comhairle"], correctOptionIndex: 0, source_page: 51 },
                { question: "What is the name of the parliament of Nepal?", options: ["Panchayat", "Rashtriya Panchayat", "Federal Parliament", "National Assembly"], correctOptionIndex: 2, source_page: 51 },
                { question: "The parliament of the Netherlands is called:", options: ["States General", "First Chamber", "Second Chamber", "All of the above"], correctOptionIndex: 0, source_page: 51 },
                { question: "What is the name of Poland's parliament?", options: ["Sejm", "Senat", "National Assembly", "Both a and b"], correctOptionIndex: 3, source_page: 51 },
                { question: "The parliament of which country is called 'Riksdag'?", options: ["South Africa", "Sweden", "Jordan", "Taiwan"], correctOptionIndex: 1, source_page: 52 },
                { question: "What is the name of Switzerland's parliament?", options: ["Federal Assembly", "National Council", "Council of States", "All of the above"], correctOptionIndex: 3, source_page: 52 },
                { question: "The parliament of Turkey is called:", options: ["Grand National Assembly", "Sultan's Council", "Majlis", "None of them"], correctOptionIndex: 0, source_page: 52 },
                { question: "What is the name of the parliament of Uzbekistan?", options: ["Oliy Majlis", "Supreme Assembly", "Both of them", "None of them"], correctOptionIndex: 2, source_page: 52 },
                { question: "The parliament of which country is called 'Althing'?", options: ["Ireland", "Iceland", "Denmark", "Norway"], correctOptionIndex: 1, source_page: 50 },
                { question: "The parliament of which country has an upper house called 'Senate' and a lower house called 'Chamber of Deputies'?", options: ["Czech Republic", "Italy", "Both of them", "None of them"], correctOptionIndex: 2, source_page: 50 },
                { question: "The lower house of Malaysia's parliament is known as:", options: ["Dewan Rakyat", "Dewan Negara", "Majlis", "None of them"], correctOptionIndex: 0, source_page: 51 },
                { question: "The parliament of Russia is called the Federal Assembly. What is its upper house?", options: ["Federation Council", "State Duma", "Supreme Soviet", "None of them"], correctOptionIndex: 0, source_page: 52 },
                { question: "The parliament of South Korea is known as:", options: ["National Assembly", "State Council", "Supreme People's Assembly", "None of them"], correctOptionIndex: 0, source_page: 51 },
                { question: "What is the name of Taiwan's parliament?", options: ["Legislative Yuan", "Control Yuan", "National Assembly", "None of them"], correctOptionIndex: 0, source_page: 52 },
                { question: "The parliament of Denmark is called:", options: ["Folketing", "Storting", "Riksdag", "Althing"], correctOptionIndex: 0, source_page: 50 },
                { "question": "The parliament of Libya is called:", "options": ["General People's Congress", "House of Representatives", "National Transitional Council", "None of them"], "correctOptionIndex": 1, "source_page": 51 },
                { "question": "The upper house of the parliament of France is known as:", "options": ["National Assembly", "Sénat (Senate)", "Congress", "Chamber of Deputies"], "correctOptionIndex": 1, "source_page": 51 },
                { "question": "The parliament of which country is called the 'Majlis Al-Umma'?", "options": ["Saudi Arabia", "Qatar", "Kuwait", "Bahrain"], "correctOptionIndex": 2, "source_page": 51 },

                // --- Mathematics: Races and Games of Skills (Page 529) & Stock and Shares (Page 530) - 20 Qs ---
                { question: "In a 100 m race, A covers the distance in 36 seconds and B in 45 seconds. In this race A beats B by:", options: ["20 m", "25 m", "22.5 m", "9 m"], correctOptionIndex: 0, source_page: 529 },
                { question: "In a 500 m race, the ratio of the speeds of two contestants A and B is 3:4. A has a start of 140 m. Then, A wins by:", options: ["60 m", "40 m", "20 m", "10 m"], correctOptionIndex: 2, source_page: 529 },
                { question: "In a 100 m race, A can beat B by 25 m and B can beat C by 4 m. In the same race, A can beat C by:", options: ["21 m", "26 m", "28 m", "29 m"], correctOptionIndex: 2, source_page: 529 },
                { question: "A can run 1 km in 3 min, 10 sec and B can cover the same distance in 3 min, 20 sec. By what distance can A beat B?", options: ["25 m", "50 m", "75 m", "100 m"], correctOptionIndex: 1, source_page: 529 },
                { question: "What is it called when a race or contest ends in a tie?", options: ["Draw", "Dead heat", "Photo finish", "Equal run"], correctOptionIndex: 1, source_page: 529 },
                { question: "In a game of 100 points, A can give B 20 points and C 28 points. Then, B can give C:", options: ["8 points", "10 points", "12 points", "14 points"], correctOptionIndex: 1, source_page: 529 },
                { question: "The regular payment made by a company to its shareholders out of its profits is called:", options: ["Stock", "Share", "Dividend", "Debenture"], correctOptionIndex: 2, source_page: 530 },
                { question: "The value of a share or stock printed on the share certificate is called its:", options: ["Market Value", "Face Value", "Book Value", "Par Value"], correctOptionIndex: 1, source_page: 530 },
                { question: "If a Rs. 100 stock is quoted at a premium of Rs. 20, what is its market value?", options: ["Rs. 80", "Rs. 100", "Rs. 120", "Rs. 20"], correctOptionIndex: 2, source_page: 530 },
                { question: "A man buys Rs. 20 shares paying 9% dividend. The man wants to have an interest of 12% on his money. The market value of each share is:", options: ["Rs. 12", "Rs. 15", "Rs. 18", "Rs. 21"], correctOptionIndex: 1, source_page: 530 },
                { question: "In a 200m race, A beats B by 35 m or 7 seconds. A's time over the course is:", options: ["40 sec", "47 sec", "33 sec", "30 sec"], correctOptionIndex: 2, source_page: 529 },
                { question: "A can give B a start of 10m in a 100m race. B can give C a start of 10m in a 100m race. What start can A give C?", options: ["19m", "20m", "21m", "18m"], correctOptionIndex: 0, source_page: 529 },
                { question: "The total money required to run a company is called:", options: ["Capital stock", "Share", "Dividend", "Fund"], correctOptionIndex: 0, source_page: 530 },
                { question: "When the market value of a stock is less than its face value, it is said to be:", options: ["At par", "At a premium", "At a discount", "Below value"], correctOptionIndex: 2, source_page: 530 },
                { question: "Find the cost of 96 shares of Rs. 10 each at a discount of Rs. 1.25, when brokerage is 1/4 per share.", options: ["Rs. 960", "Rs. 840", "Rs. 864", "Rs. 816"], correctOptionIndex: 2, source_page: 530 },
                { "question": "In a race of 1 km, A beats B by 100 m. B beats C by 100 m. By how much does A beat C in the same race?", "options": ["190 m", "200 m", "210 m", "180 m"], "correctOptionIndex": 0, "source_page": 529 },
                { "question": "The person who owns the stock or shares of a company is called:", "options": ["A broker", "A director", "A stockholder or shareholder", "A debenture holder"], "correctOptionIndex": 2, "source_page": 530 },
                { "question": "If a Rs. 100 stock is sold for Rs. 98, it is said to be sold:", "options": ["At par", "At a premium of 2", "At a discount of 2", "At a brokerage of 2"], "correctOptionIndex": 2, "source_page": 530 },
                { "question": "A runs 1 3/4 times as fast as B. If A gives B a start of 84 m, how far must the winning post be so that A and B might reach it at the same time?", "options": ["196 m", "200 m", "180 m", "192 m"], "correctOptionIndex": 0, "source_page": 529 },
                { "question": "What is the annual income from Rs. 5000 of 6% stock at 120?", "options": ["Rs. 250", "Rs. 300", "Rs. 360", "Rs. 200"], "correctOptionIndex": 0, "source_page": 530 },

                // --- Islamic Studies: Prophethood to Migration (Urdu/IS Section, Pages 11-13) - 40 Qs ---
                { question: "آپ صلی اللہ علیہ وآلہ وسلم پر پہلی وحی کس غار میں نازل ہوئی؟", options: ["غار ثور", "غار حرا", "غار احد", "غار خیف"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 11" },
                { question: "پہلی وحی کون سی سورت کی آیات پر مشتمل تھی؟", options: ["سورۃ الفاتحہ", "سورۃ البقرہ", "سورۃ العلق", "سورۃ المدثر"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 11" },
                { question: "وحی لانے والے فرشتے کا کیا نام ہے؟", options: ["حضرت میکائیلؑ", "حضرت اسرافیلؑ", "حضرت جبرائیلؑ", "حضرت عزرائیلؑ"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 11" },
                { question: "پہلی وحی کے نزول کے بعد آپؐ کو تسلی دینے والی اور سب سے پہلے اسلام قبول کرنے والی شخصیت کون تھیں؟", options: ["حضرت ابوطالب", "ورقہ بن نوفل", "حضرت خدیجہؓ", "حضرت ابوبکرؓ"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 11" },
                { question: "حضرت خدیجہؓ آپؐ کو کس عالم کے پاس لے گئیں جنہوں نے آپؐ کے نبی ہونے کی تصدیق کی؟", options: ["بحیرا راہب", "نسطورا راہب", "ورقہ بن نوفل", "سلمان فارسی"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 11" },
                { question: "مردوں میں سب سے پہلے اسلام کس نے قبول کیا؟", options: ["حضرت علیؓ", "حضرت ابوبکر صدیقؓ", "حضرت زید بن حارثہؓ", "حضرت عثمانؓ"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 11" },
                { question: "بچوں میں سب سے پہلے اسلام قبول کرنے کی سعادت کسے حاصل ہوئی؟", options: ["حضرت عبداللہ بن عمرؓ", "حضرت انس بن مالکؓ", "حضرت علیؓ", "حضرت زید بن حارثہؓ"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 11" },
                { question: "غلاموں میں سب سے پہلے کون اسلام لایا؟", options: ["حضرت بلالؓ", "حضرت زید بن حارثہؓ", "حضرت خبابؓ", "حضرت عمار بن یاسرؓ"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 11" },
                { question: "اسلام کی خفیہ تبلیغ کا دور کتنے عرصے تک جاری رہا؟", options: ["ایک سال", "دو سال", "تین سال", "پانچ سال"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 12" },
                { question: "خفیہ تبلیغ کے دور میں مسلمانوں کا مرکز کیا تھا؟", options: ["خانہ کعبہ", "غار حرا", "دار ارقم", "حضرت ابوطالب کا گھر"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 12" },
                { question: "آپؐ نے اعلانیہ تبلیغ کا آغاز کس پہاڑی سے کیا؟", options: ["کوہ طور", "کوہ جودی", "کوہ صفا", "کوہ مروہ"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 12" },
                { question: "اعلانیہ دعوت کے آغاز پر آپؐ کی سب سے شدید مخالفت کس نے کی؟", options: ["ابوجہل", "ابوسفیان", "ابولہب", "امیہ بن خلف"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 12" },
                { question: "کفار مکہ نے مسلمانوں پر ظلم و ستم کا آغاز کیوں کیا؟", options: ["مسلمانوں کی بڑھتی ہوئی تعداد سے خوفزدہ ہو کر", "بت پرستی کی مخالفت کی وجہ سے", "اسلام کے مساوات کے پیغام کی وجہ سے", "مذکورہ بالا تمام وجوہات"], correctOptionIndex: 3, source_page: "Urdu/IS Sec. 12" },
                { question: "حضرت بلالؓ کو اسلام قبول کرنے پر کون اذیت دیتا تھا؟", options: ["ابوجہل", "امیہ بن خلف", "ابولہب", "عتبہ بن ربیعہ"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 12" },
                { question: "اسلام کی پہلی شہید خاتون کون تھیں؟", options: ["حضرت سمیہؓ", "حضرت فاطمہؓ", "حضرت زینبؓ", "حضرت رقیہؓ"], correctOptionIndex: 0, source_page: "Urdu/IS Sec. 12" },
                { question: "مسلمانوں پر ظلم و ستم بڑھنے کے بعد آپؐ نے انہیں کس ملک کی طرف ہجرت کا حکم دیا؟", options: ["شام", "یمن", "حبشہ (ایتھوپیا)", "مصر"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 13" },
                { question: "حبشہ کی طرف پہلی ہجرت کب ہوئی؟", options: ["نبوت کے تیسرے سال", "نبوت کے پانچویں سال", "نبوت کے ساتویں سال", "نبوت کے دسویں سال"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 13" },
                { question: "ہجرت حبشہ اول میں کتنے لوگ شامل تھے؟", options: ["10 مرد اور 4 خواتین", "11 مرد اور 4 خواتین", "12 مرد اور 5 خواتین", "15 مرد اور 5 خواتین"], correctOptionIndex: 1, source_page: "Urdu/IS Sec. 13" },
                { question: "حبشہ کے بادشاہ کا کیا نام تھا جس نے مسلمانوں کو پناہ دی؟", options: ["ہرقل", "کسریٰ", "نجاشی (نیگس)", "مقوقس"], correctOptionIndex: 2, source_page: "Urdu/IS Sec. 13" },
                { "question": "قریش نے کس کو سفیر بنا کر نجاشی کے دربار میں بھیجا تاکہ وہ مسلمانوں کو واپس لے آئیں؟", "options": ["ابوسفیان اور خالد بن ولید", "عمرو بن العاص اور عبداللہ بن ابی ربیعہ", "ابوجہل اور عتبہ بن ربیعہ", "ابولہب اور عقبہ بن ابی معیط"], "correctOptionIndex": 1, "source_page": "Urdu/IS Sec. 13" },
                { "question": "نجاشی کے دربار میں مسلمانوں کی طرف سے کس نے تقریر کی؟", "options": ["حضرت عثمان بن عفانؓ", "حضرت جعفر بن ابی طالبؓ", "حضرت عبدالرحمن بن عوفؓ", "حضرت زبیر بن عوامؓ"], "correctOptionIndex": 1, "source_page": "Urdu/IS Sec. 13" },
                { "question": "حضرت جعفرؓ نے نجاشی کے دربار میں قرآن کی کون سی سورت کی آیات تلاوت کیں؟", "options": ["سورۃ البقرہ", "سورۃ آل عمران", "سورۃ مریم", "سورۃ یوسف"], "correctOptionIndex": 2, "source_page": "Urdu/IS Sec. 13" },
                { "question": "حضرت ابوبکر صدیقؓ کی تبلیغ سے کون سی بڑی شخصیات اسلام لائیں؟", "options": ["حضرت عثمان، حضرت زبیر، حضرت عبدالرحمن بن عوف", "حضرت سعد بن ابی وقاص، حضرت طلحہ بن عبیداللہ", "مذکورہ بالا تمام", "صرف حضرت عثمان"], "correctOptionIndex": 2, "source_page": "Urdu/IS Sec. 11" },
                { "question": "دوسری وحی کون سی سورت کی آیات تھیں؟", "options": ["سورۃ العلق", "سورۃ القلم", "سورۃ المزمل", "سورۃ المدثر"], "correctOptionIndex": 3, "source_page": "Urdu/IS Sec. 11" },
                { "question": "کفار مکہ آپؐ کو (نعوذ باللہ) کیا کہہ کر پکارتے تھے؟", "options": ["شاعر", "کاہن (جادوگر)", "مجنون (دیوانہ)", "مذکورہ بالا تمام"], "correctOptionIndex": 3, "source_page": "Urdu/IS Sec. 12" },
                { "question": "حضرت عثمان بن عفانؓ کے ساتھ ان کی کون سی زوجہ نے حبشہ ہجرت کی؟", "options": ["حضرت ام کلثومؓ", "حضرت رقیہؓ", "حضرت فاطمہؓ", "حضرت زینبؓ"], "correctOptionIndex": 1, "source_page": "Urdu/IS Sec. 13" },
                { "question": "کفار نے کس صحابی کو اتنا مارا کہ وہ بے ہوش ہوگئے اور انہیں مردہ سمجھ کر چھوڑ دیا گیا؟", "options": ["حضرت خباب بن ارتؓ", "حضرت ابوبکر صدیقؓ", "حضرت مصعب بن عمیرؓ", "حضرت یاسرؓ"], "correctOptionIndex": 1, "source_page": "Urdu/IS Sec. 12" },
                { "question": "دوسری ہجرت حبشہ میں کتنے لوگ شامل تھے؟", "options": ["تقریباً 50", "تقریباً 70", "تقریباً 83 مرد اور 18 خواتین", "تقریباً 100 سے زائد"], "correctOptionIndex": 2, "source_page": "Urdu/IS Sec. 13" },
                { "question": "اللہ تعالیٰ نے آپؐ کو اعلانیہ تبلیغ کا حکم کس آیت میں دیا؟", "options": ["'اور اپنے قریبی رشتہ داروں کو ڈرائیے'", "'پس آپ کو جو حکم دیا جاتا ہے اسے کھول کر سنا دیجئے'", "'آپ اپنے رب کی راہ کی طرف حکمت سے بلائیے'", "مذکورہ بالا تمام"], "correctOptionIndex": 1, "source_page": "Urdu/IS Sec. 12" },
                { "question": "ابتدائی مسلمانوں میں زیادہ تر کون لوگ شامل تھے؟", "options": ["صرف امیر اور سردار", "صرف غریب اور غلام", "غریب، غلام اور چند معزز نوجوان", "صرف نوجوان"], "correctOptionIndex": 2, "source_page": "Urdu/IS Sec. 12" }
            ];

            // Shuffle all questions once for the day
            shuffleArrayWithSeed(allQuestions, dateSeed);
            
            // For each question, map options to an object and shuffle them
            // This ensures options are shuffled per question but remain consistent during navigation
            allQuestions.forEach((q, index) => {
                const optionSeed = `${dateSeed}-${index}`;
                const mappedOptions = q.options.map((opt, i) => ({ text: opt, originalIndex: i }));
                shuffleArrayWithSeed(mappedOptions, optionSeed);
                q.shuffledOptions = mappedOptions;
            });

            quizQuestions = allQuestions;

            // Assign a special question for the day
            if (quizQuestions.length > 0) {
                let rng = new Math.seedrandom(dateSeed + '-special');
                specialQuestionIndex = Math.floor(rng() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }
        }

        // --- Initial Setup on DOM Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Check if the quiz has already been attempted
            if (localStorage.getItem(QUIZ_ID) === 'completed') {
                const loginBtn = document.getElementById('loginBtn');
                const attemptMsg = document.getElementById('attemptMessage');
                const loginIdInput = document.getElementById('loginId');
                const loginPasswordInput = document.getElementById('loginPassword');

                attemptMsg.textContent = "You have already completed this quiz. It can only be attempted once.";
                attemptMsg.classList.remove('hidden');
                loginBtn.disabled = true;
                loginIdInput.disabled = true;
                loginPasswordInput.disabled = true;
            }

            // Set up date displays and login ID
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase();
            const day = parseInt(dateParts[1].replace(',', ''));
            document.getElementById('loginId').value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`;
            
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;
            
            initializeQuiz();
        });
    </script>
</body>
</html>
