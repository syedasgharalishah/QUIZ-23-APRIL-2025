<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - June 30, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex; /* Added for icon */
            align-items: center; /* Added for icon */
            gap: 0.5rem; /* Added for icon */
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling (Login, Candidate, Quiz, Results Pages) */
        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02); /* Enlarge by 5% on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Timer and Question Progress Display */
        .timer-display, .question-progress {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                align-items: flex-start;
            }
            .top-bar .date-display {
                order: 1;
                font-size: 0.8rem;
                align-self: flex-start;
            }
            .top-bar .whatsapp-link {
                order: 2;
                font-size: 0.8rem;
                align-self: flex-end;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') {
                e.preventDefault();
            }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 100</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "June 30, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Function to update the live date display and handle responsive positioning
        function updateLiveDate() {
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;

            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        }


        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 25; // Quiz duration set to 25 minutes
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "20 minutes 30 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date();
            const todayNormalized = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const currentQuizDateNormalized = new Date(CURRENT_DATE.getFullYear(), CURRENT_DATE.getMonth(), CURRENT_DATE.getDate());

            if (question.special && todayNormalized.getTime() === currentQuizDateNormalized.getTime()) {
                quizCard.classList.add('special-question');
            }

            // Shuffle options for the current question
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);


            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                // Store the original index of the option, not its shuffled position
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === parseInt(button.dataset.originalOptionIndex)) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionOriginalIndex - The original index of the selected option.
         */
        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            // If already answered, do nothing
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback and disable options
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('option-button:hover:not(.selected)'); // Remove hover effect

                const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);

                if (btnOriginalIndex === selectedOptionOriginalIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
                // Highlight the correct answer if the selected answer was incorrect
                if (!isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                    button.classList.add('correct'); // Highlight correct answer
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            // Score calculation: 2 marks for correct, -1 for incorrect. 100 questions total, so max score 200.
            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            // Login credentials for June 30 quiz: ID is 30JUNE, password is 'free'
            const expectedLoginId = "30JUNE";
            const expectedPassword = "free";

            if (id === expectedLoginId && password === expectedPassword) {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Seed the random number generator based on the date for consistent daily quizzes
            const dateSeed = parseInt(CURRENT_DATE_STR.replace(/[^0-9]/g, '')); // e.g., 20250630
            Math.seedrandom(dateSeed);

            // June 30, 2025:
            // General Knowledge: Famous Countries, Capitals & Currencies: Pages 28-30
            // Pakistan Studies: Historical Perspective, Ideology, Movement, Partition & Early Problems: Pages 201-205
            // General Abilities: Averages: Pages 517-519

            const generalKnowledgeMCQs = [
                // Famous Countries, Capitals & Currencies: Pages 28-30 (34 questions)
                { question: "What is the capital of Germany?", options: ["Munich", "Frankfurt", "Berlin", "Hamburg"], correctOptionIndex: 2, explanation: "Berlin is the capital and largest city of Germany.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Japan is the:", options: ["Yuan", "Won", "Yen", "Rupee"], correctOptionIndex: 2, explanation: "The Japanese Yen is the official currency of Japan.", difficulty: "easy", source_page: 29 },
                { question: "Which country has Ottawa as its capital?", options: ["USA", "Canada", "Australia", "New Zealand"], correctOptionIndex: 1, explanation: "Ottawa is the capital city of Canada.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of South Africa?", options: ["Johannesburg", "Cape Town", "Pretoria", "Durban"], correctOptionIndex: 2, explanation: "South Africa has three capital cities: Pretoria (executive), Bloemfontein (judicial), and Cape Town (legislative). Pretoria is usually listed as the administrative capital.", difficulty: "medium", source_page: 28 },
                { question: "The currency 'Euro' is used by how many member states of the European Union?", options: ["19", "20", "27", "28"], correctOptionIndex: 1, explanation: "The Euro is the official currency of 20 of the 27 member states of the European Union.", difficulty: "medium", source_page: 29 },
                { question: "Brasília is the capital of which South American country?", options: ["Argentina", "Chile", "Brazil", "Colombia"], correctOptionIndex: 2, explanation: "Brasília is the federal capital of Brazil.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Egypt?", options: ["Alexandria", "Cairo", "Luxor", "Giza"], correctOptionIndex: 1, explanation: "Cairo is the capital and largest city of Egypt.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Russia is the:", options: ["Rubel", "Ruble", "Rial", "Rupee"], correctOptionIndex: 1, explanation: "The Russian Ruble is the currency of the Russian Federation.", difficulty: "easy", source_page: 29 },
                { question: "Canberra is the capital of which country?", options: ["New Zealand", "Australia", "Ireland", "South Africa"], correctOptionIndex: 1, explanation: "Canberra is the capital city of Australia.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of China?", options: ["Shanghai", "Hong Kong", "Beijing", "Guangzhou"], correctOptionIndex: 2, explanation: "Beijing is the capital of the People's Republic of China.", difficulty: "easy", source_page: 28 },
                { question: "The currency of India is the:", options: ["Rupee", "Rupiah", "Ringgit", "Baht"], correctOptionIndex: 0, explanation: "The Indian Rupee is the official currency of the Republic of India.", difficulty: "easy", source_page: 29 },
                { question: "Which country has London as its capital?", options: ["France", "Germany", "United Kingdom", "Italy"], correctOptionIndex: 2, explanation: "London is the capital and largest city of England and the United Kingdom.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Pakistan?", options: ["Lahore", "Karachi", "Islamabad", "Rawalpindi"], correctOptionIndex: 2, explanation: "Islamabad is the capital city of Pakistan.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Switzerland is the:", options: ["Euro", "Franc", "Krona", "Mark"], correctOptionIndex: 1, explanation: "The Swiss Franc is the currency and legal tender of Switzerland and Liechtenstein.", difficulty: "medium", source_page: 30 },
                { question: "Rome is the capital of which country?", options: ["Spain", "Portugal", "Greece", "Italy"], correctOptionIndex: 3, explanation: "Rome is the capital city of Italy.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Argentina?", options: ["Santiago", "Lima", "Buenos Aires", "Montevideo"], correctOptionIndex: 2, explanation: "Buenos Aires is the capital and most populous city of Argentina.", difficulty: "easy", source_page: 28 },
                { question: "The currency of South Korea is the:", options: ["Yen", "Yuan", "Won", "Baht"], correctOptionIndex: 2, explanation: "The South Korean Won is the official currency of South Korea.", difficulty: "easy", source_page: 29 },
                { question: "New Delhi is the capital of which country?", options: ["Pakistan", "Bangladesh", "Sri Lanka", "India"], correctOptionIndex: 3, explanation: "New Delhi is the capital of India.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Saudi Arabia?", options: ["Jeddah", "Mecca", "Riyadh", "Medina"], correctOptionIndex: 2, explanation: "Riyadh is the capital and largest city of Saudi Arabia.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Turkey is the:", options: ["Lira", "Dinar", "Riyal", "Pound"], correctOptionIndex: 0, explanation: "The Turkish Lira is the currency of Turkey.", difficulty: "easy", source_page: 30 },
                { question: "Madrid is the capital of which country?", options: ["Portugal", "Spain", "Italy", "Greece"], correctOptionIndex: 1, explanation: "Madrid is the capital and most populous city of Spain.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Bangladesh?", options: ["Chittagong", "Sylhet", "Dhaka", "Khulna"], correctOptionIndex: 2, explanation: "Dhaka is the capital and largest city of Bangladesh.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Brazil is the:", options: ["Peso", "Real", "Dollar", "Bolívar"], correctOptionIndex: 1, explanation: "The Brazilian Real is the official currency of Brazil.", difficulty: "easy", source_page: 29 },
                { question: "Jakarta is the capital of which country?", options: ["Thailand", "Vietnam", "Indonesia", "Malaysia"], correctOptionIndex: 2, explanation: "Jakarta is the capital and largest city of Indonesia.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of New Zealand?", options: ["Auckland", "Christchurch", "Wellington", "Queenstown"], correctOptionIndex: 2, explanation: "Wellington is the capital city of New Zealand.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Mexico is the:", options: ["Dollar", "Euro", "Peso", "Sol"], correctOptionIndex: 2, explanation: "The Mexican Peso is the currency of Mexico.", difficulty: "easy", source_page: 29 },
                { question: "Lisbon is the capital of which country?", options: ["Spain", "Italy", "Portugal", "Greece"], correctOptionIndex: 2, explanation: "Lisbon is the capital and the largest city of Portugal.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of South Korea?", options: ["Busan", "Seoul", "Incheon", "Daegu"], correctOptionIndex: 1, explanation: "Seoul is the capital and largest metropolis of South Korea.", difficulty: "easy", source_page: 28 },
                { question: "The currency of South Africa is the:", options: ["Rand", "Shilling", "Kwacha", "Pula"], correctOptionIndex: 0, explanation: "The South African Rand is the official currency of South Africa.", difficulty: "easy", source_page: 30 },
                { question: "Cairo is the capital of:", options: ["Syria", "Lebanon", "Egypt", "Jordan"], correctOptionIndex: 2, explanation: "Cairo is the capital city of Egypt.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Sweden?", options: ["Oslo", "Copenhagen", "Helsinki", "Stockholm"], correctOptionIndex: 3, explanation: "Stockholm is the capital and most populous city of Sweden.", difficulty: "easy", source_page: 28 },
                { question: "The currency of Canada is the:", options: ["US Dollar", "Canadian Dollar", "Euro", "Pound"], correctOptionIndex: 1, explanation: "The Canadian Dollar is the currency of Canada.", difficulty: "easy", source_page: 29 },
                { question: "Bangkok is the capital of which country?", options: ["Vietnam", "Thailand", "Cambodia", "Laos"], correctOptionIndex: 1, explanation: "Bangkok is the capital and most populous city of Thailand.", difficulty: "easy", source_page: 28 },
                { question: "What is the capital of Nigeria?", options: ["Lagos", "Abuja", "Kano", "Ibadan"], correctOptionIndex: 1, explanation: "Abuja is the capital city of Nigeria.", difficulty: "medium", source_page: 28 }
            ];

            const pakistanStudiesMCQs = [
                // Historical Perspective, Ideology, Movement, Partition & Early Problems: Pages 201-205 (33 questions)
                { question: "When did the Battle of Plassey take place?", options: ["1757", "1764", "1773", "1857"], correctOptionIndex: 0, explanation: "The Battle of Plassey was fought on June 23, 1757.", difficulty: "easy", source_page: 201 },
                { question: "Who founded the Scientific Society in Aligarh?", options: ["Sir Syed Ahmed Khan", "Maulana Muhammad Ali Jauhar", "Allama Iqbal", "Quaid-e-Azam Muhammad Ali Jinnah"], correctOptionIndex: 0, explanation: "Sir Syed Ahmed Khan founded the Scientific Society in 1864 to translate Western works into Urdu.", difficulty: "easy", source_page: 201 },
                { question: "The Ideology of Pakistan is based on the concept of:", options: ["Secularism", "Capitalism", "Two-Nation Theory", "Socialism"], correctOptionIndex: 2, explanation: "The Two-Nation Theory states that Muslims and Hindus are two distinct nations in British India.", difficulty: "easy", source_page: 202 },
                { question: "When was the Pakistan Resolution passed?", options: ["1930", "1933", "1940", "1946"], correctOptionIndex: 2, explanation: "The Pakistan Resolution was passed on March 23, 1940, at Lahore.", difficulty: "easy", source_page: 203 },
                { question: "Who was the first Governor-General of Pakistan?", options: ["Liaquat Ali Khan", "Lord Mountbatten", "Muhammad Ali Jinnah", "Khawaja Nazimuddin"], correctOptionIndex: 2, explanation: "Quaid-e-Azam Muhammad Ali Jinnah became the first Governor-General of Pakistan on August 14, 1947.", difficulty: "easy", source_page: 204 },
                { question: "The Cripps Mission visited India in which year?", options: ["1939", "1942", "1945", "1947"], correctOptionIndex: 1, explanation: "The Cripps Mission, led by Sir Stafford Cripps, arrived in India in March 1942.", difficulty: "medium", source_page: 202 },
                { question: "When was the All-India Muslim League founded?", options: ["1905", "1906", "1907", "1908"], correctOptionIndex: 1, explanation: "The All-India Muslim League was founded on December 30, 1906, in Dhaka.", difficulty: "easy", source_page: 203 },
                { question: "The Redcliffe Line was drawn to demarcate the boundaries between:", options: ["India and Pakistan", "East and West Pakistan", "Princely States and British India", "India and Bangladesh"], correctOptionIndex: 0, explanation: "Sir Cyril Redcliffe was appointed to demarcate the boundaries between India and Pakistan during Partition.", difficulty: "easy", source_page: 204 },
                { question: "What was the immediate problem faced by Pakistan after its independence related to refugees?", options: ["Economic crisis", "Lack of infrastructure", "Mass migration and rehabilitation", "Boundary disputes"], correctOptionIndex: 2, explanation: "The influx of millions of refugees from India posed a massive rehabilitation challenge for the new state.", difficulty: "easy", source_page: 205 },
                { question: "Who coined the term 'Pakistan'?", options: ["Muhammad Ali Jinnah", "Allama Iqbal", "Chaudhry Rahmat Ali", "Sir Syed Ahmed Khan"], correctOptionIndex: 2, explanation: "Chaudhry Rahmat Ali coined the term 'Pakistan' in his pamphlet 'Now or Never' in 1933.", difficulty: "easy", source_page: 202 },
                { question: "The Cabinet Mission Plan was sent to India in which year?", options: ["1942", "1944", "1946", "1947"], correctOptionIndex: 2, explanation: "The British Cabinet Mission arrived in India in March 1946.", difficulty: "medium", source_page: 203 },
                { question: "The Objective Resolution was passed in which year?", options: ["1947", "1948", "1949", "1950"], correctOptionIndex: 2, explanation: "The Objective Resolution, laying down the objectives for Pakistan's future constitution, was passed on March 12, 1949.", difficulty: "easy", source_page: 205 },
                { question: "The Partition of Bengal took place in:", options: ["1900", "1905", "1911", "1919"], correctOptionIndex: 1, explanation: "The Partition of Bengal by Lord Curzon occurred in 1905.", difficulty: "easy", source_page: 201 },
                { question: "Who delivered the Presidential Address at the Allahabad Session of the Muslim League in 1930?", options: ["Muhammad Ali Jinnah", "Maulana Shaukat Ali", "Allama Muhammad Iqbal", "Sardar Abdur Rab Nishtar"], correctOptionIndex: 2, explanation: "Allama Iqbal delivered his famous address at Allahabad in 1930, outlining the vision for a separate Muslim state.", difficulty: "easy", source_page: 202 },
                { question: "The Lucknow Pact was signed between the Muslim League and Congress in:", options: ["1910", "1916", "1920", "1928"], correctOptionIndex: 1, explanation: "The Lucknow Pact, an agreement between the INC and AIML, was signed in 1916.", difficulty: "medium", source_page: 203 },
                { question: "When did Pakistan become a member of the United Nations?", options: ["1947", "1948", "1949", "1950"], correctOptionIndex: 0, explanation: "Pakistan became a member of the United Nations on September 30, 1947.", difficulty: "medium", source_page: 204 },
                { question: "What was a major challenge for Pakistan's economy immediately after Partition?", options: ["Industrial development", "Agricultural surplus", "Lack of financial resources and infrastructure", "Strong trade relations"], correctOptionIndex: 2, explanation: "Pakistan inherited a weak economic infrastructure and faced severe financial constraints post-partition.", difficulty: "easy", source_page: 205 },
                { question: "The Indian National Congress was founded in:", options: ["1880", "1885", "1890", "1900"], correctOptionIndex: 1, explanation: "The Indian National Congress was founded in 1885 by Allan Octavian Hume.", difficulty: "easy", source_page: 201 },
                { question: "The Delhi Muslim Proposals were presented in which year?", options: ["1925", "1927", "1929", "1930"], correctOptionIndex: 1, explanation: "The Delhi Muslim Proposals were presented in 1927 by Muhammad Ali Jinnah.", difficulty: "tough", source_page: 202 },
                { question: "The Simon Commission visited India in:", options: ["1927", "1928", "1929", "1930"], correctOptionIndex: 0, explanation: "The Simon Commission, a group of seven British Members of Parliament, arrived in India in 1927.", difficulty: "medium", source_page: 203 },
                { question: "Who was the last Viceroy of India?", options: ["Lord Curzon", "Lord Wavell", "Lord Mountbatten", "Lord Linlithgow"], correctOptionIndex: 2, explanation: "Lord Louis Mountbatten was the last Viceroy of India and the first Governor-General of independent India.", difficulty: "easy", source_page: 204 },
                { question: "What was the key reason for the initial administrative difficulties faced by Pakistan?", options: ["Lack of qualified civil servants", "Strong political opposition", "Insufficient land area", "Abundant natural resources"], correctOptionIndex: 0, explanation: "Pakistan inherited a very small share of civil servants and administrative machinery, leading to initial administrative problems.", difficulty: "easy", source_page: 205 },
                { question: "The Minto-Morley Reforms were introduced in:", options: ["1909", "1919", "1935", "1942"], correctOptionIndex: 0, explanation: "The Indian Councils Act 1909, also known as the Minto-Morley Reforms, introduced separate electorates for Muslims.", difficulty: "medium", source_page: 201 },
                { question: "The concept of 'Islamic Socialism' in Pakistan was championed by:", options: ["Allama Iqbal", "Muhammad Ali Jinnah", "Zulfiqar Ali Bhutto", "Liaquat Ali Khan"], correctOptionIndex: 2, explanation: "Zulfiqar Ali Bhutto introduced and promoted the concept of 'Islamic Socialism' in Pakistan.", difficulty: "tough", source_page: 202 },
                { question: "The Round Table Conferences were held in London from:", options: ["1920-1922", "1925-1927", "1930-1932", "1935-1937"], correctOptionIndex: 2, explanation: "Three Round Table Conferences were held in London between 1930 and 1932.", difficulty: "medium", source_page: 203 },
                { question: "The Boundary Commission was headed by:", options: ["Lord Mountbatten", "Jawaharlal Nehru", "Sir Cyril Redcliffe", "Sardar Vallabhbhai Patel"], correctOptionIndex: 2, explanation: "Sir Cyril Redcliffe headed the Boundary Commission responsible for drawing the borders of independent India and Pakistan.", difficulty: "easy", source_page: 204 },
                { question: "Which city served as the first capital of Pakistan?", options: ["Lahore", "Islamabad", "Karachi", "Rawalpindi"], correctOptionIndex: 2, explanation: "Karachi served as the first capital of Pakistan until 1959.", difficulty: "easy", source_page: 205 },
                { question: "The Doctrine of Lapse was introduced by:", options: ["Lord Dalhousie", "Lord Curzon", "Lord William Bentinck", "Lord Canning"], correctOptionIndex: 0, explanation: "Lord Dalhousie introduced the Doctrine of Lapse, a policy that annexed Indian princely states.", difficulty: "medium", source_page: 201 },
                { question: "The 'Direct Action Day' was observed on:", options: ["August 14, 1946", "August 16, 1946", "September 1, 1946", "October 26, 1946"], correctOptionIndex: 1, explanation: "Direct Action Day was observed on August 16, 1946, called by the Muslim League.", difficulty: "medium", source_page: 203 },
                { question: "The Government of India Act of 1935 introduced:", options: ["Separate electorates", "Provincial autonomy", "Dyarchy at the center", "Full independence"], correctOptionIndex: 1, explanation: "The Government of India Act 1935 introduced provincial autonomy in British India.", difficulty: "easy", source_page: 203 },
                { question: "Who was the first Prime Minister of Pakistan?", options: ["Muhammad Ali Jinnah", "Khawaja Nazimuddin", "Liaquat Ali Khan", "Hussain Shaheed Suhrawardy"], correctOptionIndex: 2, explanation: "Liaquat Ali Khan became the first Prime Minister of Pakistan.", difficulty: "easy", source_page: 204 },
                { question: "The problem of water distribution, specifically related to the Indus Basin, was resolved by which treaty?", options: ["Lahore Treaty", "Tashkent Agreement", "Indus Waters Treaty", "Simla Agreement"], correctOptionIndex: 2, explanation: "The Indus Waters Treaty (1960) resolved the water dispute between India and Pakistan.", difficulty: "easy", source_page: 205 },
                { question: "The 'Khilafat Movement' was primarily concerned with the fate of the Ottoman Caliphate and was led by:", options: ["Sir Syed Ahmed Khan", "Allama Iqbal", "Ali Brothers", "Muhammad Ali Jinnah"], correctOptionIndex: 2, explanation: "The Khilafat Movement was led by the Ali Brothers (Maulana Muhammad Ali Jauhar and Shaukat Ali).", difficulty: "medium", source_page: 202 }
            ];

            const generalAbilitiesMCQs = [
                // Averages: Pages 517-519 (33 questions)
                { question: "What is the average of 10, 20, 30, 40, and 50?", options: ["20", "25", "30", "35"], correctOptionIndex: 2, explanation: "Sum = 10+20+30+40+50 = 150. Average = 150 / 5 = 30.", difficulty: "easy", source_page: 517 },
                { question: "The average of three numbers is 15. If two of the numbers are 12 and 18, what is the third number?", options: ["10", "15", "20", "25"], correctOptionIndex: 2, explanation: "Sum of three numbers = 15 * 3 = 45. Sum of two numbers = 12 + 18 = 30. Third number = 45 - 30 = 15.", difficulty: "medium", source_page: 517 },
                { question: "The average of 5 observations is 20. If one observation 20 is removed, what is the new average of the remaining 4 observations?", options: ["18", "19", "20", "21"], correctOptionIndex: 2, explanation: "Sum of 5 observations = 5 * 20 = 100. Sum after removing 20 = 100 - 20 = 80. New average = 80 / 4 = 20.", difficulty: "medium", source_page: 517 },
                { question: "The average age of 10 students is 15 years. If the teacher's age is included, the average becomes 16 years. What is the teacher's age?", options: ["20", "25", "26", "30"], correctOptionIndex: 2, explanation: "Total age of 10 students = 10 * 15 = 150 years. Total age of 11 (10 students + teacher) = 11 * 16 = 176 years. Teacher's age = 176 - 150 = 26 years.", difficulty: "medium", source_page: 518 },
                { question: "Find the average of the first five even numbers.", options: ["4", "5", "6", "7"], correctOptionIndex: 2, explanation: "The first five even numbers are 2, 4, 6, 8, 10. Sum = 2+4+6+8+10 = 30. Average = 30 / 5 = 6.", difficulty: "easy", source_page: 518 },
                { question: "The average score of a batsman in 10 innings is 50. How many runs must he score in the next innings to increase his average to 52?", options: ["62", "70", "72", "75"], correctOptionIndex: 2, explanation: "Total runs in 10 innings = 10 * 50 = 500. After 11 innings, total runs = 11 * 52 = 572. Runs needed in next innings = 572 - 500 = 72.", difficulty: "tough", source_page: 519 },
                { question: "The average of two numbers is 8. If one number is 6, what is the other number?", options: ["8", "10", "12", "14"], correctOptionIndex: 1, explanation: "Sum of two numbers = 2 * 8 = 16. Other number = 16 - 6 = 10.", difficulty: "easy", source_page: 517 },
                { question: "The average weight of 5 bags is 60 kg. If a new bag is added, the average weight becomes 58 kg. What is the weight of the new bag?", options: ["48 kg", "50 kg", "52 kg", "54 kg"], correctOptionIndex: 0, explanation: "Total weight of 5 bags = 5 * 60 = 300 kg. Total weight of 6 bags = 6 * 58 = 348 kg. Weight of new bag = 348 - 300 = 48 kg.", difficulty: "medium", source_page: 518 },
                { question: "Find the average of all prime numbers between 20 and 30.", options: ["22", "23", "26", "28"], correctOptionIndex: 2, explanation: "Prime numbers between 20 and 30 are 23 and 29. Sum = 23 + 29 = 52. Average = 52 / 2 = 26.", difficulty: "tough", source_page: 519 },
                { question: "What is the average of the first 10 whole numbers?", options: ["4.5", "5", "5.5", "6"], correctOptionIndex: 0, explanation: "The first 10 whole numbers are 0, 1, 2, 3, 4, 5, 6, 7, 8, 9. Sum = 0+1+...+9 = 45. Average = 45 / 10 = 4.5.", difficulty: "easy", source_page: 517 },
                { question: "A student's marks in 4 subjects are 60, 70, 80, and 90. What is his average mark?", options: ["70", "75", "80", "85"], correctOptionIndex: 1, explanation: "Sum of marks = 60+70+80+90 = 300. Average = 300 / 4 = 75.", difficulty: "easy", source_page: 517 },
                { question: "The average age of a family of 4 members is 20 years. If a new baby is born, the average age remains 20 years. What is the age of the new baby?", options: ["0 years", "1 year", "20 years", "4 years"], correctOptionIndex: 2, explanation: "Initial total age = 4 * 20 = 80 years. New total age for 5 members = 5 * 20 = 100 years. Age of new baby = 100 - 80 = 20 years.", difficulty: "tough", source_page: 518 },
                { question: "The average of first 5 multiples of 3 is:", options: ["3", "6", "9", "12"], correctOptionIndex: 2, explanation: "Multiples are 3, 6, 9, 12, 15. Sum = 3+6+9+12+15 = 45. Average = 45 / 5 = 9.", difficulty: "easy", source_page: 519 },
                { question: "If the average of x, y, z is 10, then x+y+z equals:", options: ["10", "20", "30", "40"], correctOptionIndex: 2, explanation: "Average = (x+y+z)/3 = 10 => x+y+z = 30.", difficulty: "easy", source_page: 517 },
                { question: "The average of the first 7 natural numbers is:", options: ["3", "4", "5", "6"], correctOptionIndex: 1, explanation: "Sum of first 7 natural numbers = 7*(7+1)/2 = 7 * 8 / 2 = 28. Average = 28 / 7 = 4.", difficulty: "easy", source_page: 517 },
                { question: "The average weight of 3 boys is 40 kg. If one boy weighs 35 kg, and another weighs 45 kg, what is the weight of the third boy?", options: ["30 kg", "40 kg", "50 kg", "55 kg"], correctOptionIndex: 1, explanation: "Total weight of 3 boys = 3 * 40 = 120 kg. Sum of two boys' weights = 35 + 45 = 80 kg. Third boy's weight = 120 - 80 = 40 kg.", difficulty: "medium", source_page: 517 },
                { question: "In a class of 20 students, the average marks are 60. If 5 new students join with an average mark of 70, what is the new average of the class?", options: ["62", "65", "68", "70"], correctOptionIndex: 0, explanation: "Total marks of 20 students = 20 * 60 = 1200. Total marks of 5 new students = 5 * 70 = 350. New total students = 20+5=25. New total marks = 1200+350 = 1550. New average = 1550 / 25 = 62.", difficulty: "tough", source_page: 518 },
                { question: "The average temperature for the first three days of a week is 27°C, and for the next three days is 29°C. If the average for the whole week (7 days) is 28.5°C, what is the temperature on the last day?", options: ["28°C", "29°C", "30°C", "31°C"], correctOptionIndex: 3, explanation: "Sum of temp for first 3 days = 3 * 27 = 81°C. Sum of temp for next 3 days = 3 * 28 = 84°C. Total for 6 days = 81+84 = 165°C. Total for 7 days = 7 * 28 = 196°C. Last day = 196 - 165 = 31°C.", difficulty: "tough", source_page: 519 },
                { question: "Find the average of 1, 2, 3, 4, 5, 6.", options: ["3", "3.5", "4", "4.5"], correctOptionIndex: 1, explanation: "Sum = 1+2+3+4+5+6 = 21. Average = 21 / 6 = 3.5.", difficulty: "easy", source_page: 517 },
                { question: "If the average of 4 numbers is 12, what is their sum?", options: ["3", "16", "48", "60"], correctOptionIndex: 2, explanation: "Sum = Average * Number of items = 12 * 4 = 48.", difficulty: "easy", source_page: 517 },
                { question: "The average score of a cricketer in 4 matches is 45. If he scores 60 in the 5th match, what is his new average?", options: ["46", "48", "50", "52"], correctOptionIndex: 1, explanation: "Total runs in 4 matches = 4 * 45 = 180. Total runs in 5 matches = 180 + 60 = 240. New average = 240 / 5 = 48.", difficulty: "medium", source_page: 518 },
                { question: "The average of all even numbers between 1 and 11 is:", options: ["4", "5", "6", "7"], correctOptionIndex: 2, explanation: "Even numbers between 1 and 11 are 2, 4, 6, 8, 10. Sum = 2+4+6+8+10 = 30. Average = 30 / 5 = 6.", difficulty: "medium", source_page: 518 },
                { question: "A student scored 80, 90, 75 in three exams. What should he score in the fourth exam to have an average of 85?", options: ["90", "95", "100", "105"], correctOptionIndex: 1, explanation: "Total desired sum for 4 exams = 4 * 85 = 340. Sum of first three exams = 80+90+75 = 245. Score needed in fourth exam = 340 - 245 = 95.", difficulty: "tough", source_page: 519 },
                { question: "The average of the first five odd numbers is:", options: ["3", "4", "5", "6"], correctOptionIndex: 2, explanation: "The first five odd numbers are 1, 3, 5, 7, 9. Sum = 1+3+5+7+9 = 25. Average = 25 / 5 = 5.", difficulty: "easy", source_page: 519 },
                { question: "If the average of A, B, C, D is 5, then (A+B+C+D)/2 equals:", options: ["5", "10", "20", "25"], correctOptionIndex: 1, explanation: "A+B+C+D = 5 * 4 = 20. So, (A+B+C+D)/2 = 20/2 = 10.", difficulty: "medium", source_page: 517 },
                { question: "The average monthly income of a person for the first 3 months is Rs. 5000, and for the next 4 months is Rs. 6000. What is his average monthly income for the 7 months?", options: ["Rs. 5500", "Rs. 5571.43", "Rs. 5600", "Rs. 5714.28"], correctOptionIndex: 1, explanation: "Total income for first 3 months = 3 * 5000 = 15000. Total income for next 4 months = 4 * 6000 = 24000. Total income for 7 months = 15000 + 24000 = 39000. Average income = 39000 / 7 approx 5571.43.", difficulty: "tough", source_page: 519 },
                { question: "What is the average of the first 5 multiples of 5?", options: ["10", "15", "20", "25"], correctOptionIndex: 1, explanation: "Multiples are 5, 10, 15, 20, 25. Sum = 5+10+15+20+25 = 75. Average = 75 / 5 = 15.", difficulty: "easy", source_page: 519 },
                { question: "If the average of 10, 15, x, 25 is 20, what is the value of x?", options: ["20", "30", "40", "50"], correctOptionIndex: 1, explanation: "(10+15+x+25)/4 = 20 => (50+x)/4 = 20 => 50+x = 80 => x = 30.", difficulty: "medium", source_page: 517 },
                { question: "The average age of a group of 8 people increases by 2 years when a person aged 24 years is replaced by a new person. What is the age of the new person?", options: ["30 years", "32 years", "36 years", "40 years"], correctOptionIndex: 3, explanation: "Increase in total age = 8 * 2 = 16 years. Age of new person = Age of old person + Increase in total age = 24 + 16 = 40 years.", difficulty: "tough", source_page: 518 },
                { question: "The average of first five even numbers greater than 10 is:", options: ["12", "14", "16", "18"], correctOptionIndex: 2, explanation: "The first five even numbers greater than 10 are 12, 14, 16, 18, 20. Sum = 12+14+16+18+20 = 80. Average = 80 / 5 = 16.", difficulty: "medium", source_page: 518 },
                { question: "What is the average of the first four multiples of 7?", options: ["14", "17.5", "21", "24.5"], correctOptionIndex: 1, explanation: "Multiples are 7, 14, 21, 28. Sum = 7+14+21+28 = 70. Average = 70 / 4 = 17.5.", difficulty: "easy", source_page: 519 },
                { question: "The average of a, b, c is 7. If the average of a, b is 6, what is the value of c?", options: ["5", "7", "9", "11"], correctOptionIndex: 2, explanation: "Sum of a,b,c = 7 * 3 = 21. Sum of a,b = 6 * 2 = 12. So c = 21 - 12 = 9.", difficulty: "medium", source_page: 517 },
                { question: "The average age of a class of 30 students is 10 years. If the age of the teacher is included, the average age becomes 11 years. What is the teacher's age?", options: ["30 years", "35 years", "40 years", "41 years"], correctOptionIndex: 3, explanation: "Total age of 30 students = 30 * 10 = 300 years. Total age of 31 (students + teacher) = 31 * 11 = 341 years. Teacher's age = 341 - 300 = 41 years.", difficulty: "tough", source_page: 518 },
                { question: "Find the average of squares of first 5 natural numbers.", options: ["9", "11", "13", "15"], correctOptionIndex: 1, explanation: "Squares are 1^2, 2^2, 3^2, 4^2, 5^2 which are 1, 4, 9, 16, 25. Sum = 1+4+9+16+25 = 55. Average = 55 / 5 = 11.", difficulty: "tough", source_page: 519 },
                { question: "What is the average of first 5 odd numbers?", options: ["3", "4", "5", "6"], correctOptionIndex: 2, explanation: "The first 5 odd numbers are 1, 3, 5, 7, 9. Sum = 1+3+5+7+9 = 25. Average = 25 / 5 = 5.", difficulty: "easy", source_page: 519 },
                { question: "The average of 5 consecutive integers is 15. What is the largest integer?", options: ["13", "15", "17", "19"], correctOptionIndex: 2, explanation: "If the average of consecutive integers is 15, then 15 is the middle number. The integers are 13, 14, 15, 16, 17. The largest is 17.", difficulty: "medium", source_page: 517 },
                { question: "A batsman has an average of 40 runs in 6 innings. In the 7th innings, he scored 40 runs. What is his new average?", options: ["30", "35", "37.5", "40"], correctOptionIndex: 3, explanation: "Total runs in 6 innings = 6 * 40 = 240. Total runs in 7 innings = 240 + 40 = 280. New average = 280 / 7 = 40.", difficulty: "medium", source_page: 518 },
                { question: "The average speed of a car for a journey of 200 km is 50 km/h. How long did the journey take?", options: ["2 hours", "3 hours", "4 hours", "5 hours"], correctOptionIndex: 2, explanation: "Time = Distance / Speed = 200 / 50 = 4 hours.", difficulty: "easy", source_page: 519 },
                { question: "If the average of 5 numbers is 10, and a new number 16 is added, what is the new average?", options: ["10", "11", "12", "12.5"], correctOptionIndex: 1, explanation: "Sum of 5 numbers = 5 * 10 = 50. New sum with 16 = 50 + 16 = 66. New average = 66 / 6 = 11.", difficulty: "medium", source_page: 517 },
                { question: "The average of 3 numbers is 7. The average of the first two is 6. What is the third number?", options: ["7", "8", "9", "10"], correctOptionIndex: 2, explanation: "Sum of 3 numbers = 3 * 7 = 21. Sum of first two = 2 * 6 = 12. Third number = 21 - 12 = 9.", difficulty: "medium", source_page: 517 },
                { question: "The average age of 5 boys is 12 years. If the age of one boy is 8 years, what is the average of the remaining 4 boys?", options: ["10 years", "12 years", "13 years", "14 years"], correctOptionIndex: 2, explanation: "Total age of 5 boys = 5 * 12 = 60 years. Total age of remaining 4 boys = 60 - 8 = 52 years. Average of remaining 4 boys = 52 / 4 = 13 years.", difficulty: "tough", source_page: 518 },
                { question: "What is the average of all multiples of 4 between 10 and 30?", options: ["18", "20", "22", "24"], correctOptionIndex: 1, explanation: "Multiples of 4 between 10 and 30 are 12, 16, 20, 24, 28. Sum = 12+16+20+24+28 = 100. Average = 100 / 5 = 20.", difficulty: "medium", source_page: 519 },
                { question: "The average height of 3 trees is 15 feet. If two trees are 12 feet and 18 feet tall, what is the height of the third tree?", options: ["13 feet", "15 feet", "17 feet", "19 feet"], correctOptionIndex: 1, explanation: "Total height of 3 trees = 3 * 15 = 45 feet. Sum of two trees' heights = 12 + 18 = 30 feet. Height of third tree = 45 - 30 = 15 feet.", difficulty: "easy", source_page: 517 }
            ];

            // Combine and shuffle questions
            quizQuestions.push(...generalKnowledgeMCQs);
            quizQuestions.push(...pakistanStudiesMCQs);
            quizQuestions.push(...generalAbilitiesMCQs);

            // Ensure a fixed number of questions (e.g., 100) by trimming or warning if not enough
            if (quizQuestions.length > 100) {
                // Randomly select 100 questions if more are available
                shuffleArray(quizQuestions);
                quizQuestions = quizQuestions.slice(0, 100);
            } else if (quizQuestions.length < 100) {
                console.warn(`Warning: Only ${quizQuestions.length} questions available for June 30. Aim for 100 questions.`);
                // If fewer than 100, just use what's available
            }
            
            shuffleArray(quizQuestions); // Shuffle the final set of questions

            // Randomly select one "Today's Special Question" (only if there are questions)
            if (quizQuestions.length > 0) {
                specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // --- Initial Setup on DOM Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set the login ID dynamically based on the CURRENT_DATE_STR
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase().substring(0, 3);
            const day = parseInt(dateParts[1].replace(',', ''));
            document.getElementById('loginId').value = `${day}${monthName}`; // e.g., 30JUNE

            initializeQuiz();
            // Initial call to set correct sticky date position on load
            updateLiveDate();
        });

        // Handle mobile sticky date position on resize
        window.addEventListener('resize', updateLiveDate);
    </script>
</body>
</html>
