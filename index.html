<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 18, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Old Lace */
            color: #8B4513; /* SaddleBrown */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .top-bar .whatsapp-link {
            color: #555;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4513; /* SaddleBrown */
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #D2B48C, #CD853F); /* Tan to Peru */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling */
        .card {
            background-color: #FAF0E6; /* Linen */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #F4A460, #D2B48C); /* SandyBrown to Tan */
            color: #4B2E2E;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .submit-button {
             background-image: linear-gradient(to right, #4CAF50, #8BC34A);
             color: white;
        }
        
        .submit-button:hover {
            box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #8B4513;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #CD853F; /* Peru */
            background-color: #FFF8DC; /* Cornsilk */
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #2E8B57; /* SeaGreen */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #F08080; /* LightCoral */
            border-color: #CD5C5C; /* IndianRed */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #FFF5EE; /* SeaShell */
            border-left: 5px solid #D2B48C; /* Tan */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #8B4513;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-title { font-size: 1.5rem; }
            .card { padding: 1rem; }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display text-lg font-bold text-gray-700 mb-4 text-center" id="timerDisplay"></div>
            <div class="question-progress text-center text-sm text-gray-500 mb-4" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6"></div>
            <div class="flex justify-between items-center">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="submitQuizBtn" class="button-gradient submit-button px-6 py-2">Submit</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-2"><strong>Attempted MCQs:</strong> <span id="resultAttempted"></span> / 100</p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Firebase Configuration and Initialization ---
        // This configuration is automatically provided in the original environment.
        // When deploying elsewhere (e.g., GitHub Pages), this will use the placeholder.
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : {
                // --- IMPORTANT ---
                // This is your actual Firebase project configuration.
                apiKey: "AIzaSyALjJrKf6acGhdEYlsKO-gCpBJHw6UbKTs",
                authDomain: "css-quiz-results.firebaseapp.com",
                projectId: "css-quiz-results",
                storageBucket: "css-quiz-results.firebasestorage.app",
                messagingSenderId: "1077285247585",
                appId: "1:1077285247585:web:47e010dd8fa288b9fa2820"
            };
        
        let app, auth, db;
        let userId;

        // Initialize Firebase
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized successfully for quiz.");
        } catch (e) {
            console.error("Error initializing Firebase:", e);
            document.body.innerHTML = '<div class="text-red-500 text-center p-8">Error initializing the application. Please check the console for details. This might be due to missing Firebase configuration.</div>';
        }

        // Handle Authentication
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
            } else {
                try {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during sign-in:", error);
                }
            }
        });

        // Set the current date for display and logic
        const CURRENT_DATE_STR = "July 18, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 100;
        const TOTAL_QUESTIONS = 100;
        let specialQuestionIndex = -1;
        let quizSubmitted = false;

        // --- Helper Functions ---
        function shuffleArrayWithSeed(array, seed) {
            let rng = new Math.seedrandom(seed);
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        function updateProgressBar() {
            const progressBar = document.getElementById('progressBar');
            const questionProgress = document.getElementById('questionProgress');
            if (progressBar && questionProgress) {
                const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
                progressBar.style.width = `${progress}%`;
                questionProgress.textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
            }
        }

        function showPage(pageId) {
            ['loginPage', 'candidateNamePage', 'quizPage', 'resultsPage'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if(pageToShow) pageToShow.classList.remove('hidden');
        }

        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60;

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const timerDisplay = document.getElementById('timerDisplay');
                if(timerDisplay) timerDisplay.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!quizSubmitted) submitQuiz(true);
                } else {
                    timeLeft--;
                }
            }
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            const questionText = document.getElementById('questionText');
            const optionsContainer = document.getElementById('optionsContainer');
            const quizCard = document.getElementById('quizPage');
            const explanationDiv = document.getElementById('explanationDiv');
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            if (questionText) questionText.innerHTML = question.question;
            if (optionsContainer) optionsContainer.innerHTML = '';

            if (quizCard) {
                quizCard.classList.remove('special-question');
                if (question.special) {
                    quizCard.classList.add('special-question');
                }
            }
            
            const optionSeed = `${CURRENT_DATE_STR}-${currentQuestionIndex}`;
            const shuffledOptions = [...question.options];
            shuffleArrayWithSeed(shuffledOptions, optionSeed);

            if (optionsContainer) {
                shuffledOptions.forEach((option) => {
                    const button = document.createElement('button');
                    button.classList.add('option-button', 'w-full');
                    button.innerHTML = option;
                    button.dataset.originalOptionIndex = question.options.indexOf(option);
                    button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));
                    optionsContainer.appendChild(button);
                });
            }

            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer && userAnswer.selectedOptionIndex !== undefined && optionsContainer) {
                 Array.from(optionsContainer.children).forEach((button, index) => {
                    button.disabled = true;
                    const btnOriginalIndex = question.options.indexOf(shuffledOptions[index]);
                    if (btnOriginalIndex === userAnswer.selectedOptionIndex) {
                        button.classList.add('selected', userAnswer.isCorrect ? 'correct' : 'incorrect');
                    }
                    if (userAnswer.isCorrect === false && btnOriginalIndex === question.correctOptionIndex) {
                         button.classList.add('correct');
                    }
                });
            }

            if (explanationDiv) {
                explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
                explanationDiv.style.display = (userAnswer && userAnswer.selectedOptionIndex !== undefined) ? 'block' : 'none';
            }

            if (prevBtn) prevBtn.classList.toggle('hidden', currentQuestionIndex === 0);
            const showNextButton = currentQuestionIndex < quizQuestions.length - 1;
            if (nextBtn) nextBtn.classList.toggle('hidden', !showNextButton);
        }

        function selectOption(selectedOptionOriginalIndex) {
            if (userAnswers[currentQuestionIndex] !== null && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) return;

            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };
            
            renderQuestion(); // Re-render to show selection and explanation
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        async function submitQuiz(isAutoSubmit = false) {
            if(quizSubmitted) return;
            quizSubmitted = true;

            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) correctCount++;
                    else incorrectCount++;
                }
            });

            const score = (correctCount * 2) - incorrectCount;
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput ? candidateNameInput.value : 'Unknown Candidate'; // Added null check

            const resultCandidateName = document.getElementById('resultCandidateName');
            const resultDate = document.getElementById('resultDate');
            const resultScore = document.getElementById('resultScore');
            const resultCorrect = document.getElementById('resultCorrect');
            const resultIncorrect = document.getElementById('resultIncorrect');
            const resultAttempted = document.getElementById('resultAttempted');
            const resultTimeTaken = document.getElementById('resultTimeTaken');

            if (resultCandidateName) resultCandidateName.textContent = candidateName;
            if (resultDate) resultDate.textContent = CURRENT_DATE_STR;
            if (resultScore) resultScore.textContent = `${score}`;
            if (resultCorrect) resultCorrect.textContent = `${correctCount}`;
            if (resultIncorrect) resultIncorrect.textContent = `${incorrectCount}`;
            if (resultAttempted) resultAttempted.textContent = `${attemptedCount} / ${TOTAL_QUESTIONS}`;
            if (resultTimeTaken) resultTimeTaken.textContent = formatTime(timeTakenSeconds);
            
            showPage('resultsPage');

            const resultData = {
                candidateName: candidateName,
                quizDate: CURRENT_DATE_STR,
                score: score,
                correctCount: correctCount,
                incorrectCount: incorrectCount,
                attemptedCount: attemptedCount,
                timeTaken: formatTime(timeTakenSeconds),
                timeTakenSeconds: timeTakenSeconds,
                submittedAt: new Date().toISOString()
            };
            
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-quiz-app';
            if (db) { // Use db directly as it's now in the same scope
                try {
                    const resultsCollectionPath = `/artifacts/${appId}/public/data/quiz_results`;
                    const newResultRef = doc(collection(db, resultsCollectionPath)); 
                    await setDoc(newResultRef, resultData);
                    console.log("Result saved to Firestore.");
                } catch (error) {
                    console.error("Error writing document to Firestore: ", error);
                }
            } else {
                 console.error("Firestore database (db) not initialized.");
            }
        }

        // --- UI Update Functions ---
        function updateLiveDate() {
            const currentDateText = document.getElementById('currentDateText');
            const updatedDate = document.getElementById('updatedDate');
            const quizTitle = document.getElementById('quizTitle');

            if (currentDateText) currentDateText.textContent = CURRENT_DATE_STR;
            if (updatedDate) updatedDate.textContent = CURRENT_DATE_STR;
            if (quizTitle) quizTitle.textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;
        }

        // --- Quiz Initialization ---
        function initializeQuiz() {
            quizQuestions.length = 0;
            const dateSeed = CURRENT_DATE_STR;
            
            const allQuestions = [
                // === July 18th Syllabus Quiz (100 MCQs) ===

                // General Knowledge: Books & Literature (pp. 86-87) & Organizations (pp. 88-92) - 40 Questions
                { "question": "Who wrote 'The Old Man and the Sea'?", "options": ["William Faulkner", "John Steinbeck", "Ernest Hemingway", "F. Scott Fitzgerald"], "correctOptionIndex": 2, "explanation": "'The Old Man and the Sea' is a short novel written by the American author Ernest Hemingway in 1951.", "source_page": 87 },
                { "question": "Who is the author of the Harry Potter series?", "options": ["J.R.R. Tolkien", "C.S. Lewis", "George R.R. Martin", "J.K. Rowling"], "correctOptionIndex": 3, "explanation": "The Harry Potter series of fantasy novels was written by British author J. K. Rowling.", "source_page": 86 },
                { "question": "Where is the headquarters of the United Nations (UN) located?", "options": ["Geneva", "Vienna", "The Hague", "New York"], "correctOptionIndex": 3, "explanation": "The headquarters of the United Nations is in New York City.", "source_page": 88 },
                { "question": "When was the World Health Organization (WHO) established?", "options": ["1945", "1948", "1950", "1952"], "correctOptionIndex": 1, "explanation": "The World Health Organization (WHO) was established on 7 April 1948.", "source_page": 88 },
                { "question": "Which of the following is NOT a principal organ of the United Nations?", "options": ["General Assembly", "Security Council", "International Monetary Fund", "International Court of Justice"], "correctOptionIndex": 2, "explanation": "The International Monetary Fund (IMF) is a specialized agency of the UN, but not one of its six principal organs.", "source_page": 88 },
                { "question": "Where is the headquarters of the International Court of Justice (ICJ) located?", "options": ["Geneva, Switzerland", "New York, USA", "Brussels, Belgium", "The Hague, Netherlands"], "correctOptionIndex": 3, "explanation": "The International Court of Justice, the principal judicial organ of the UN, is seated at the Peace Palace in The Hague, Netherlands.", "source_page": 88 },
                { "question": "NATO stands for:", "options": ["North Atlantic Trade Organization", "North American Treaty Organization", "North Atlantic Treaty Organization", "North Asian Treaty Organization"], "correctOptionIndex": 2, "explanation": "NATO stands for the North Atlantic Treaty Organization.", "source_page": 90 },
                { "question": "Which of these countries is a permanent member of the UN Security Council?", "options": ["Germany", "Japan", "India", "France"], "correctOptionIndex": 3, "explanation": "The five permanent members of the UN Security Council are China, France, Russia, the United Kingdom, and the United States.", "source_page": 88 },
                { "question": "Where is the headquarters of SAARC (South Asian Association for Regional Cooperation) located?", "options": ["Dhaka, Bangladesh", "New Delhi, India", "Colombo, Sri Lanka", "Kathmandu, Nepal"], "correctOptionIndex": 3, "explanation": "The secretariat of SAARC is based in Kathmandu, Nepal.", "source_page": 91 },
                { "question": "OPEC is an organization of:", "options": ["Oil Producing and Exporting Countries", "Organization of Petroleum Exporting Companies", "Organization of Petroleum Exporting Countries", "Oil and Petroleum Exporting Countries"], "correctOptionIndex": 2, "explanation": "OPEC stands for the Organization of the Petroleum Exporting Countries.", "source_page": 91 },
                { "question": "Who wrote 'The Diary of a Young Girl'?", "options": ["Virginia Woolf", "Sylvia Plath", "Anne Frank", "Simone de Beauvoir"], "correctOptionIndex": 2, "explanation": "'The Diary of a Young Girl', also known as The Diary of Anne Frank, is a book of the writings from the Dutch-language diary kept by Anne Frank while she was in hiding for two years with her family during the Nazi occupation of the Netherlands.", "source_page": 86 },
                { "question": "Who is the author of '1984'?", "options": ["Aldous Huxley", "George Orwell", "Ray Bradbury", "Philip K. Dick"], "correctOptionIndex": 1, "explanation": "'Nineteen Eighty-Four' is a dystopian novel by English novelist George Orwell.", "source_page": 87 },
                { "question": "Where is the headquarters of UNESCO located?", "options": ["London", "Rome", "Geneva", "Paris"], "correctOptionIndex": 3, "explanation": "The headquarters of the United Nations Educational, Scientific and Cultural Organization (UNESCO) is located in Paris, France.", "source_page": 89 },
                { "question": "Which organization is known as the 'World Bank'?", "options": ["IMF", "IBRD", "IDA", "IFC"], "correctOptionIndex": 1, "explanation": "The International Bank for Reconstruction and Development (IBRD) is the main institution of the World Bank Group.", "source_page": 89 },
                { "question": "Where is the headquarters of the European Union (EU) located?", "options": ["Paris, France", "Berlin, Germany", "Brussels, Belgium", "Rome, Italy"], "correctOptionIndex": 2, "explanation": "The de facto capital of the European Union is Brussels, Belgium, which hosts the official seats of the European Commission, Council of the European Union, and European Council.", "source_page": 90 },
                { "question": "Amnesty International is an organization associated with:", "options": ["Environmental Protection", "Human Rights", "Economic Development", "Animal Welfare"], "correctOptionIndex": 1, "explanation": "Amnesty International is a global non-governmental organization focused on human rights.", "source_page": 92 },
                { "question": "Who wrote 'Long Walk to Freedom'?", "options": ["Martin Luther King Jr.", "Desmond Tutu", "Nelson Mandela", "Barack Obama"], "correctOptionIndex": 2, "explanation": "'Long Walk to Freedom' is an autobiography written by South African President Nelson Mandela.", "source_page": 87 },
                { "question": "Who is the author of 'The Lord of the Rings'?", "options": ["C.S. Lewis", "J.K. Rowling", "George R.R. Martin", "J.R.R. Tolkien"], "correctOptionIndex": 3, "explanation": "'The Lord of the Rings' is an epic high-fantasy novel by the English author and scholar J. R. R. Tolkien.", "source_page": 87 },
                { "question": "The headquarters of the Food and Agriculture Organization (FAO) is in:", "options": ["Geneva", "Paris", "Rome", "New York"], "correctOptionIndex": 2, "explanation": "The headquarters of the Food and Agriculture Organization of the United Nations is located in Rome, Italy.", "source_page": 89 },
                { "question": "Which of the following is a member of the G-7?", "options": ["Russia", "China", "India", "Canada"], "correctOptionIndex": 3, "explanation": "The G7 (Group of Seven) is an intergovernmental organization consisting of Canada, France, Germany, Italy, Japan, the United Kingdom, and the United States.", "source_page": 92 },
                { "question": "Where is the headquarters of the Association of Southeast Asian Nations (ASEAN) located?", "options": ["Singapore", "Bangkok, Thailand", "Hanoi, Vietnam", "Jakarta, Indonesia"], "correctOptionIndex": 3, "explanation": "The ASEAN Secretariat is located in Jakarta, Indonesia.", "source_page": 90 },
                { "question": "The book 'Das Kapital' was written by:", "options": ["Adam Smith", "John Maynard Keynes", "Karl Marx", "David Ricardo"], "correctOptionIndex": 2, "explanation": "'Das Kapital' is a foundational theoretical text in communist philosophy by Karl Marx.", "source_page": 86 },
                { "question": "Who wrote the play 'Romeo and Juliet'?", "options": ["Christopher Marlowe", "Ben Jonson", "William Shakespeare", "John Webster"], "correctOptionIndex": 2, "explanation": "'Romeo and Juliet' is a tragedy written by William Shakespeare early in his career.", "source_page": 87 },
                { "question": "Where is the headquarters of the International Labour Organization (ILO) located?", "options": ["Paris, France", "Geneva, Switzerland", "Vienna, Austria", "New York, USA"], "correctOptionIndex": 1, "explanation": "The International Labour Organization (ILO) is a United Nations agency whose mandate is to advance social and economic justice through setting international labour standards. Its headquarters is in Geneva, Switzerland.", "source_page": 89 },
                { "question": "The term of a non-permanent member of the UN Security Council is:", "options": ["1 year", "2 years", "3 years", "5 years"], "correctOptionIndex": 1, "explanation": "The UN Security Council has 10 non-permanent members, elected by the General Assembly for two-year terms.", "source_page": 88 },
                { "question": "Where is the headquarters of the World Trade Organization (WTO) located?", "options": ["Washington D.C.", "London", "Geneva", "Paris"], "correctOptionIndex": 2, "explanation": "The headquarters of the World Trade Organization is located in Geneva, Switzerland.", "source_page": 90 },
                { "question": "The book 'The Wealth of Nations' was written by:", "options": ["John Stuart Mill", "Adam Smith", "David Ricardo", "Karl Marx"], "correctOptionIndex": 1, "explanation": "'The Wealth of Nations' is the magnum opus of the Scottish economist and moral philosopher Adam Smith.", "source_page": 87 },
                { "question": "Who is the author of 'To Kill a Mockingbird'?", "options": ["Harper Lee", "Margaret Atwood", "Toni Morrison", "Alice Walker"], "correctOptionIndex": 0, "explanation": "'To Kill a Mockingbird' is a novel by the American author Harper Lee.", "source_page": 87 },
                { "question": "The headquarters of UNICEF is in:", "options": ["Geneva", "Paris", "Rome", "New York"], "correctOptionIndex": 3, "explanation": "The headquarters of the United Nations Children's Fund (UNICEF) is in New York City.", "source_page": 89 },
                { "question": "Which of the following countries is NOT a member of SAARC?", "options": ["Bhutan", "Maldives", "Myanmar", "Nepal"], "correctOptionIndex": 2, "explanation": "The member states of SAARC are Afghanistan, Bangladesh, Bhutan, India, the Maldives, Nepal, Pakistan, and Sri Lanka. Myanmar is not a member.", "source_page": 91 },
                { "question": "Where is the headquarters of the Arab League located?", "options": ["Riyadh, Saudi Arabia", "Cairo, Egypt", "Amman, Jordan", "Damascus, Syria"], "correctOptionIndex": 1, "explanation": "The headquarters of the Arab League is located in Cairo, Egypt.", "source_page": 92 },
                { "question": "Who wrote 'The Great Gatsby'?", "options": ["Ernest Hemingway", "William Faulkner", "F. Scott Fitzgerald", "John Steinbeck"], "correctOptionIndex": 2, "explanation": "'The Great Gatsby' is a 1925 novel by American writer F. Scott Fitzgerald.", "source_page": 86 },
                { "question": "Who is the author of 'The Canterbury Tales'?", "options": ["John Milton", "Geoffrey Chaucer", "Edmund Spenser", "William Langland"], "correctOptionIndex": 1, "explanation": "'The Canterbury Tales' is a collection of 24 stories that runs to over 17,000 lines written in Middle English by Geoffrey Chaucer.", "source_page": 86 },
                { "question": "Where is the headquarters of the International Atomic Energy Agency (IAEA) located?", "options": ["Geneva, Switzerland", "Vienna, Austria", "Brussels, Belgium", "The Hague, Netherlands"], "correctOptionIndex": 1, "explanation": "The headquarters of the International Atomic Energy Agency (IAEA) is located in Vienna, Austria.", "source_page": 89 },
                { "question": "The Commonwealth of Nations is an organization of former colonies of which empire?", "options": ["French Empire", "Spanish Empire", "Portuguese Empire", "British Empire"], "correctOptionIndex": 3, "explanation": "The Commonwealth is a political association of 56 member states, the vast majority of which are former territories of the British Empire.", "source_page": 92 },

                // English: Synonyms (pp. 479-485) - 35 Questions
                { "question": "Choose the synonym for IMPEDE.", "options": ["Facilitate", "Advance", "Obstruct", "Assist"], "correctOptionIndex": 2, "explanation": "To impede means to delay or prevent (someone or something) by obstructing them; to hinder.", "source_page": 479 },
                { "question": "Choose the synonym for JUBILANT.", "options": ["Sorrowful", "Depressed", "Rejoicing", "Gloomy"], "correctOptionIndex": 2, "explanation": "Jubilant means feeling or expressing great happiness and triumph.", "source_page": 480 },
                { "question": "Choose the synonym for LETHARGY.", "options": ["Vigor", "Energy", "Sluggishness", "Alertness"], "correctOptionIndex": 2, "explanation": "Lethargy is a lack of energy and enthusiasm; sluggishness.", "source_page": 481 },
                { "question": "Choose the synonym for MITIGATE.", "options": ["Aggravate", "Worsen", "Alleviate", "Intensify"], "correctOptionIndex": 2, "explanation": "To mitigate means to make (something bad) less severe, serious, or painful; to alleviate.", "source_page": 482 },
                { "question": "Choose the synonym for NOVICE.", "options": ["Expert", "Veteran", "Beginner", "Master"], "correctOptionIndex": 2, "explanation": "A novice is a person new to or inexperienced in a field or situation; a beginner.", "source_page": 483 },
                { "question": "Choose the synonym for OBSCURE.", "options": ["Clear", "Obvious", "Uncertain", "Explicit"], "correctOptionIndex": 2, "explanation": "Obscure means not discovered or known about; uncertain.", "source_page": 484 },
                { "question": "Choose the synonym for PALPABLE.", "options": ["Intangible", "Imperceptible", "Tangible", "Unclear"], "correctOptionIndex": 2, "explanation": "Palpable means able to be touched or felt; tangible.", "source_page": 485 },
                { "question": "Choose the synonym for INGENIOUS.", "options": ["Unimaginative", "Dull", "Clever", "Clumsy"], "correctOptionIndex": 2, "explanation": "Ingenious means (of a person) clever, original, and inventive.", "source_page": 479 },
                { "question": "Choose the synonym for JADED.", "options": ["Fresh", "Enthusiastic", "Wearied", "Excited"], "correctOptionIndex": 2, "explanation": "Jaded means tired, bored, or lacking enthusiasm, typically after having had too much of something.", "source_page": 480 },
                { "question": "Choose the synonym for LACONIC.", "options": ["Verbose", "Wordy", "Concise", "Talkative"], "correctOptionIndex": 2, "explanation": "Laconic means (of a person, speech, or style of writing) using very few words; concise.", "source_page": 481 },
                { "question": "Choose the synonym for MALIGNANT.", "options": ["Benign", "Harmless", "Spiteful", "Kind"], "correctOptionIndex": 2, "explanation": "Malignant means malevolent or spiteful.", "source_page": 482 },
                { "question": "Choose the synonym for NEBULOUS.", "options": ["Clear", "Precise", "Vague", "Definite"], "correctOptionIndex": 2, "explanation": "Nebulous means in the form of a cloud or haze; hazy, unclear, or vague.", "source_page": 483 },
                { "question": "Choose the synonym for OBSTINATE.", "options": ["Compliant", "Flexible", "Stubborn", "Agreeable"], "correctOptionIndex": 2, "explanation": "Obstinate means stubbornly refusing to change one's opinion or chosen course of action, despite attempts to persuade one to do so.", "source_page": 484 },
                { "question": "Choose the synonym for PERILOUS.", "options": ["Safe", "Secure", "Hazardous", "Harmless"], "correctOptionIndex": 2, "explanation": "Perilous means full of danger or risk; hazardous.", "source_page": 485 },
                { "question": "Choose the synonym for INSIPID.", "options": ["Flavorful", "Exciting", "Dull", "Interesting"], "correctOptionIndex": 2, "explanation": "Insipid means lacking flavor; weak or tasteless. It can also mean lacking vigor or interest.", "source_page": 479 },
                { "question": "Choose the synonym for JOCUND.", "options": ["Miserable", "Gloomy", "Cheerful", "Sad"], "correctOptionIndex": 2, "explanation": "Jocund means cheerful and lighthearted.", "source_page": 480 },
                { "question": "Choose the synonym for LURID.", "options": ["Mild", "Subtle", "Sensational", "Pleasant"], "correctOptionIndex": 2, "explanation": "Lurid means presented in vividly shocking or sensational terms.", "source_page": 481 },
                { "question": "Choose the synonym for MYRIAD.", "options": ["Few", "Limited", "Countless", "Single"], "correctOptionIndex": 2, "explanation": "Myriad means a countless or extremely great number.", "source_page": 482 },
                { "question": "Choose the synonym for NEFARIOUS.", "options": ["Good", "Honorable", "Wicked", "Righteous"], "correctOptionIndex": 2, "explanation": "Nefarious means (typically of an action or activity) wicked or criminal.", "source_page": 483 },
                { "question": "Choose the synonym for ONEROUS.", "options": ["Easy", "Simple", "Burdensome", "Light"], "correctOptionIndex": 2, "explanation": "Onerous means (of a task, duty, or responsibility) involving an amount of effort and difficulty that is oppressively burdensome.", "source_page": 484 },
                { "question": "Choose the synonym for PLACID.", "options": ["Agitated", "Turbulent", "Calm", "Stormy"], "correctOptionIndex": 2, "explanation": "Placid means not easily upset or excited; calm and peaceful.", "source_page": 485 },
                { "question": "Choose the synonym for INTREPID.", "options": ["Cowardly", "Timid", "Fearless", "Afraid"], "correctOptionIndex": 2, "explanation": "Intrepid means fearless; adventurous (often used for rhetorical or humorous effect).", "source_page": 479 },
                { "question": "Choose the synonym for JETTISON.", "options": ["Keep", "Retain", "Discard", "Accept"], "correctOptionIndex": 2, "explanation": "To jettison means to abandon or discard (someone or something that is no longer wanted).", "source_page": 480 },
                { "question": "Choose the synonym for LIMPID.", "options": ["Murky", "Cloudy", "Clear", "Opaque"], "correctOptionIndex": 2, "explanation": "Limpid means (of a liquid) free of anything that darkens; completely clear and transparent.", "source_page": 481 },
                { "question": "Choose the synonym for METICULOUS.", "options": ["Careless", "Sloppy", "Thorough", "Hasty"], "correctOptionIndex": 2, "explanation": "Meticulous means showing great attention to detail; very careful and precise.", "source_page": 482 },
                { "question": "Choose the synonym for NEGLIGENT.", "options": ["Careful", "Conscientious", "Careless", "Attentive"], "correctOptionIndex": 2, "explanation": "Negligent means failing to take proper care in doing something; careless.", "source_page": 483 },
                { "question": "Choose the synonym for OPAQUE.", "options": ["Transparent", "Clear", "Cloudy", "Translucent"], "correctOptionIndex": 2, "explanation": "Opaque means not able to be seen through; not transparent. Cloudy is a good synonym.", "source_page": 484 },
                { "question": "Choose the synonym for PRECARIOUS.", "options": ["Stable", "Secure", "Uncertain", "Safe"], "correctOptionIndex": 2, "explanation": "Precarious means not securely held or in position; dangerously likely to fall or collapse; uncertain.", "source_page": 485 },
                { "question": "Choose the synonym for INVINCIBLE.", "options": ["Vulnerable", "Beatable", "Unconquerable", "Weak"], "correctOptionIndex": 2, "explanation": "Invincible means too powerful to be defeated or overcome.", "source_page": 479 },
                { "question": "Choose the synonym for JUBILEE.", "options": ["Mourning", "Sorrow", "Celebration", "Grief"], "correctOptionIndex": 2, "explanation": "A jubilee is a special anniversary of an event, especially one celebrating twenty-five or fifty years of a reign or activity; a celebration.", "source_page": 480 },
                { "question": "Choose the synonym for LUCID.", "options": ["Confusing", "Vague", "Clear", "Ambiguous"], "correctOptionIndex": 2, "explanation": "Lucid means expressed clearly; easy to understand.", "source_page": 481 },
                { "question": "Choose the synonym for MOROSE.", "options": ["Cheerful", "Happy", "Sullen", "Joyful"], "correctOptionIndex": 2, "explanation": "Morose means sullen and ill-tempered.", "source_page": 482 },
                { "question": "Choose the synonym for NIMBLE.", "options": ["Awkward", "Clumsy", "Agile", "Slow"], "correctOptionIndex": 2, "explanation": "Nimble means quick and light in movement or action; agile.", "source_page": 483 },
                { "question": "Choose the synonym for OSTENTATIOUS.", "options": ["Modest", "Plain", "Showy", "Reserved"], "correctOptionIndex": 2, "explanation": "Ostentatious means characterized by vulgar or pretentious display; designed to impress or attract notice; showy.", "source_page": 484 },
                { "question": "Choose the synonym for PRUDENT.", "options": ["Reckless", "Careless", "Wise", "Impulsive"], "correctOptionIndex": 2, "explanation": "Prudent means acting with or showing care and thought for the future; wise.", "source_page": 485 },

                // General Abilities: Probability (pp. 544-545) - 25 Questions
                { "question": "What is the probability of getting a head when a coin is tossed once?", "options": ["0", "1/2", "1", "1/4"], "correctOptionIndex": 1, "explanation": "There are two possible outcomes (Head, Tail). The number of favorable outcomes (Head) is 1. So, P(Head) = 1/2.", "source_page": 544 },
                { "question": "In a single throw of a die, what is the probability of getting a number greater than 4?", "options": ["1/6", "1/3", "1/2", "2/3"], "correctOptionIndex": 1, "explanation": "Total outcomes = {1,2,3,4,5,6}. Favorable outcomes (greater than 4) = {5,6}. Number of favorable outcomes = 2. Probability = 2/6 = 1/3.", "source_page": 544 },
                { "question": "A bag contains 6 red and 4 blue balls. What is the probability of drawing a blue ball?", "options": ["3/5", "2/5", "1/2", "1/5"], "correctOptionIndex": 1, "explanation": "Total balls = 6 + 4 = 10. Number of blue balls = 4. Probability = (Favorable outcomes) / (Total outcomes) = 4/10 = 2/5.", "source_page": 544 },
                { "question": "Two coins are tossed. What is the probability of getting at least one head?", "options": ["1/4", "1/2", "3/4", "1"], "correctOptionIndex": 2, "explanation": "Possible outcomes are {HH, HT, TH, TT}. Favorable outcomes (at least one head) are {HH, HT, TH}. Probability = 3/4.", "source_page": 545 },
                { "question": "A card is drawn from a pack of 52 cards. What is the probability of getting a king?", "options": ["1/13", "1/26", "1/52", "4/13"], "correctOptionIndex": 0, "explanation": "There are 4 kings in a pack of 52 cards. Probability = 4/52 = 1/13.", "source_page": 545 },
                { "question": "If an event is impossible, its probability is:", "options": ["1", "0", "0.5", "Undefined"], "correctOptionIndex": 1, "explanation": "The probability of an impossible event is 0.", "source_page": 544 },
                { "question": "If an event is certain to happen, its probability is:", "options": ["0", "0.5", "1", "Greater than 1"], "correctOptionIndex": 2, "explanation": "The probability of a certain event is 1.", "source_page": 544 },
                { "question": "In a throw of two dice, what is the probability of getting a sum of 9?", "options": ["1/6", "1/8", "1/9", "1/12"], "correctOptionIndex": 2, "explanation": "Total outcomes = 36. Favorable outcomes for a sum of 9 are {(3,6), (4,5), (5,4), (6,3)}. Number of favorable outcomes = 4. Probability = 4/36 = 1/9.", "source_page": 545 },
                { "question": "A box contains 5 green, 4 yellow and 3 white balls. One ball is drawn at random. What is the probability that it is not green?", "options": ["5/12", "7/12", "1/2", "3/4"], "correctOptionIndex": 1, "explanation": "Total balls = 5+4+3=12. Number of balls that are not green = 4+3=7. Probability = 7/12.", "source_page": 544 },
                { "question": "From a pack of 52 cards, one card is drawn at random. What is the probability that it is an ace or a king?", "options": ["1/13", "2/13", "3/13", "4/13"], "correctOptionIndex": 1, "explanation": "There are 4 aces and 4 kings. Total favorable outcomes = 4+4=8. Probability = 8/52 = 2/13.", "source_page": 545 },
                { "question": "The probability of an event is P(E). The probability of the event not happening is:", "options": ["1 + P(E)", "1 - P(E)", "P(E) - 1", "1 / P(E)"], "correctOptionIndex": 1, "explanation": "The sum of the probabilities of an event happening and not happening is always 1. So, P(not E) = 1 - P(E).", "source_page": 544 },
                { "question": "What is the probability of getting an even number when a die is thrown?", "options": ["1/6", "1/3", "1/2", "2/3"], "correctOptionIndex": 2, "explanation": "Total outcomes = 6. Favorable outcomes (even numbers) = {2, 4, 6}. Number of favorable outcomes = 3. Probability = 3/6 = 1/2.", "source_page": 544 },
                { "question": "Two dice are thrown simultaneously. What is the probability of getting a doublet (same number on both dice)?", "options": ["1/6", "1/36", "1/12", "1/18"], "correctOptionIndex": 0, "explanation": "Total outcomes = 36. Favorable outcomes (doublets) = {(1,1), (2,2), (3,3), (4,4), (5,5), (6,6)}. Number of favorable outcomes = 6. Probability = 6/36 = 1/6.", "source_page": 545 },
                { "question": "A bag contains 3 red, 5 yellow and 4 green balls. If one ball is drawn at random, what is the probability that it is either red or green?", "options": ["1/4", "1/3", "5/12", "7/12"], "correctOptionIndex": 3, "explanation": "Total balls = 3+5+4=12. Favorable outcomes (red or green) = 3+4=7. Probability = 7/12.", "source_page": 544 },
                { "question": "A card is drawn from a pack of 52 cards. Find the probability that the card drawn is a spade.", "options": ["1/2", "1/3", "1/4", "1/13"], "correctOptionIndex": 2, "explanation": "There are 13 spade cards in a pack of 52. Probability = 13/52 = 1/4.", "source_page": 545 }
            ];
            
            shuffleArrayWithSeed(allQuestions, dateSeed);
            quizQuestions = allQuestions.slice(0, TOTAL_QUESTIONS);

            if (quizQuestions.length > 0) {
                let rng = new Math.seedrandom(dateSeed + '-special');
                specialQuestionIndex = Math.floor(rng() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    const loginIdInput = document.getElementById('loginId');
                    const loginPasswordInput = document.getElementById('loginPassword');
                    const loginError = document.getElementById('loginError');

                    const id = loginIdInput ? loginIdInput.value : '';
                    const password = loginPasswordInput ? loginPasswordInput.value : '';
                    
                    // Admin login is handled in admin.html, this is for student login
                    if (id === 'syedasgharalishah' && password === 'admin') {
                        // You might want to remove this alert or redirect to admin.html
                        alert('Admin login is not handled in this file. Please use the admin panel file.');
                        return;
                    }
                    if (id.toUpperCase() === '18JULY' && password === 'free') {
                        if (loginError) loginError.classList.add('hidden');
                        showPage('candidateNamePage');
                    } else {
                        if (loginError) loginError.classList.remove('hidden');
                    }
                });
            }

            const startQuizBtn = document.getElementById('startQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    const candidateNameInput = document.getElementById('candidateName');
                    const nameError = document.getElementById('nameError');
                    const candidateName = candidateNameInput ? candidateNameInput.value.trim() : '';
                    
                    if (candidateName) {
                        if (nameError) nameError.classList.add('hidden');
                        userAnswers = new Array(quizQuestions.length).fill(null);
                        currentQuestionIndex = 0;
                        quizSubmitted = false;
                        startTimer();
                        renderQuestion();
                        showPage('quizPage');
                    } else {
                        if (nameError) nameError.classList.remove('hidden');
                    }
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.addEventListener('click', prevQuestion);
            
            const submitQuizBtn = document.getElementById('submitQuizBtn');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => submitQuiz(false));
            
            const restartQuizBtn = document.getElementById('restartQuizBtn');
            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    clearInterval(timerInterval);
                    initializeQuiz();
                    showPage('loginPage');
                });
            }
            
            // Initial setup calls
            initializeQuiz();
            updateLiveDate();
            showPage('loginPage'); // <--- ADDED THIS LINE to show the login page initially

            // Handle initial loginId display
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) {
                const dateParts = CURRENT_DATE_STR.split(' ');
                const monthName = dateParts[0].toUpperCase();
                const day = parseInt(dateParts[1].replace(',', ''));
                loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`; // e.g., 17JUL
            }

            // Ensure next button is hidden initially if it exists
            const initialNextBtn = document.getElementById('nextBtn');
            if(initialNextBtn) initialNextBtn.classList.add('hidden');
        });
    </script>
</body>
</html>
