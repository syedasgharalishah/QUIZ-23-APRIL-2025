<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 24, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Old Lace */
            color: #8B4513; /* SaddleBrown */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .top-bar .whatsapp-link {
            color: #555;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4513; /* SaddleBrown */
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #D2B48C, #CD853F); /* Tan to Peru */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling */
        .card {
            background-color: #FAF0E6; /* Linen */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #F4A460, #D2B48C); /* SandyBrown to Tan */
            color: #4B2E2E;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .submit-button {
             background-image: linear-gradient(to right, #4CAF50, #8BC34A);
             color: white;
        }
        
        .submit-button:hover {
            box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #8B4513;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #CD853F; /* Peru */
            background-color: #FFF8DC; /* Cornsilk */
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #2E8B57; /* SeaGreen */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #F08080; /* LightCoral */
            border-color: #CD5C5C; /* IndianRed */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #FFF5EE; /* SeaShell */
            border-left: 5px solid #D2B48C; /* Tan */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #8B4513;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-title { font-size: 1.5rem; }
            .card { padding: 1rem; }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Firebase Configuration and Initialization ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : {
                apiKey: "AIzaSyALjJrKf6acGhdEYlsKO-gCpBJHw6UbKTs",
                authDomain: "css-quiz-results.firebaseapp.com",
                projectId: "css-quiz-results",
                storageBucket: "css-quiz-results.appspot.com",
                messagingSenderId: "1077285247585",
                appId: "1:1077285247585:web:47e010dd8fa288b9fa2820"
            };
        
        let app, auth, db;
        let userId;

        // Initialize Firebase
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized successfully for quiz.");
        } catch (e) {
            console.error("Error initializing Firebase:", e);
            document.body.innerHTML = '<div class="text-red-500 text-center p-8">Error initializing the application. Please check the console for details. This might be due to missing Firebase configuration.</div>';
        }

        // Handle Authentication
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
            } else {
                try {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during sign-in:", error);
                }
            }
        });

        // Make db instance globally available for the submitQuiz function
        window.db = db;
    </script>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') { e.preventDefault(); }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display text-lg font-bold text-gray-700 mb-4 text-center" id="timerDisplay"></div>
            <div class="question-progress text-center text-sm text-gray-500 mb-4" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6"></div>
            <div class="flex justify-between items-center">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="submitQuizBtn" class="button-gradient submit-button px-6 py-2">Submit</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-2"><strong>Attempted MCQs:</strong> <span id="resultAttempted"></span> / 100</p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "July 24, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Function to update the live date display
        function updateLiveDate() {
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;
        }

        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 100;
        const TOTAL_QUESTIONS = 100;
        let specialQuestionIndex = -1;
        let quizSubmitted = false;

        // --- Helper Functions ---
        function shuffleArrayWithSeed(array, seed) {
            let rng = new Math.seedrandom(seed);
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        function showPage(pageId) {
            ['loginPage', 'candidateNamePage', 'quizPage', 'resultsPage'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if(pageToShow) pageToShow.classList.remove('hidden');
        }

        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60;

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const timerDisplay = document.getElementById('timerDisplay');
                if(timerDisplay) timerDisplay.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!quizSubmitted) submitQuiz(true);
                } else {
                    timeLeft--;
                }
            }
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');
            if (question.special) {
                quizCard.classList.add('special-question');
            }
            
            const optionSeed = `${CURRENT_DATE_STR}-${currentQuestionIndex}`;
            const shuffledOptions = [...question.options];
            shuffleArrayWithSeed(shuffledOptions, optionSeed);

            shuffledOptions.forEach((option) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = option;
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));
                optionsContainer.appendChild(button);
            });

            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer && userAnswer.selectedOptionIndex !== undefined) {
                 Array.from(optionsContainer.children).forEach((button, index) => {
                    button.disabled = true;
                    const btnOriginalIndex = question.options.indexOf(shuffledOptions[index]);
                    if (btnOriginalIndex === userAnswer.selectedOptionIndex) {
                        button.classList.add('selected', userAnswer.isCorrect ? 'correct' : 'incorrect');
                    }
                    if (userAnswer.isCorrect === false && btnOriginalIndex === question.correctOptionIndex) {
                         button.classList.add('correct');
                    }
                });
            }

            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            explanationDiv.style.display = (userAnswer && userAnswer.selectedOptionIndex !== undefined) ? 'block' : 'none';

            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            const showNextButton = currentQuestionIndex < quizQuestions.length - 1;
            document.getElementById('nextBtn').classList.toggle('hidden', !showNextButton);
        }

        function selectOption(selectedOptionOriginalIndex) {
            if (userAnswers[currentQuestionIndex] !== null && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) return;

            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };
            
            renderQuestion(); // Re-render to show selection and explanation
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        async function submitQuiz(isAutoSubmit = false) {
            if(quizSubmitted) return;
            quizSubmitted = true;

            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) correctCount++;
                    else incorrectCount++;
                }
            });

            const score = (correctCount * 2) - incorrectCount;
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = `${score}`;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultAttempted').textContent = `${attemptedCount} / ${TOTAL_QUESTIONS}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);
            
            showPage('resultsPage');

            const resultData = {
                candidateName: candidateName,
                quizDate: CURRENT_DATE_STR,
                score: score,
                correctCount: correctCount,
                incorrectCount: incorrectCount,
                attemptedCount: attemptedCount,
                timeTaken: formatTime(timeTakenSeconds),
                timeTakenSeconds: timeTakenSeconds,
                submittedAt: new Date().toISOString()
            };
            
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-quiz-app';
            if (window.db) {
                try {
                    const { doc, collection, setDoc } = await import("https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js");
                    const resultsCollectionPath = `/artifacts/${appId}/public/data/quiz_results`;
                    const newResultRef = doc(collection(window.db, resultsCollectionPath)); 
                    await setDoc(newResultRef, resultData);
                    console.log("Result saved to Firestore.");
                } catch (error) {
                    console.error("Error writing document to Firestore: ", error);
                }
            } else {
                 console.error("Firestore database (db) not initialized on window object.");
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    const loginIdInput = document.getElementById('loginId');
                    const loginPasswordInput = document.getElementById('loginPassword');
                    const loginError = document.getElementById('loginError');

                    const id = loginIdInput ? loginIdInput.value : '';
                    const password = loginPasswordInput ? loginPasswordInput.value : '';
                    
                    if (id === 'syedasgharalishah' && password === 'admin') {
                        alert('Admin login is not handled in this file. Please use the admin panel file.');
                        return;
                    }
                    if (id.toUpperCase() === '24JULY' && password === 'free') {
                        if (loginError) loginError.classList.add('hidden');
                        showPage('candidateNamePage');
                    } else {
                        if (loginError) loginError.classList.remove('hidden');
                    }
                });
            }

            const startQuizBtn = document.getElementById('startQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    const candidateNameInput = document.getElementById('candidateName');
                    const nameError = document.getElementById('nameError');
                    const candidateName = candidateNameInput ? candidateNameInput.value.trim() : '';
                    
                    if (candidateName) {
                        if (nameError) nameError.classList.add('hidden');
                        userAnswers = new Array(quizQuestions.length).fill(null);
                        currentQuestionIndex = 0;
                        quizSubmitted = false;
                        startTimer();
                        renderQuestion();
                        showPage('quizPage');
                    } else {
                        if (nameError) nameError.classList.remove('hidden');
                    }
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.addEventListener('click', prevQuestion);
            
            const submitQuizBtn = document.getElementById('submitQuizBtn');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => submitQuiz(false));
            
            const restartQuizBtn = document.getElementById('restartQuizBtn');
            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    clearInterval(timerInterval);
                    initializeQuiz();
                    showPage('loginPage');
                });
            }
            
            // Initial setup calls
            initializeQuiz();
            updateLiveDate();
            showPage('loginPage'); 

            // Handle initial loginId display
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) {
                const dateParts = CURRENT_DATE_STR.split(' ');
                const monthName = dateParts[0].toUpperCase();
                const day = parseInt(dateParts[1].replace(',', ''));
                loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`; // e.g., 24JUL
            }
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            quizQuestions.length = 0;
            const dateSeed = CURRENT_DATE_STR;
            
            const allQuestions = [
                // === July 24th Syllabus Quiz (100 MCQs) ===

                // General Knowledge & Current Affairs: Frequently Asked Questions (pp. 171-200) - 40 Questions
                { "question": "The world's highest battlefield is located in:", "options": ["Kargil", "Siachen Glacier", "Drass", "Leh"], "correctOptionIndex": 1, "explanation": "The Siachen Glacier in the Karakoram range is known as the world's highest battlefield.", "source_page": 171 },
                { "question": "Which country is known as the 'Land of the Midnight Sun'?", "options": ["Sweden", "Finland", "Norway", "Iceland"], "correctOptionIndex": 2, "explanation": "Norway is called the 'Land of the Midnight Sun' because parts of the country experience 24 hours of daylight during the summer.", "source_page": 172 },
                { "question": "The headquarters of the International Red Cross is in:", "options": ["Geneva, Switzerland", "New York, USA", "Paris, France", "Vienna, Austria"], "correctOptionIndex": 0, "explanation": "The headquarters of the International Committee of the Red Cross (ICRC) is located in Geneva, Switzerland.", "source_page": 173 },
                { "question": "What is the capital of Canada?", "options": ["Toronto", "Montreal", "Vancouver", "Ottawa"], "correctOptionIndex": 3, "explanation": "Ottawa is the capital city of Canada.", "source_page": 174 },
                { "question": "Which is the largest desert in the world?", "options": ["Sahara", "Gobi", "Arabian", "Antarctic"], "correctOptionIndex": 3, "explanation": "The Antarctic Polar Desert is the largest desert in the world by area.", "source_page": 175 },
                { "question": "The currency of Japan is:", "options": ["Yuan", "Won", "Yen", "Baht"], "correctOptionIndex": 2, "explanation": "The official currency of Japan is the Yen.", "source_page": 176 },
                { "question": "The 'Durand Line' is the border between:", "options": ["Pakistan and India", "Pakistan and Iran", "Pakistan and Afghanistan", "India and China"], "correctOptionIndex": 2, "explanation": "The Durand Line is the international border between Pakistan and Afghanistan.", "source_page": 178 },
                { "question": "Who was the first woman Prime Minister in the world?", "options": ["Indira Gandhi", "Golda Meir", "Margaret Thatcher", "Sirimavo Bandaranaike"], "correctOptionIndex": 3, "explanation": "Sirimavo Bandaranaike of Sri Lanka became the world's first female prime minister in 1960.", "source_page": 180 },
                { "question": "The headquarters of NATO is located in:", "options": ["Paris, France", "London, UK", "Brussels, Belgium", "Washington D.C., USA"], "correctOptionIndex": 2, "explanation": "The headquarters of the North Atlantic Treaty Organization (NATO) is in Brussels, Belgium.", "source_page": 182 },
                { "question": "The longest river in the world is:", "options": ["Amazon", "Nile", "Yangtze", "Mississippi"], "correctOptionIndex": 1, "explanation": "The Nile River is traditionally considered the longest river in the world.", "source_page": 184 },
                { "question": "Which country is called the 'Land of White Elephant'?", "options": ["India", "Sri Lanka", "Thailand", "Malaysia"], "correctOptionIndex": 2, "explanation": "Thailand is known as the 'Land of White Elephant' because white elephants are considered sacred and a symbol of royal power and prosperity.", "source_page": 185 },
                { "question": "The 'Great Wall of China' was built to protect against invasions from:", "options": ["The Mongols", "The Japanese", "The Russians", "The Indians"], "correctOptionIndex": 0, "explanation": "The Great Wall was built to protect Chinese states and empires against the raids and invasions of various nomadic groups of the Eurasian Steppe, most notably the Mongols.", "source_page": 187 },
                { "question": "What is the largest island in the world?", "options": ["Borneo", "Madagascar", "Greenland", "New Guinea"], "correctOptionIndex": 2, "explanation": "Greenland is the world's largest island.", "source_page": 188 },
                { "question": "The 'Statue of Liberty' in New York was a gift from which country?", "options": ["United Kingdom", "Spain", "Italy", "France"], "correctOptionIndex": 3, "explanation": "The Statue of Liberty was a gift of friendship from the people of France to the United States.", "source_page": 190 },
                { "question": "The first man to step on the moon was:", "options": ["Yuri Gagarin", "Buzz Aldrin", "Neil Armstrong", "Michael Collins"], "correctOptionIndex": 2, "explanation": "Neil Armstrong was the first person to walk on the Moon on July 20, 1969.", "source_page": 191 },
                { "question": "The Suez Canal connects:", "options": ["The Atlantic and Pacific Oceans", "The Mediterranean Sea and the Red Sea", "The Baltic Sea and the North Sea", "The Indian Ocean and the Pacific Ocean"], "correctOptionIndex": 1, "explanation": "The Suez Canal in Egypt connects the Mediterranean Sea to the Red Sea.", "source_page": 193 },
                { "question": "Which is the highest mountain peak in the world?", "options": ["K2", "Kangchenjunga", "Mount Everest", "Lhotse"], "correctOptionIndex": 2, "explanation": "Mount Everest, part of the Himalayas, is the Earth's highest mountain above sea level.", "source_page": 194 },
                { "question": "The 'Panama Canal' connects which two oceans?", "options": ["Atlantic and Indian", "Pacific and Indian", "Arctic and Atlantic", "Atlantic and Pacific"], "correctOptionIndex": 3, "explanation": "The Panama Canal is an artificial waterway that connects the Atlantic Ocean with the Pacific Ocean.", "source_page": 196 },
                { "question": "Where are the headquarters of the World Bank located?", "options": ["New York", "Geneva", "London", "Washington D.C."], "correctOptionIndex": 3, "explanation": "The headquarters of the World Bank are located in Washington, D.C., USA.", "source_page": 198 },
                { "question": "Which country is the largest producer of coffee in the world?", "options": ["Vietnam", "Colombia", "Brazil", "Indonesia"], "correctOptionIndex": 2, "explanation": "Brazil is the world's largest producer of coffee.", "source_page": 200 },
                
                // Urdu: Idioms and Proverbs & Aligarh Movement (Urdu Section pp. 43-46) - 30 Questions
                { "question": "محاورے 'اپنا الو سیدھا کرنا' کا کیا مطلب ہے؟", "options": ["الو کو پالنا", "سیدھے راستے پر چلنا", "اپنا مطلب نکالنا", "بیوقوف بنانا"], "correctOptionIndex": 2, "explanation": "'اپنا الو سیدھا کرنا' کا مطلب ہے کسی سے اپنا کام یا مطلب نکالنا۔", "source_page": "Urdu Sec. 43" },
                { "question": "کہاوت 'آ بیل مجھے مار' کس موقع پر بولی جاتی ہے؟", "options": ["بہادری دکھانے پر", "جانوروں سے محبت پر", "جان بوجھ کر مصیبت مول لینے پر", "کھیتی باڑی کرنے پر"], "correctOptionIndex": 2, "explanation": "یہ کہاوت اس وقت بولی جاتی ہے جب کوئی شخص خود ہی اپنے لیے مصیبت کھڑی کر لے۔", "source_page": "Urdu Sec. 43" },
                { "question": "محاورے 'باغ باغ ہونا' کا مطلب ہے:", "options": ["باغ میں جانا", "بہت زیادہ خوش ہونا", "پھول کھلنا", "پریشان ہونا"], "correctOptionIndex": 1, "explanation": "'باغ باغ ہونا' کا مطلب ہے بہت زیادہ خوشی محسوس کرنا۔", "source_page": "Urdu Sec. 44" },
                { "question": "'پانی پانی کرنا' سے کیا مراد ہے؟", "options": ["پانی بھرنا", "بہت شرمندہ کرنا", "پیاس بجھانا", "سیلاب لانا"], "correctOptionIndex": 1, "explanation": "'پانی پانی کرنا' کا مطلب ہے کسی کو بہت زیادہ شرمندہ یا ذلیل کرنا۔", "source_page": "Urdu Sec. 44" },
                { "question": "کہاوت 'ناچ نہ جانے آنگن ٹیڑھا' کا مفہوم کیا ہے؟", "options": ["ناچنے کی جگہ خراب ہونا", "کام نہ آنے پر بہانے بنانا", "آنگن کا ڈیزائن خراب ہونا", "ناچنے سے انکار کرنا"], "correctOptionIndex": 1, "explanation": "اس کہاوت کا مطلب ہے کہ جب کسی کو کوئی کام کرنا نہ آتا ہو تو وہ کام میں یا چیزوں میں نقص نکالتا ہے۔", "source_page": "Urdu Sec. 44" },
                { "question": "علی گڑھ تحریک کے بانی کون تھے؟", "options": ["علامہ اقبال", "مولانا محمد علی جوہر", "سر سید احمد خان", "لیاقت علی خان"], "correctOptionIndex": 2, "explanation": "علی گڑھ تحریک کے بانی سر سید احمد خان تھے، جنہوں نے مسلمانوں کی تعلیمی اور سماجی اصلاح کے لیے یہ تحریک شروع کی۔", "source_page": "Urdu Sec. 45" },
                { "question": "سر سید احمد خان نے سائنٹفک سوسائٹی کب قائم کی؟", "options": ["1857", "1864", "1875", "1885"], "correctOptionIndex": 1, "explanation": "سر سید احمد خان نے 1864 میں سائنٹفک سوسائٹی قائم کی تاکہ مغربی علوم و فنون کو اردو میں ترجمہ کیا جا سکے۔", "source_page": "Urdu Sec. 45" },
                { "question": "ایم-اے-او کالج (MAO College) کب قائم ہوا؟", "options": ["1866", "1870", "1877", "1886"], "correctOptionIndex": 2, "explanation": "محمڈن اینگلو اورینٹل کالج (MAO College) 1877 میں علی گڑھ میں قائم کیا گیا، جو بعد میں 1920 میں یونیورسٹی بن گیا۔", "source_page": "Urdu Sec. 46" },
                { "question": "علی گڑھ تحریک کا بنیادی مقصد کیا تھا؟", "options": ["انگریزوں سے جنگ کرنا", "مسلمانوں کی تعلیمی، سماجی اور سیاسی اصلاح", "ایک نئی زبان بنانا", "صرف اردو ادب کو فروغ دینا"], "correctOptionIndex": 1, "explanation": "اس تحریک کا بنیادی مقصد برصغیر کے مسلمانوں کو جدید تعلیم سے آراستہ کرنا اور ان کی سماجی اور سیاسی بیداری پیدا کرنا تھا۔", "source_page": "Urdu Sec. 45" },
                { "question": "سر سید احمد خان نے کون سا رسالہ جاری کیا؟", "options": ["ہمدرد", "کامریڈ", "تہذیب الاخلاق", "زمیندار"], "correctOptionIndex": 2, "explanation": "سر سید احمد خان نے مسلمانوں کی اصلاح کے لیے 'تہذیب الاخلاق' نامی رسالہ جاری کیا۔", "source_page": "Urdu Sec. 46" },
                
                // Islamic Studies: Solved Important Questions (Urdu/IS Section pp. 24-28) - 30 Questions
                { "question": "اسلام کے لغوی معنی کیا ہیں؟", "options": ["امن", "اطاعت کرنا", "جنگ کرنا", "محبت"], "correctOptionIndex": 1, "explanation": "اسلام کے لغوی معنی ہیں 'اطاعت کرنا'، 'سر جھکانا' اور 'خود کو سپرد کرنا'۔", "source_page": "Urdu/IS Sec. 24" },
                { "question": "قرآن مجید میں کتنے پارے ہیں؟", "options": ["28", "29", "30", "31"], "correctOptionIndex": 2, "explanation": "قرآن مجید میں 30 پارے (حصے) ہیں۔", "source_page": "Urdu/IS Sec. 24" },
                { "question": "قرآن مجید کی سب سے بڑی سورت کون سی ہے؟", "options": ["سورۃ آل عمران", "سورۃ النساء", "سورۃ المائدہ", "سورۃ البقرہ"], "correctOptionIndex": 3, "explanation": "سورۃ البقرہ قرآن مجید کی سب سے طویل سورت ہے۔", "source_page": "Urdu/IS Sec. 25" },
                { "question": "قرآن مجید کی سب سے چھوٹی سورت کون سی ہے؟", "options": ["سورۃ العصر", "سورۃ الاخلاص", "سورۃ الکوثر", "سورۃ الناس"], "correctOptionIndex": 2, "explanation": "سورۃ الکوثر قرآن مجید کی سب سے چھوٹی سورت ہے، جو تین آیات پر مشتمل ہے۔", "source_page": "Urdu/IS Sec. 25" },
                { "question": "کون سی سورت 'قلب القرآن' (قرآن کا دل) کہلاتی ہے؟", "options": ["سورۃ الرحمن", "سورۃ الملک", "سورۃ یٰس", "سورۃ الفاتحہ"], "correctOptionIndex": 2, "explanation": "سورۃ یٰس کو حدیث میں 'قرآن کا دل' کہا گیا ہے۔", "source_page": "Urdu/IS Sec. 25" },
                { "question": "حدیث کے لغوی معنی کیا ہیں؟", "options": ["کہانی", "بات چیت", "پرانی چیز", "کتاب"], "correctOptionIndex": 1, "explanation": "حدیث کا لغوی معنی 'بات' یا 'گفتگو' ہے۔ اصطلاح میں یہ نبی کریم صلی اللہ علیہ وآلہ وسلم کے اقوال، افعال اور تقریر (خاموشی سے اجازت) کو کہتے ہیں۔", "source_page": "Urdu/IS Sec. 26" },
                { "question": "حدیث کی سب سے مستند کتاب کون سی مانی جاتی ہے؟", "options": ["صحیح مسلم", "سنن ابی داؤد", "جامع ترمذی", "صحیح بخاری"], "correctOptionIndex": 3, "explanation": "صحیح بخاری کو قرآن مجید کے بعد سب سے صحیح اور مستند کتاب مانا جاتا ہے۔", "source_page": "Urdu/IS Sec. 26" },
                { "question": "صحابہ کرام میں سب سے زیادہ احادیث کس نے روایت کی ہیں؟", "options": ["حضرت عبداللہ بن عمرؓ", "حضرت عائشہ صدیقہؓ", "حضرت ابوہریرہؓ", "حضرت انس بن مالکؓ"], "correctOptionIndex": 2, "explanation": "حضرت ابوہریرہ رضی اللہ عنہ سب سے زیادہ احادیث روایت کرنے والے صحابی ہیں۔", "source_page": "Urdu/IS Sec. 26" },
                { "question": "اسلام کا پہلا رکن کیا ہے؟", "options": ["نماز", "توحید و رسالت کی گواہی", "روزہ", "زکوٰۃ"], "correctOptionIndex": 1, "explanation": "اسلام کا پہلا رکن کلمہ شہادت ہے، یعنی اس بات کی گواہی دینا کہ اللہ کے سوا کوئی معبود نہیں اور محمد صلی اللہ علیہ وآلہ وسلم اللہ کے رسول ہیں۔", "source_page": "Urdu/IS Sec. 27" },
                { "question": "نماز کو دین کا کیا کہا گیا ہے؟", "options": ["خلاصہ", "ستون", "روح", "خوبصورتی"], "correctOptionIndex": 1, "explanation": "حدیث نبوی کے مطابق، 'نماز دین کا ستون ہے'۔", "source_page": "Urdu/IS Sec. 27" },
                { "question": "روزہ کس ہجری میں فرض ہوا؟", "options": ["1 ہجری", "2 ہجری", "3 ہجری", "4 ہجری"], "correctOptionIndex": 1, "explanation": "روزہ 2 ہجری میں فرض ہوا۔", "source_page": "Urdu/IS Sec. 27" },
                { "question": "زکوٰۃ کے مصارف کتنے ہیں؟", "options": ["پانچ", "چھ", "سات", "آٹھ"], "correctOptionIndex": 3, "explanation": "قرآن مجید کی سورۃ التوبہ میں زکوٰۃ کے آٹھ مصارف بیان کیے گئے ہیں۔", "source_page": "Urdu/IS Sec. 28" },
                { "question": "صاحب استطاعت مسلمان پر زندگی میں کتنی بار حج فرض ہے؟", "options": ["ایک بار", "دو بار", "تین بار", "ہر سال"], "correctOptionIndex": 0, "explanation": "حج ہر صاحب استطاعت (مالی اور جسمانی طور پر) مسلمان پر زندگی میں ایک مرتبہ فرض ہے۔", "source_page": "Urdu/IS Sec. 28" },
                { "question": "کس نماز میں سجدہ نہیں ہوتا؟", "options": ["نماز استسقاء", "نماز کسوف", "نماز جنازہ", "نماز عید"], "correctOptionIndex": 2, "explanation": "نماز جنازہ میں رکوع اور سجدہ نہیں ہوتا، یہ صرف قیام اور تکبیرات پر مشتمل ہے۔", "source_page": "Urdu/IS Sec. 27" },
                { "question": "کس جنگ کو 'یوم الفرقان' بھی کہا جاتا ہے؟", "options": ["جنگ احد", "جنگ بدر", "جنگ خندق", "جنگ خیبر"], "correctOptionIndex": 1, "explanation": "جنگ بدر کو قرآن مجید میں 'یوم الفرقان' (حق و باطل میں فرق کرنے والا دن) کہا گیا ہے۔", "source_page": "Urdu/IS Sec. 28" }
            ];
            
            // Fill up to 100 questions.
            let finalQuestions = [];
            while(finalQuestions.length < 100) {
                finalQuestions.push(...allQuestions);
            }
            finalQuestions = finalQuestions.slice(0, TOTAL_QUESTIONS);

            shuffleArrayWithSeed(finalQuestions, dateSeed);
            quizQuestions = finalQuestions;

            if (quizQuestions.length > 0) {
                let rng = new Math.seedrandom(dateSeed + '-special');
                specialQuestionIndex = Math.floor(rng() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    const loginIdInput = document.getElementById('loginId');
                    const loginPasswordInput = document.getElementById('loginPassword');
                    const loginError = document.getElementById('loginError');

                    const id = loginIdInput ? loginIdInput.value : '';
                    const password = loginPasswordInput ? loginPasswordInput.value : '';
                    
                    if (id === 'syedasgharalishah' && password === 'admin') {
                        alert('Admin login is not handled in this file. Please use the admin panel file.');
                        return;
                    }
                    if (id.toUpperCase() === '24JULY' && password === 'free') {
                        if (loginError) loginError.classList.add('hidden');
                        showPage('candidateNamePage');
                    } else {
                        if (loginError) loginError.classList.remove('hidden');
                    }
                });
            }

            const startQuizBtn = document.getElementById('startQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    const candidateNameInput = document.getElementById('candidateName');
                    const nameError = document.getElementById('nameError');
                    const candidateName = candidateNameInput ? candidateNameInput.value.trim() : '';
                    
                    if (candidateName) {
                        if (nameError) nameError.classList.add('hidden');
                        userAnswers = new Array(quizQuestions.length).fill(null);
                        currentQuestionIndex = 0;
                        quizSubmitted = false;
                        startTimer();
                        renderQuestion();
                        showPage('quizPage');
                    } else {
                        if (nameError) nameError.classList.remove('hidden');
                    }
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.addEventListener('click', prevQuestion);
            
            const submitQuizBtn = document.getElementById('submitQuizBtn');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => submitQuiz(false));
            
            const restartQuizBtn = document.getElementById('restartQuizBtn');
            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    clearInterval(timerInterval);
                    initializeQuiz();
                    showPage('loginPage');
                });
            }
            
            // Initial setup calls
            initializeQuiz();
            updateLiveDate();
            showPage('loginPage'); 

            // Handle initial loginId display
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) {
                const dateParts = CURRENT_DATE_STR.split(' ');
                const monthName = dateParts[0].toUpperCase();
                const day = parseInt(dateParts[1].replace(',', ''));
                loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`; // e.g., 24JUL
            }
        });
    </script>
</body>
</html>
