<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - June 27, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex; /* Added for icon */
            align-items: center; /* Added for icon */
            gap: 0.5rem; /* Added for icon */
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling (Login, Candidate, Quiz, Results Pages) */
        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02); /* Enlarge by 5% on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Timer and Question Progress Display */
        .timer-display, .question-progress {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                align-items: flex-start;
            }
            .top-bar .date-display {
                order: 1;
                font-size: 0.8rem;
                align-self: flex-start;
            }
            .top-bar .whatsapp-link {
                order: 2;
                font-size: 0.8rem;
                align-self: flex-end;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') {
                e.preventDefault();
            }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 100</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "June 27, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Function to update the live date display and handle responsive positioning
        function updateLiveDate() {
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;

            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        }


        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 25; // Quiz duration set to 25 minutes
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "20 minutes 30 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date();
            const todayNormalized = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const currentQuizDateNormalized = new Date(CURRENT_DATE.getFullYear(), CURRENT_DATE.getMonth(), CURRENT_DATE.getDate());

            if (question.special && todayNormalized.getTime() === currentQuizDateNormalized.getTime()) {
                quizCard.classList.add('special-question');
            }

            // Shuffle options for the current question
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);


            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                // Store the original index of the option, not its shuffled position
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === parseInt(button.dataset.originalOptionIndex)) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionOriginalIndex - The original index of the selected option.
         */
        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            // If already answered, do nothing
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback and disable options
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('option-button:hover:not(.selected)'); // Remove hover effect

                const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);

                if (btnOriginalIndex === selectedOptionOriginalIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
                // Highlight the correct answer if the selected answer was incorrect
                if (!isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                    button.classList.add('correct'); // Highlight correct answer
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            // Score calculation: 2 marks for correct, -1 for incorrect. 100 questions total, so max score 200.
            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            // Login credentials for June 27 quiz: ID is 27JUNE, password is 'free'
            const expectedLoginId = "27JUNE";
            const expectedPassword = "free";

            if (id === expectedLoginId && password === expectedPassword) {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Seed the random number generator based on the date for consistent daily quizzes
            const dateSeed = parseInt(CURRENT_DATE_STR.replace(/[^0-9]/g, '')); // e.g., 20250627
            Math.seedrandom(dateSeed);

            // June 27, 2025:
            // General Knowledge: What and Where (Pages 13-19)
            // English: Correct/Incorrect With Solved Exercise (Pages 423-427)
            // Psychological Tests: Analogies (Pages 503-510)

            const generalKnowledgeMCQs = [
                // What and Where: Pages 13-19 (34 questions)
                { question: "Where is the 'Statue of Liberty' located?", options: ["Washington D.C.", "New York City", "Boston", "Philadelphia"], correctOptionIndex: 1, explanation: "The Statue of Liberty is located on Liberty Island in New York Harbor.", difficulty: "easy", source_page: 13 },
                { question: "The famous 'Eiffel Tower' is in which city?", options: ["London", "Rome", "Paris", "Berlin"], correctOptionIndex: 2, explanation: "The Eiffel Tower is a famous landmark in Paris, France.", difficulty: "easy", source_page: 14 },
                { question: "Which city is known as the 'Eternal City'?", options: ["Athens", "Rome", "Jerusalem", "Istanbul"], correctOptionIndex: 1, explanation: "Rome is often called the 'Eternal City' due to its long history.", difficulty: "medium", source_page: 15 },
                { question: "The 'Leaning Tower of Pisa' is located in:", options: ["Venice, Italy", "Florence, Italy", "Pisa, Italy", "Naples, Italy"], correctOptionIndex: 2, explanation: "The Leaning Tower is the campanile, or bell tower, of the Pisa Cathedral.", difficulty: "easy", source_page: 16 },
                { question: "The 'Taj Mahal' is situated in which Indian city?", options: ["New Delhi", "Mumbai", "Agra", "Jaipur"], correctOptionIndex: 2, explanation: "The Taj Mahal is located in Agra, Uttar Pradesh, India.", difficulty: "easy", source_page: 17 },
                { question: "Which famous landmark is found in Giza, Egypt?", options: ["Sphinx", "Karnak Temple", "Luxor Temple", "Abu Simbel"], correctOptionIndex: 0, explanation: "The Great Sphinx of Giza is a limestone statue of a reclining sphinx, located on the Giza Plateau.", difficulty: "easy", source_page: 18 },
                { question: "The 'Sydney Opera House' is in which country?", options: ["Canada", "Australia", "New Zealand", "South Africa"], correctOptionIndex: 1, explanation: "The Sydney Opera House is a multi-venue performing arts centre in Sydney, New South Wales, Australia.", difficulty: "easy", source_page: 19 },
                { question: "Where is 'Stonehenge' located?", options: ["Ireland", "Scotland", "England", "Wales"], correctOptionIndex: 2, explanation: "Stonehenge is a prehistoric monument in Wiltshire, England.", difficulty: "medium", source_page: 13 },
                { question: "The ancient city of 'Machu Picchu' is in which country?", options: ["Brazil", "Argentina", "Peru", "Chile"], correctOptionIndex: 2, explanation: "Machu Picchu is an Inca citadel located in the Cusco Region, Urubamba Province, Machupicchu District in Peru.", difficulty: "medium", source_page: 14 },
                { question: "Which city is famous for its canals and gondolas?", options: ["Amsterdam", "Venice", "Bruges", "Stockholm"], correctOptionIndex: 1, explanation: "Venice, Italy, is renowned for its intricate network of canals and traditional gondolas.", difficulty: "easy", source_page: 15 },
                { question: "The 'Golden Gate Bridge' is a landmark of which city?", options: ["Seattle", "Los Angeles", "San Francisco", "Miami"], correctOptionIndex: 2, explanation: "The Golden Gate Bridge is a suspension bridge spanning the Golden Gate, the one-mile-wide strait connecting San Francisco Bay and the Pacific Ocean.", difficulty: "easy", source_page: 16 },
                { question: "The 'Burj Khalifa', the world's tallest building, is in which city?", options: ["Shanghai", "Tokyo", "Dubai", "Singapore"], correctOptionIndex: 2, explanation: "The Burj Khalifa is a skyscraper in Dubai, United Arab Emirates.", difficulty: "easy", source_page: 17 },
                { question: "Which river flows through London?", options: ["Seine", "Rhine", "Thames", "Danube"], correctOptionIndex: 2, explanation: "The River Thames flows through southern England, most notably through London.", difficulty: "easy", source_page: 18 },
                { question: "The 'Colosseum' is an iconic ancient amphitheater in:", options: ["Athens, Greece", "Rome, Italy", "Istanbul, Turkey", "Carthage, Tunisia"], correctOptionIndex: 1, explanation: "The Colosseum is an ancient Roman amphitheatre in Rome, Italy.", difficulty: "easy", source_page: 19 },
                { question: "The 'Acropolis' is a citadel located in which European capital?", options: ["Rome", "Athens", "Paris", "Madrid"], correctOptionIndex: 1, explanation: "The Acropolis of Athens is an ancient citadel located on a rocky outcrop above the city of Athens, Greece.", difficulty: "medium", source_page: 13 },
                { question: "Which city is home to 'Christ the Redeemer' statue?", options: ["Buenos Aires", "Rio de Janeiro", "Lima", "Santiago"], correctOptionIndex: 1, explanation: "Christ the Redeemer is an Art Deco statue of Jesus Christ in Rio de Janeiro, Brazil.", difficulty: "easy", source_page: 14 },
                { question: "The 'Blue Mosque' is a famous historical mosque in which city?", options: ["Cairo", "Jerusalem", "Istanbul", "Mecca"], correctOptionIndex: 2, explanation: "The Sultan Ahmed Mosque, commonly known as the Blue Mosque, is an Ottoman-era historical imperial mosque in Istanbul, Turkey.", difficulty: "medium", source_page: 15 },
                { question: "The 'Great Pyramid of Cholula' is located in:", options: ["Peru", "Mexico", "Guatemala", "Honduras"], correctOptionIndex: 1, explanation: "The Great Pyramid of Cholula is a vast archaeological site in Cholula, Puebla, Mexico.", difficulty: "tough", source_page: 16 },
                { question: "Which country is home to the 'Matterhorn' mountain?", options: ["France", "Austria", "Switzerland", "Italy"], correctOptionIndex: 2, explanation: "The Matterhorn is a mountain of the Alps, straddling the main watershed and border between Switzerland and Italy.", difficulty: "medium", source_page: 17 },
                { question: "The 'Sagrada Familia' basilica is found in which Spanish city?", options: ["Madrid", "Seville", "Barcelona", "Valencia"], correctOptionIndex: 2, explanation: "The Basílica de la Sagrada Família is a large unfinished Roman Catholic minor basilica in the Eixample district of Barcelona, Catalonia, Spain.", difficulty: "easy", source_page: 18 },
                { question: "Where would you find 'Mount Fuji'?", options: ["China", "South Korea", "Japan", "Philippines"], correctOptionIndex: 2, explanation: "Mount Fuji is the highest mountain in Japan.", difficulty: "easy", source_page: 19 },
                { question: "The historical site of 'Petra' is located in:", options: ["Syria", "Jordan", "Lebanon", "Israel"], correctOptionIndex: 1, explanation: "Petra is a famous archaeological site in Jordan's southwestern desert.", difficulty: "medium", source_page: 13 },
                { question: "Which European city is known for its 'Roman Baths'?", options: ["Rome", "Bath", "Paris", "Berlin"], correctOptionIndex: 1, explanation: "The Roman Baths are a well-preserved thermae in the city of Bath, Somerset, England.", difficulty: "medium", source_page: 14 },
                { question: "The 'Berlin Wall' historically divided which city?", options: ["Prague", "Warsaw", "Berlin", "Vienna"], correctOptionIndex: 2, explanation: "The Berlin Wall was a guarded concrete barrier that physically and ideologically divided Berlin from 1961 to 1989.", difficulty: "easy", source_page: 15 },
                { question: "The 'Great Mosque of Djenné' is in which African country?", options: ["Nigeria", "Mali", "Senegal", "Morocco"], correctOptionIndex: 1, explanation: "The Great Mosque of Djenné is a large mud-brick building in the city of Djenné, Mali.", difficulty: "tough", source_page: 16 },
                { question: "Which city is home to the 'Vatican City'?", options: ["Florence", "Venice", "Rome", "Milan"], correctOptionIndex: 2, explanation: "Vatican City, the smallest sovereign state in the world, is an independent city-state located within Rome, Italy.", difficulty: "easy", source_page: 17 },
                { question: "The 'Pyramids of Teotihuacan' are near which major city?", options: ["Mexico City", "Guadalajara", "Monterrey", "Puebla"], correctOptionIndex: 0, explanation: "The ancient Mesoamerican city of Teotihuacan is located northeast of modern-day Mexico City.", difficulty: "medium", source_page: 18 },
                { question: "The 'Blarney Stone' is located in which country?", options: ["Scotland", "England", "Ireland", "France"], correctOptionIndex: 2, explanation: "The Blarney Stone is a block of Carboniferous limestone built into the battlements of Blarney Castle, Blarney, Ireland.", difficulty: "medium", source_page: 19 },
                { question: "Which city hosts the annual 'Carnival' with grand parades and samba schools?", options: ["Buenos Aires", "Rio de Janeiro", "Havana", "Bogota"], correctOptionIndex: 1, explanation: "Rio de Janeiro is globally recognized for its vibrant and massive Carnival celebration.", difficulty: "easy", source_page: 13 },
                { question: "The 'Tower of London' is a historic castle located on the banks of which river?", options: ["Seine", "Thames", "Spree", "Liffey"], correctOptionIndex: 1, explanation: "The Tower of London is a historic castle on the north bank of the River Thames in central London.", difficulty: "easy", source_page: 14 },
                { question: "Where is the 'Grand Canyon' primarily located?", options: ["California", "Nevada", "Arizona", "Utah"], correctOptionIndex: 2, explanation: "The Grand Canyon is a steep-sided canyon carved by the Colorado River in Arizona, United States.", difficulty: "easy", source_page: 15 },
                { question: "The 'Kremlin' is a fortified complex in which capital city?", options: ["Warsaw", "Prague", "Moscow", "Kyiv"], correctOptionIndex: 2, explanation: "The Moscow Kremlin is a fortified complex in the heart of Moscow, Russia.", difficulty: "easy", source_page: 16 },
                { question: "Which city is famous for its 'Hollywood' sign?", options: ["New York", "Chicago", "Los Angeles", "San Francisco"], correctOptionIndex: 2, explanation: "The Hollywood Sign is an American landmark and cultural icon located in Los Angeles, California.", difficulty: "easy", source_page: 17 },
                { question: "The 'Forbidden City' is a palace complex in which city?", options: ["Shanghai", "Beijing", "Hong Kong", "Seoul"], correctOptionIndex: 1, explanation: "The Forbidden City is a palace complex in Dongcheng District, Beijing, China.", difficulty: "easy", source_page: 18 }
            ];

            const englishMCQs = [
                // Correct/Incorrect With Solved Exercise: Pages 423-427 (33 questions)
                { question: "Identify the INCORRECT sentence: 'She is angry on me.'", options: ["She is angry with me.", "She is angry on me.", "She is angry at my behavior.", "She is angry about the decision."], correctOptionIndex: 1, explanation: "Use 'angry with' for people and 'angry at/about' for things/situations.", difficulty: "easy", source_page: 423 },
                { question: "Choose the CORRECT sentence: 'He is proficient with English.'", options: ["He is proficient with English.", "He is proficient in English.", "He is proficient for English.", "He is proficient at English."], correctOptionIndex: 1, explanation: "'Proficient in' is the correct idiom for skill in a subject.", difficulty: "easy", source_page: 423 },
                { question: "Identify the INCORRECT sentence: 'I congratulated him for his success.'", options: ["I congratulated him on his success.", "I congratulated him for his success.", "I congratulate him for his success.", "I congratulated him about his success."], correctOptionIndex: 1, explanation: "'Congratulate' takes the preposition 'on'.", difficulty: "medium", source_page: 423 },
                { question: "Choose the CORRECT sentence: 'The criminal was hung.'", options: ["The criminal was hung.", "The criminal was hanged.", "The criminal was hunged.", "The criminal was hang."], correctOptionIndex: 1, explanation: "For execution by suspending, use 'hanged'; for objects, use 'hung'.", difficulty: "medium", source_page: 424 },
                { question: "Identify the INCORRECT sentence: 'He denied to have stolen the money.'", options: ["He denied having stolen the money.", "He denied to have stolen the money.", "He denied that he stole the money.", "He denied stealing the money."], correctOptionIndex: 1, explanation: "'Deny' is followed by a gerund or a 'that' clause, not an infinitive.", difficulty: "tough", source_page: 424 },
                { question: "Choose the CORRECT sentence: 'The boy is weak but intelligent.'", options: ["The boy is weak but intelligent.", "The boy is weak yet intelligent.", "The boy is weak however intelligent.", "The boy is weak whereas intelligent."], correctOptionIndex: 1, explanation: "'Yet' is often used to express a contrast or surprising truth after a negative statement or implication.", difficulty: "medium", source_page: 424 },
                { question: "Identify the INCORRECT sentence: 'He went to home.'", options: ["He went home.", "He went to home.", "He went to the home.", "He went to his home."], correctOptionIndex: 1, explanation: "The word 'home' does not require 'to' when used as an adverb of place.", difficulty: "easy", source_page: 425 },
                { question: "Choose the CORRECT sentence: 'I asked him that who he was.'", options: ["I asked him that who he was.", "I asked him who he was.", "I asked him who was he.", "I asked to him who he was."], correctOptionIndex: 1, explanation: "Avoid using 'that' before indirect questions, and maintain statement order (subject-verb).", difficulty: "medium", source_page: 425 },
                { question: "Identify the INCORRECT sentence: 'The teacher said that the Earth moved around the sun.'", options: ["The teacher said that the Earth moves around the sun.", "The teacher said that the Earth moved around the sun.", "The teacher says that the Earth moves around the sun.", "The teacher told that the Earth moves around the sun."], correctOptionIndex: 1, explanation: "Universal truths remain in the present tense even in indirect speech.", difficulty: "easy", source_page: 425 },
                { question: "Choose the CORRECT sentence: 'None of the students have passed.'", options: ["None of the students have passed.", "None of the students has passed.", "None of the student has passed.", "None of the students passed."], correctOptionIndex: 1, explanation: "When 'none' means 'not one', it takes a singular verb.", difficulty: "medium", source_page: 426 },
                { question: "Identify the INCORRECT sentence: 'He arrived at Lahore.'", options: ["He arrived in Lahore.", "He arrived at Lahore.", "He arrived to Lahore.", "He arrived for Lahore."], correctOptionIndex: 1, explanation: "Use 'arrive in' for cities/countries and 'arrive at' for smaller places.", difficulty: "easy", source_page: 426 },
                { question: "Choose the CORRECT sentence: 'I am hearing a noise.'", options: ["I am hearing a noise.", "I hear a noise.", "I am hearing noise.", "I hear noise."], correctOptionIndex: 1, explanation: "Verbs of perception like 'hear' are generally not used in continuous tenses.", difficulty: "easy", source_page: 426 },
                { question: "Identify the INCORRECT sentence: 'The jury was divided in its opinion.'", options: ["The jury were divided in their opinion.", "The jury was divided in its opinion.", "The jury was divided in their opinion.", "The jury is divided in its opinion."], correctOptionIndex: 1, explanation: "When a collective noun refers to individual members acting separately, it takes a plural verb and pronoun.", difficulty: "tough", source_page: 427 },
                { question: "Choose the CORRECT sentence: 'He feels badly.'", options: ["He feels badly.", "He feels bad.", "He feels worse.", "He feels good."], correctOptionIndex: 1, explanation: "After verbs of sensation (feel, look, sound, smell, taste), use an adjective, not an adverb.", difficulty: "easy", source_page: 427 },
                { question: "Identify the INCORRECT sentence: 'She is good for mathematics.'", options: ["She is good at mathematics.", "She is good for mathematics.", "She is good in mathematics.", "She is good with mathematics."], correctOptionIndex: 1, explanation: "'Good at' is the correct idiom for proficiency.", difficulty: "easy", source_page: 427 },
                { question: "Choose the CORRECT sentence: 'I saw him opening the box.'", options: ["I saw him opening the box.", "I saw him open the box.", "I saw him to open the box.", "I saw him opened the box."], correctOptionIndex: 1, explanation: "After verbs of perception like 'see', use either the bare infinitive or the present participle.", difficulty: "medium", source_page: 423 },
                { question: "Identify the INCORRECT sentence: 'He is married with a doctor.'", options: ["He is married to a doctor.", "He is married with a doctor.", "He is married by a doctor.", "He is married for a doctor."], correctOptionIndex: 1, explanation: "'Married' takes the preposition 'to'.", difficulty: "easy", source_page: 423 },
                { question: "Choose the CORRECT sentence: 'Everyone congratulated him on his bravery.'", options: ["Everyone congratulated him on his bravery.", "Everyone congratulated him for his bravery.", "Everyone congratulated him about his bravery.", "Everyone congratulated him of his bravery."], correctOptionIndex: 0, explanation: "'Congratulate' takes 'on'.", difficulty: "easy", source_page: 423 },
                { question: "Identify the INCORRECT sentence: 'The criminal committed suicide.'", options: ["The criminal committed suicide.", "The criminal did suicide.", "The criminal made suicide.", "The criminal performed suicide."], correctOptionIndex: 1, explanation: "The correct verb to use with 'suicide' is 'commit'.", difficulty: "easy", source_page: 424 },
                { question: "Choose the CORRECT sentence: 'He came to see me with a view to help me.'", options: ["He came to see me with a view to help me.", "He came to see me with a view to helping me.", "He came to see me with a view for help me.", "He came to see me with a view to helped me."], correctOptionIndex: 1, explanation: "'With a view to' is a phrase followed by a gerund (-ing form).", difficulty: "medium", source_page: 424 },
                { question: "Identify the INCORRECT sentence: 'I am looking forward to meet you.'", options: ["I am looking forward to meeting you.", "I am looking forward to meet you.", "I look forward to meet you.", "I am looking forward for meeting you."], correctOptionIndex: 1, explanation: "'Look forward to' is a phrase followed by a gerund (-ing form).", difficulty: "easy", source_page: 424 },
                { question: "Choose the CORRECT sentence: 'He returned back from Pakistan.'", options: ["He returned back from Pakistan.", "He returned from Pakistan.", "He returned back Pakistan.", "He returned to Pakistan."], correctOptionIndex: 1, explanation: "'Return' already implies 'coming back', so 'back' is redundant.", difficulty: "easy", source_page: 425 },
                { question: "Identify the INCORRECT sentence: 'The police investigate into the case.'", options: ["The police investigated the case.", "The police investigate into the case.", "The police investigated in the case.", "The police investigate about the case."], correctOptionIndex: 1, explanation: "The verb 'investigate' is transitive and does not require the preposition 'into'.", difficulty: "medium", source_page: 425 },
                { question: "Choose the CORRECT sentence: 'The sun rises in the east, isn't it?'", options: ["The sun rises in the east, isn't it?", "The sun rises in the east, doesn't it?", "The sun rises in the east, doesn't he?", "The sun rises in the east, isn't he?"], correctOptionIndex: 1, explanation: "For a simple present affirmative statement with 'rises', the tag question is 'doesn't it'.", difficulty: "medium", source_page: 425 },
                { question: "Identify the INCORRECT sentence: 'He writes a beautiful poem.'", options: ["He writes beautiful poems.", "He writes a beautiful poem.", "He is writing a beautiful poem.", "He writes beautifully."], correctOptionIndex: 1, explanation: "'Poem' is countable; use 'a poem' or 'poems'. The question implies a general statement about his writing ability, not a single instance.", difficulty: "medium", source_page: 426 },
                { question: "Choose the CORRECT sentence: 'She is suffering with measles.'", options: ["She is suffering with measles.", "She is suffering from measles.", "She is suffering by measles.", "She is suffering due to measles."], correctOptionIndex: 1, explanation: "'Suffering' takes the preposition 'from' for illnesses.", difficulty: "easy", source_page: 426 },
                { question: "Identify the INCORRECT sentence: 'I am satisfied from your work.'", options: ["I am satisfied with your work.", "I am satisfied from your work.", "I am satisfied by your work.", "I am satisfied at your work."], correctOptionIndex: 1, explanation: "'Satisfied' takes the preposition 'with'.", difficulty: "easy", source_page: 426 },
                { question: "Choose the CORRECT sentence: 'He is living here since 2000.'", options: ["He is living here since 2000.", "He has been living here since 2000.", "He lives here since 2000.", "He lived here since 2000."], correctOptionIndex: 1, explanation: "For actions continuing from the past to the present, use the present perfect continuous tense.", difficulty: "easy", source_page: 427 },
                { question: "Identify the INCORRECT sentence: 'The box is full with books.'", options: ["The box is full of books.", "The box is full with books.", "The box is full by books.", "The box is full for books."], correctOptionIndex: 1, explanation: "'Full' takes the preposition 'of'.", difficulty: "easy", source_page: 427 },
                { question: "Choose the CORRECT sentence: 'He is fond to read novels.'", options: ["He is fond to read novels.", "He is fond of reading novels.", "He is fond for reading novels.", "He is fond at reading novels."], correctOptionIndex: 1, explanation: "'Fond of' is followed by a gerund.", difficulty: "easy", source_page: 427 },
                { question: "Identify the INCORRECT sentence: 'I enjoy to swim.'", options: ["I enjoy swimming.", "I enjoy to swim.", "I enjoy for swimming.", "I enjoy of swimming."], correctOptionIndex: 1, explanation: "The verb 'enjoy' is followed by a gerund (-ing form).", difficulty: "easy", source_page: 423 },
                { question: "Choose the CORRECT sentence: 'His speech was comprised of several points.'", options: ["His speech was comprised of several points.", "His speech comprised several points.", "His speech was comprised in several points.", "His speech comprised of several points."], correctOptionIndex: 1, explanation: "'Comprise' means 'to consist of' and does not take 'of' or 'be comprised of'.", difficulty: "tough", source_page: 424 },
                { question: "Identify the INCORRECT sentence: 'He divided his property among his two sons.'", options: ["He divided his property between his two sons.", "He divided his property among his two sons.", "He divided his property amongst his two sons.", "He divided his property for his two sons."], correctOptionIndex: 1, explanation: "'Between' is used for two people/things; 'among' is for three or more.", difficulty: "medium", source_page: 425 }
            ];

            const psychologicalTestsMCQs = [
                // Analogies: Pages 503-510 (33 questions)
                { question: "TRUCK : ROADS :: BOAT : ?", options: ["Water", "River", "Sea", "Ocean"], correctOptionIndex: 0, explanation: "Trucks operate on roads; boats operate on water.", difficulty: "easy", source_page: 503 },
                { question: "PUPIL : EYE :: FINGER : ?", options: ["Hand", "Glove", "Nail", "Ring"], correctOptionIndex: 0, explanation: "The pupil is part of the eye; the finger is part of the hand.", difficulty: "easy", source_page: 503 },
                { question: "LION : ROAR :: OWL : ?", options: ["Hoot", "Screech", "Chirp", "Meow"], correctOptionIndex: 0, explanation: "A lion's sound is a roar; an owl's sound is a hoot.", difficulty: "easy", source_page: 503 },
                { question: "PEN : INK :: PENCIL : ?", options: ["Lead", "Eraser", "Wood", "Paper"], correctOptionIndex: 0, explanation: "A pen uses ink to write; a pencil uses lead to write.", difficulty: "easy", source_page: 504 },
                { question: "FARMER : PLOUGH :: WRITER : ?", options: ["Pen", "Book", "Words", "Story"], correctOptionIndex: 0, explanation: "A farmer uses a plough as a primary tool; a writer uses a pen as a primary tool.", difficulty: "easy", source_page: 504 },
                { question: "CAR : GARAGE :: AEROPLANE : ?", options: ["Hangar", "Airport", "Runway", "Sky"], correctOptionIndex: 0, explanation: "A car is kept in a garage; an aeroplane is kept in a hangar.", difficulty: "medium", source_page: 504 },
                { question: "HOTEL : GUEST :: HOSPITAL : ?", options: ["Patient", "Doctor", "Nurse", "Medicine"], correctOptionIndex: 0, explanation: "A hotel accommodates guests; a hospital accommodates patients.", difficulty: "easy", source_page: 505 },
                { question: "BRANCH : TREE :: LEG : ?", options: ["Body", "Walk", "Foot", "Arm"], correctOptionIndex: 0, explanation: "A branch is a part of a tree; a leg is a part of the body.", difficulty: "easy", source_page: 505 },
                { question: "FLOWER : BOUQUET :: BEE : ?", options: ["Swarm", "Hive", "Honey", "Insect"], correctOptionIndex: 0, explanation: "A collection of flowers is a bouquet; a collection of bees is a swarm.", difficulty: "medium", source_page: 505 },
                { question: "WATER : TAP :: ELECTRICITY : ?", options: ["Wire", "Bulb", "Switch", "Power"], correctOptionIndex: 2, explanation: "Water comes from a tap; electricity is controlled by a switch.", difficulty: "easy", source_page: 506 },
                { question: "DAY : NIGHT :: SUMMER : ?", options: ["Winter", "Autumn", "Spring", "Cold"], correctOptionIndex: 0, explanation: "Day is opposite of night; summer is opposite of winter.", difficulty: "easy", source_page: 506 },
                { question: "WOOD : CHAIR :: METAL : ?", options: ["Car", "Iron", "Hammer", "Hard"], correctOptionIndex: 0, explanation: "A chair is made of wood; a car can be made of metal.", difficulty: "easy", source_page: 506 },
                { question: "CUP : DRINK :: PLATE : ?", options: ["Eat", "Food", "Dinner", "Table"], correctOptionIndex: 1, explanation: "You use a cup to drink; you use a plate for food.", difficulty: "easy", source_page: 507 },
                { question: "ACTOR : STAGE :: SINGER : ?", options: ["Concert", "Song", "Audience", "Mic"], correctOptionIndex: 0, explanation: "An actor performs on a stage; a singer performs at a concert.", difficulty: "medium", source_page: 507 },
                { question: "RAIN : DROPS :: SNOW : ?", options: ["Flakes", "Cold", "White", "Ice"], correctOptionIndex: 0, explanation: "Rain consists of drops; snow consists of flakes.", difficulty: "easy", source_page: 507 },
                { question: "BUTTERFLY : INSECT :: SNAKE : ?", options: ["Reptile", "Poison", "Slither", "Amphibian"], correctOptionIndex: 0, explanation: "A butterfly is a type of insect; a snake is a type of reptile.", difficulty: "easy", source_page: 508 },
                { question: "TEACHER : EDUCATION :: DOCTOR : ?", options: ["Health", "Hospital", "Cure", "Patient"], correctOptionIndex: 0, explanation: "A teacher provides education; a doctor provides health (care).", difficulty: "easy", source_page: 508 },
                { question: "ENGINE : CAR :: BRAIN : ?", options: ["Body", "Thought", "Mind", "Head"], correctOptionIndex: 0, explanation: "An engine is essential for a car's function; the brain is essential for the body's function.", difficulty: "medium", source_page: 508 },
                { question: "GRAPE : BUNCH :: STAR : ?", options: ["Galaxy", "Sky", "Constellation", "Night"], correctOptionIndex: 2, explanation: "A collection of grapes is a bunch; a collection of stars forming a pattern is a constellation.", difficulty: "medium", source_page: 509 },
                { question: "CLOCK : TIME :: SCALE : ?", options: ["Weight", "Measure", "Fish", "Balance"], correctOptionIndex: 0, explanation: "A clock measures time; a scale measures weight.", difficulty: "easy", source_page: 509 },
                { question: "FARM : CROPS :: FACTORY : ?", options: ["Products", "Workers", "Machinery", "Building"], correctOptionIndex: 0, explanation: "A farm produces crops; a factory produces products.", difficulty: "easy", source_page: 509 },
                { question: "CHAIR : FURNITURE :: SHIRT : ?", options: ["Clothing", "Cotton", "Wear", "Closet"], correctOptionIndex: 0, explanation: "A chair is a type of furniture; a shirt is a type of clothing.", difficulty: "easy", source_page: 510 },
                { question: "TREE : FOREST :: SAND : ?", options: ["Desert", "Beach", "Dune", "Sea"], correctOptionIndex: 0, explanation: "A collection of trees forms a forest; a large area of sand forms a desert.", difficulty: "easy", source_page: 510 },
                { question: "PAINTER : BRUSH :: WRITER : ?", options: ["Pen", "Paper", "Ink", "Book"], correctOptionIndex: 0, explanation: "A painter uses a brush; a writer uses a pen.", difficulty: "easy", source_page: 503 },
                { question: "SNAIL : SLOW :: CHEETAH : ?", options: ["Fast", "Leopard", "Spots", "Hunt"], correctOptionIndex: 0, explanation: "A snail is known for being slow; a cheetah is known for being fast.", difficulty: "easy", source_page: 504 },
                { question: "GLOVE : HAND :: SHOE : ?", options: ["Foot", "Leg", "Sock", "Lace"], correctOptionIndex: 0, explanation: "A glove is worn on the hand; a shoe is worn on the foot.", difficulty: "easy", source_page: 505 },
                { question: "COAT : HANGER :: CARPET : ?", options: ["Floor", "Room", "Roll", "Clean"], correctOptionIndex: 0, explanation: "A coat is hung on a hanger; a carpet covers a floor.", difficulty: "easy", source_page: 506 },
                { question: "SHEEP : WOOL :: SILKWORM : ?", options: ["Silk", "Cocoon", "Thread", "Fabric"], correctOptionIndex: 0, explanation: "Wool comes from sheep; silk comes from silkworms.", difficulty: "easy", source_page: 507 },
                { question: "OVEN : BAKE :: REFRIGERATOR : ?", options: ["Cool", "Freeze", "Food", "Ice"], correctOptionIndex: 0, explanation: "An oven is used to bake; a refrigerator is used to cool.", difficulty: "easy", source_page: 508 },
                { question: "NEEDLE : THREAD :: GUN : ?", options: ["Bullet", "Shoot", "Weapon", "Army"], correctOptionIndex: 0, explanation: "A needle is used with thread; a gun is used with a bullet.", difficulty: "easy", source_page: 509 },
                { question: "TELEVISION : SIGHT :: RADIO : ?", options: ["Sound", "Listen", "Music", "News"], correctOptionIndex: 0, explanation: "Television provides sight (visuals); radio provides sound.", difficulty: "easy", source_page: 510 },
                { question: "ENGINE : TRAIN :: PROPELLER : ?", options: ["Aeroplane", "Boat", "Helicopter", "Flight"], correctOptionIndex: 0, explanation: "An engine powers a train; a propeller powers an aeroplane.", difficulty: "medium", source_page: 503 },
                { question: "FEATHER : BIRD :: SCALES : ?", options: ["Fish", "Reptile", "Snake", "Weight"], correctOptionIndex: 0, explanation: "Feathers cover a bird; scales cover a fish.", difficulty: "medium", source_page: 504 },
                { question: "LIBRARY : BOOKS :: MUSEUM : ?", options: ["Artifacts", "Art", "History", "Exhibits"], correctOptionIndex: 0, explanation: "A library houses books; a museum houses artifacts.", difficulty: "easy", source_page: 505 }
            ];


            // Combine and shuffle questions
            quizQuestions.push(...generalKnowledgeMCQs);
            quizQuestions.push(...englishMCQs);
            quizQuestions.push(...psychologicalTestsMCQs);

            // Ensure a fixed number of questions (e.g., 100) by trimming or warning if not enough
            if (quizQuestions.length > 100) {
                // Randomly select 100 questions if more are available
                shuffleArray(quizQuestions);
                quizQuestions = quizQuestions.slice(0, 100);
            } else if (quizQuestions.length < 100) {
                console.warn(`Warning: Only ${quizQuestions.length} questions available for June 27. Aim for 100 questions.`);
                // If fewer than 100, just use what's available
            }
            
            shuffleArray(quizQuestions); // Shuffle the final set of questions

            // Randomly select one "Today's Special Question" (only if there are questions)
            if (quizQuestions.length > 0) {
                specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // --- Initial Setup on DOM Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set the login ID dynamically based on the CURRENT_DATE_STR
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase().substring(0, 3);
            const day = parseInt(dateParts[1].replace(',', ''));
            document.getElementById('loginId').value = `${day}${monthName}`; // e.g., 27JUNE

            initializeQuiz();
            // Initial call to set correct sticky date position on load
            updateLiveDate();
        });

        // Handle mobile sticky date position on resize
        window.addEventListener('resize', updateLiveDate);
    </script>
</body>
</html>
