<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 16, 2025 (Week 3 Review)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Old Lace */
            color: #8B4513; /* SaddleBrown */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .top-bar .whatsapp-link {
            color: #555;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4513; /* SaddleBrown */
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #D2B48C, #CD853F); /* Tan to Peru */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling */
        .card {
            background-color: #FAF0E6; /* Linen */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }
        
        /* Admin Panel Card Specific Styling */
        #adminPage.card {
            max-width: 900px; /* Wider for table */
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #F4A460, #D2B48C); /* SandyBrown to Tan */
            color: #4B2E2E;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .submit-button {
             background-image: linear-gradient(to right, #4CAF50, #8BC34A);
             color: white;
        }
        
        .submit-button:hover {
            box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
        }

        .button-danger {
            background-image: linear-gradient(to right, #e53e3e, #c53030);
            color: white;
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #8B4513;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #CD853F; /* Peru */
            background-color: #FFF8DC; /* Cornsilk */
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #2E8B57; /* SeaGreen */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #F08080; /* LightCoral */
            border-color: #CD5C5C; /* IndianRed */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #FFF5EE; /* SeaShell */
            border-left: 5px solid #D2B48C; /* Tan */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #8B4513;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-title { font-size: 1.5rem; }
            .card { padding: 1rem; }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        /* Custom Confirmation Modal */
        .modal {
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.4);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 400px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .modal-buttons {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection, onSnapshot, deleteDoc, query } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Firebase Configuration and Initialization ---
        // IMPORTANT: Replace these placeholder values with your actual Firebase project configuration.
        // You can find these in your Firebase project settings -> Project settings -> General -> Your apps -> Firebase SDK snippet (Config).
        // If deploying to GitHub Pages or a similar static host, these values MUST be filled in.
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : {
            apiKey: "YOUR_FIREBASE_API_KEY", // e.g., "AIzaSyC_YourActualApiKeyHere"
            authDomain: "YOUR_FIREBASE_AUTH_DOMAIN", // e.g., "your-project-id.firebaseapp.com"
            projectId: "YOUR_FIREBASE_PROJECT_ID", // e.g., "your-project-id"
            storageBucket: "YOUR_FIREBASE_STORAGE_BUCKET", // e.g., "your-project-id.appspot.com"
            messagingSenderId: "YOUR_FIREBASE_MESSAGING_SENDER_ID", // e.g., "1234567890"
            appId: "YOUR_FIREBASE_APP_ID" // e.g., "1:1234567890:web:abcdef1234567890abcdef"
        };
        
        let app, auth, db;
        let userId;
        let unsubscribeResultsListener = null; // To manage real-time listener

        // Initialize Firebase
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized successfully for quiz.");
        } catch (e) {
            console.error("Error initializing Firebase:", e);
            // Display a user-friendly message if Firebase initialization fails
            document.body.innerHTML = '<div class="text-red-500 text-center p-8">Error initializing the application. Please check the console and ensure Firebase configuration is correct.</div>';
        }

        // Handle Authentication
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
                console.log("User authenticated. User ID:", userId);
            } else {
                try {
                    // Fallback for __initial_auth_token if not in Canvas environment
                    const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                    if (initialAuthToken) {
                        await signInWithCustomToken(auth, initialAuthToken);
                        console.log("Signed in with custom token.");
                    } else {
                        await signInAnonymously(auth);
                        console.log("Signed in anonymously.");
                    }
                } catch (error) {
                    console.error("Error during sign-in:", error);
                }
            }
        });

        // --- Global State ---
        // Fallback for __app_id if not in Canvas environment
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-quiz-app-id'; // Use a default ID for non-Canvas environments
        const CURRENT_DATE_STR = "July 16, 2025";
        let quizQuestions = [];
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 100;
        const TOTAL_QUESTIONS = 100;
        let specialQuestionIndex = -1;
        let quizSubmitted = false;

        // --- Helper Functions ---
        function shuffleArrayWithSeed(array, seed) {
            let rng = new Math.seedrandom(seed);
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        function showPage(pageId) {
            const pages = [
                document.getElementById('loginPage'),
                document.getElementById('candidateNamePage'),
                document.getElementById('quizPage'),
                document.getElementById('resultsPage'),
                document.getElementById('adminPage')
            ];
            pages.forEach(page => {
                if (page) page.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if(pageToShow) pageToShow.classList.remove('hidden');
        }

        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60;
            const timerDisplay = document.getElementById('timerDisplay');

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                if(timerDisplay) timerDisplay.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!quizSubmitted) submitQuiz(true);
                } else {
                    timeLeft--;
                }
            }
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');
            if (question.special) {
                quizCard.classList.add('special-question');
            }
            
            const optionSeed = `${CURRENT_DATE_STR}-${currentQuestionIndex}`;
            const shuffledOptions = [...question.options];
            shuffleArrayWithSeed(shuffledOptions, optionSeed);

            shuffledOptions.forEach((option, shuffledIndex) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = option;
                // Store the original index of the option
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));
                optionsContainer.appendChild(button);
            });

            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer && userAnswer.selectedOptionIndex !== undefined) {
                 Array.from(optionsContainer.children).forEach((button) => {
                    button.disabled = true; // Disable all options if already answered
                    const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);
                    if (btnOriginalIndex === userAnswer.selectedOptionIndex) {
                        button.classList.add('selected', userAnswer.isCorrect ? 'correct' : 'incorrect');
                    }
                    // If the user's answer was incorrect, also highlight the correct answer
                    if (!userAnswer.isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                         button.classList.add('correct');
                    }
                });
            }

            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            explanationDiv.style.display = (userAnswer && userAnswer.selectedOptionIndex !== undefined) ? 'block' : 'none';

            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.remove('hidden'); // Always visible
            updateProgressBar();
        }

        function selectOption(selectedOptionOriginalIndex) {
            // Prevent changing answer if already selected
            if (userAnswers[currentQuestionIndex] !== null && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };
            
            renderQuestion(); // Re-render to show selection and explanation
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        async function submitQuiz(isAutoSubmit = false) {
            if(quizSubmitted) return; // Prevent multiple submissions
            quizSubmitted = true;

            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) correctCount++;
                    else incorrectCount++;
                }
            });

            const score = (correctCount * 2) - incorrectCount;
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = `${score}`;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultAttempted').textContent = `${attemptedCount} / ${TOTAL_QUESTIONS}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);
            
            showPage('resultsPage');

            const resultData = {
                candidateName: candidateName,
                quizDate: CURRENT_DATE_STR,
                score: score,
                correctCount: correctCount,
                incorrectCount: incorrectCount,
                attemptedCount: attemptedCount,
                timeTaken: formatTime(timeTakenSeconds),
                timeTakenSeconds: timeTakenSeconds,
                submittedAt: new Date().toISOString(),
                userId: userId // Include userId for potential future use or admin filtering
            };
            
            if (db) { // Use the initialized 'db' from the module scope
                try {
                    const resultsCollectionPath = `/artifacts/${appId}/public/data/quiz_results`;
                    console.log("Attempting to save result to Firestore path:", resultsCollectionPath);
                    const newResultRef = doc(collection(db, resultsCollectionPath)); 
                    await setDoc(newResultRef, resultData);
                    console.log("Result saved to Firestore successfully with ID:", newResultRef.id);
                } catch (error) {
                    console.error("Error writing document to Firestore:", error);
                    // Provide a more specific error message to the user if needed
                }
            } else {
                 console.error("Firestore database (db) not initialized. Result not saved.");
            }
        }

        // --- Admin Panel Functions ---
        async function fetchAndDisplayResults() {
            if (!db) {
                console.error("Firestore database not initialized for admin panel. Cannot fetch results.");
                document.getElementById('resultsContainer').innerHTML = '<p class="text-red-500 text-center">Firebase not configured or initialized. Cannot load results.</p>';
                return;
            }
            
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = '<p class="text-center">Loading results...</p>';

            const resultsCollectionPath = `/artifacts/${appId}/public/data/quiz_results`;
            console.log("Attempting to fetch results from Firestore path:", resultsCollectionPath);
            const q = query(collection(db, resultsCollectionPath));

            // Unsubscribe from previous listener if exists
            if (unsubscribeResultsListener) {
                unsubscribeResultsListener();
            }

            unsubscribeResultsListener = onSnapshot(q, (querySnapshot) => {
                const results = [];
                querySnapshot.forEach((doc) => {
                    results.push({ id: doc.id, ...doc.data() });
                });

                // Sort by score (desc) then time taken (asc)
                results.sort((a, b) => {
                    if (b.score !== a.score) return b.score - a.score;
                    return a.timeTakenSeconds - b.timeTakenSeconds;
                });

                renderResults(results);
                console.log("Successfully fetched and rendered", results.length, "results.");
            }, (error) => {
                console.error("Error fetching results for admin panel:", error);
                resultsContainer.innerHTML = '<p class="text-red-500 text-center">Failed to load results. Please check Firebase permissions and console for details.</p>';
            });
        }

        function renderResults(results) {
            const resultsContainer = document.getElementById('resultsContainer');
            if (results.length === 0) {
                resultsContainer.innerHTML = '<p class="text-center text-gray-500">No results submitted yet.</p>';
                return;
            }

            resultsContainer.innerHTML = `
                <div class="overflow-x-auto">
                    <table class="min-w-full bg-white rounded-lg shadow">
                        <thead class="bg-yellow-800 text-white">
                            <tr>
                                <th class="py-3 px-4 text-left">Rank</th>
                                <th class="py-3 px-4 text-left">Candidate Name</th>
                                <th class="py-3 px-4 text-left">User ID</th> <!-- New column for userId -->
                                <th class="py-3 px-4 text-left">Score</th>
                                <th class="py-3 px-4 text-left">Correct</th>
                                <th class="py-3 px-4 text-left">Incorrect</th>
                                <th class="py-3 px-4 text-left">Time Taken</th>
                                <th class="py-3 px-4 text-left">Date</th>
                                <th class="py-3 px-4 text-left">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="resultsTableBody"></tbody>
                    </table>
                </div>
            `;
            
            const tableBody = document.getElementById('resultsTableBody');
            results.forEach((result, index) => {
                const row = document.createElement('tr');
                row.className = 'border-b border-gray-200 hover:bg-gray-100';
                row.innerHTML = `
                    <td class="py-3 px-4 font-bold">${index + 1}</td>
                    <td class="py-3 px-4">${result.candidateName || 'N/A'}</td>
                    <td class="py-3 px-4 text-sm break-all">${result.userId || 'N/A'}</td> <!-- Display userId -->
                    <td class="py-3 px-4 font-semibold">${result.score}</td>
                    <td class="py-3 px-4 text-green-600">${result.correctCount}</td>
                    <td class="py-3 px-4 text-red-600">${result.incorrectCount}</td>
                    <td class="py-3 px-4">${result.timeTaken}</td>
                    <td class="py-3 px-4">${result.quizDate}</td>
                    <td class="py-3 px-4">
                        <button onclick="showConfirmModal('${result.id}')" class="button-gradient button-danger text-xs px-3 py-1">Remove</button>
                    </td>
                `;
                tableBody.appendChild(row);
            });
        }

        // Custom confirmation modal logic
        let confirmActionCallback = null;
        let confirmActionId = null;

        function showConfirmModal(docId) {
            confirmActionId = docId;
            document.getElementById('confirmModal').classList.remove('hidden');
            confirmActionCallback = () => deleteResult(docId); // Set the callback
        }

        function hideConfirmModal() {
            document.getElementById('confirmModal').classList.add('hidden');
            confirmActionCallback = null;
            confirmActionId = null;
        }

        document.getElementById('confirmDeleteBtn').addEventListener('click', () => {
            if (confirmActionCallback) {
                confirmActionCallback();
            }
            hideConfirmModal();
        });

        document.getElementById('cancelDeleteBtn').addEventListener('click', () => {
            hideConfirmModal();
        });

        async function deleteResult(docId) {
            if (!db || !appId) {
                console.error("Firestore database or appId not available for deletion.");
                return;
            }
            
            const docPath = `/artifacts/${appId}/public/data/quiz_results/${docId}`;
            console.log("Attempting to delete document from Firestore path:", docPath);
            try {
                await deleteDoc(doc(db, docPath));
                console.log("Result removed successfully.");
            } catch (error) {
                console.error("Error removing result:", error);
            }
        }

        // Make functions globally accessible for onclick attributes in HTML
        window.showConfirmModal = showConfirmModal;


        // --- Quiz Initialization ---
        function initializeQuiz() {
            quizQuestions.length = 0; // Clear previous questions
            userAnswers = new Array(TOTAL_QUESTIONS).fill(null); // Reset user answers
            currentQuestionIndex = 0; // Reset question index
            quizSubmitted = false; // Reset submission flag

            const dateSeed = CURRENT_DATE_STR;
            
            const allQuestions = [
                // === July 16th Syllabus Quiz (Week 3 Review - 100 MCQs) ===

                // GK - Airlines, Airports, Places (pp. 53-59)
                { "question": "Qantas is the flag carrier airline of which country?", "options": ["New Zealand", "Australia", "South Africa", "Canada"], "correctOptionIndex": 1, "explanation": "Qantas is the flag carrier of Australia.", "source_page": 54 },
                { "question": "Where is the 'Pentagon', the headquarters of the US Department of Defense, located?", "options": ["Arlington, Virginia", "Washington D.C.", "Maryland", "New York"], "correctOptionIndex": 0, "explanation": "The Pentagon is located in Arlington County, Virginia.", "source_page": 53 },
                { "question": "Charles de Gaulle Airport is the primary international airport for which European capital?", "options": ["Madrid", "Rome", "Berlin", "Paris"], "correctOptionIndex": 3, "explanation": "Charles de Gaulle Airport is the largest international airport in France, serving Paris.", "source_page": 57 },
                { "question": "Aeroflot is the national airline of which country?", "options": ["Poland", "Hungary", "Russia", "Ukraine"], "correctOptionIndex": 2, "explanation": "Aeroflot is the flag carrier and largest airline of the Russian Federation.", "source_page": 58 },
                { "question": "Dum Dum Airport is the former name of the international airport in which Indian city?", "options": ["Mumbai", "Delhi", "Kolkata", "Chennai"], "correctOptionIndex": 2, "explanation": "Netaji Subhas Chandra Bose International Airport in Kolkata was formerly known as Dum Dum Airport.", "source_page": 59 },
                
                // GK - News Agencies (pp. 60-61)
                { "question": "AFP (Agence France-Presse) is the news agency of which country?", "options": ["Germany", "France", "Spain", "Belgium"], "correctOptionIndex": 1, "explanation": "Agence France-Presse (AFP) is a leading global news agency headquartered in Paris, France.", "source_page": 60 },
                { "question": "Bernama is the official news agency of which country?", "options": ["Indonesia", "Thailand", "Malaysia", "Singapore"], "correctOptionIndex": 2, "explanation": "Bernama is the national news agency of Malaysia.", "source_page": 60 },
                { "question": "Reuters is a major international news agency headquartered in which city?", "options": ["New York", "Paris", "London", "Toronto"], "correctOptionIndex": 2, "explanation": "Reuters is an international news organization headquartered in London, United Kingdom.", "source_page": 61 },
                
                // GK - Nobel Prize (pp. 62-66)
                { "question": "Who was the first Muslim to receive a Nobel Prize?", "options": ["Yasser Arafat", "Anwar Sadat", "Dr. Abdus Salam", "Naguib Mahfouz"], "correctOptionIndex": 1, "explanation": "Anwar Sadat, the President of Egypt, was the first Muslim to win a Nobel Prize, receiving the Peace Prize in 1978.", "source_page": 63 },
                { "question": "Who is the youngest person to ever receive a Nobel Prize?", "options": ["Malala Yousafzai", "Lawrence Bragg", "Nadia Murad", "Tsung-Dao Lee"], "correctOptionIndex": 0, "explanation": "Malala Yousafzai of Pakistan is the youngest Nobel laureate, receiving the Peace Prize in 2014 at the age of 17.", "source_page": 63 },
                { "question": "In which city is the Nobel Peace Prize awarded?", "options": ["Stockholm, Sweden", "Oslo, Norway", "Copenhagen, Denmark", "Helsinki, Finland"], "correctOptionIndex": 1, "explanation": "The Nobel Peace Prize is awarded in Oslo, Norway.", "source_page": 62 },
                
                // GK - Awards & Borders (pp. 67-69)
                { "question": "What is the highest military award of Pakistan?", "options": ["Sitara-e-Jurat", "Hilal-e-Jurat", "Nishan-e-Haider", "Tamgha-e-Jurat"], "correctOptionIndex": 2, "explanation": "The Nishan-e-Haider is the highest military gallantry award of Pakistan.", "source_page": 67 },
                { "question": "The Radcliffe Line demarcates the border between:", "options": ["India and China", "Pakistan and Afghanistan", "India and Pakistan", "India and Bangladesh"], "correctOptionIndex": 2, "explanation": "The Radcliffe Line became the border between India and Pakistan upon the partition of India in 1947.", "source_page": 68 },
                { "question": "The '38th Parallel' forms the border between which two countries?", "options": ["North and South Vietnam", "East and West Germany", "North and South Korea", "USA and Canada"], "correctOptionIndex": 2, "explanation": "The 38th parallel north formed the border between North and South Korea.", "source_page": 69 },
                
                // GK - Important Days & Personalities (pp. 70-78)
                { "question": "International Women's Day is celebrated on which date?", "options": ["February 14", "March 8", "April 1", "May 10"], "correctOptionIndex": 1, "explanation": "International Women's Day is a global day celebrating the achievements of women, observed on March 8th.", "source_page": 70 },
                { "question": "When is United Nations Day celebrated?", "options": ["September 24", "October 24", "November 24", "December 24"], "correctOptionIndex": 1, "explanation": "United Nations Day, on October 24th, marks the anniversary of the UN Charter entering into force.", "source_page": 72 },
                { "question": "Who is known as the 'Iron Lady' of the United Kingdom?", "options": ["Queen Elizabeth II", "Theresa May", "Margaret Thatcher", "Diana, Princess of Wales"], "correctOptionIndex": 2, "explanation": "Margaret Thatcher was nicknamed the 'Iron Lady' for her uncompromising leadership style.", "source_page": 74 },
                { "question": "Who was the first man to walk on the moon?", "options": ["Buzz Aldrin", "Michael Collins", "Yuri Gagarin", "Neil Armstrong"], "correctOptionIndex": 3, "explanation": "Neil Armstrong was the first person to walk on the Moon during the Apollo 11 mission in 1969.", "source_page": 76 },
                { "question": "Who is credited with the invention of the telephone?", "options": ["Thomas Edison", "Guglielmo Marconi", "Alexander Graham Bell", "Nikola Tesla"], "correctOptionIndex": 2, "explanation": "Alexander Graham Bell is widely credited with patenting the first practical telephone.", "source_page": 78 },
                
                // English - Direct/Indirect & Active/Passive (pp. 454-471)
                { "question": "Change to indirect speech: She said, 'My father will come tomorrow.'", "options": ["She said that her father will come the next day.", "She said that her father would come tomorrow.", "She said that her father would come the next day.", "She told that her father would come the next day."], "correctOptionIndex": 2, "explanation": "'Will' changes to 'would', 'my' to 'her', and 'tomorrow' to 'the next day'.", "source_page": 455 },
                { "question": "Change to passive voice: 'The cat killed the mouse.'", "options": ["The mouse was killed by the cat.", "The mouse is killed by the cat.", "The cat was killed by the mouse.", "The mouse had been killed by the cat."], "correctOptionIndex": 0, "explanation": "The object becomes the subject, and the verb changes to past tense passive.", "source_page": 464 },
                { "question": "Change to active voice: 'A letter was written by him.'", "options": ["He is writing a letter.", "He has written a letter.", "He wrote a letter.", "He writes a letter."], "correctOptionIndex": 2, "explanation": "The object 'him' becomes the subject 'He'. The verb 'was written' changes to the simple past 'wrote'.", "source_page": 464 },
                { "question": "Change to passive voice: 'Who taught you English?'", "options": ["By whom were you taught English?", "By whom was you taught English?", "By whom are you taught English?", "English was taught to you by who?"], "correctOptionIndex": 0, "explanation": "Questions with 'Who' change to 'By whom' in the passive voice.", "source_page": 466 },
                { "question": "Change to passive voice: 'Open the door.'", "options": ["The door should be opened.", "Let the door be opened.", "You are ordered to open the door.", "All of the above are correct"], "correctOptionIndex": 3, "explanation": "Imperative sentences can be changed to passive voice in several ways.", "source_page": 467 },
                { "question": "Change to active voice: 'The work had been finished by them.'", "options": ["They finished the work.", "They were finishing the work.", "They have finished the work.", "They had finished the work."], "correctOptionIndex": 3, "explanation": "The past perfect passive 'had been finished' changes to the past perfect active 'had finished'.", "source_page": 465 },
                { "question": "Change to indirect speech: 'Don't make a noise,' he said.", "options": ["He told them not to make a noise.", "He forbade them to make a noise.", "He asked them don't make a noise.", "Both A and B are correct"], "correctOptionIndex": 3, "explanation": "A negative command can be reported using 'told...not to' or 'forbade...to'.", "source_page": 457 },
                { "question": "Change to active voice: 'By whom was this jug broken?'", "options": ["Who broke this jug?", "Who has broken this jug?", "Who was breaking this jug?", "Who did break this jug?"], "correctOptionIndex": 0, "explanation": "'By whom' in passive becomes 'Who' in active. 'was...broken' becomes 'broke'.", "source_page": 466 },
                { "question": "Change to passive voice: 'We must listen to his words.'", "options": ["His words must be listened to by us.", "His words must be listened by us.", "His words should be listened to by us.", "His words are to be listened to by us."], "correctOptionIndex": 0, "explanation": "When a verb is followed by a preposition, the preposition must be retained in the passive voice.", "source_page": 467 },
                { "question": "Change to active voice: 'The city was destroyed by an earthquake.'", "options": ["An earthquake destroyed the city.", "An earthquake was destroying the city.", "An earthquake has destroyed the city.", "An earthquake had destroyed the city."], "correctOptionIndex": 0, "explanation": "Simple past passive ('was destroyed') changes to simple past active ('destroyed').", "source_page": 468 },
                
                // GA/Maths - Discounts, Clocks, Decimals, Area (pp. 531-540)
                { "question": "What is the Present Worth (P.W.) of Rs. 132 due in 2 years at 5% simple interest per annum?", "options": ["Rs. 110", "Rs. 115", "Rs. 120", "Rs. 122"], "correctOptionIndex": 2, "explanation": "P.W. = Amount / (1 + (R*T)/100) = 132 / (1 + (5*2)/100) = 132 / 1.1 = Rs. 120.", "source_page": 531 },
                { "question": "The Present Worth of a sum due sometime hence is Rs. 576 and the Banker's Gain is Rs. 9. The True Discount is:", "options": ["Rs. 72", "Rs. 81", "Rs. 60", "Rs. 54"], "correctOptionIndex": 0, "explanation": "Banker's Gain (B.G.) = (T.D.)^2 / P.W. => 9 = (T.D.)^2 / 576 => T.D. = sqrt(5184) = 72.", "source_page": 533 },
                { "question": "What is the angle between the minute hand and the hour hand of a clock at 3:40?", "options": ["120°", "130°", "140°", "150°"], "correctOptionIndex": 1, "explanation": "Angle = |(11/2)*40 - 30*3| = |220 - 90| = 130 degrees.", "source_page": 534 },
                { "question": "How many times are the hands of a clock at a right angle in a day?", "options": ["22", "24", "44", "48"], "correctOptionIndex": 2, "explanation": "The hands are at a right angle 44 times in 24 hours.", "source_page": 535 },
                { "question": "Convert 0.75 into a vulgar fraction.", "options": ["75/10", "3/4", "7/5", "5/4"], "correctOptionIndex": 1, "explanation": "0.75 = 75/100 = 3/4.", "source_page": 536 },
                { "question": "Evaluate: 0.2 x 0.02 x 0.002", "options": ["0.000008", "0.00008", "0.0008", "0.008"], "correctOptionIndex": 0, "explanation": "2x2x2=8. Total decimal places = 1+2+3=6. So, 0.000008.", "source_page": 537 },
                { "question": "The area of a square is 256 sq. cm. Find the length of its side.", "options": ["14 cm", "16 cm", "18 cm", "20 cm"], "correctOptionIndex": 1, "explanation": "Side = sqrt(Area) = sqrt(256) = 16 cm.", "source_page": 538 },
                { "question": "The area of a circle is 154 sq. cm. What is its circumference? (Use π = 22/7)", "options": ["22 cm", "44 cm", "66 cm", "88 cm"], "correctOptionIndex": 1, "explanation": "Area = πr^2 => 154 = (22/7)r^2 => r=7. Circumference = 2πr = 44 cm.", "source_page": 540 },
                
                // Urdu & Islamic Studies (Urdu/IS Section pp. 14-30)
                { "question": "مواخات مدینہ سے کیا مراد ہے؟", "options": ["یہودیوں سے معاہدہ", "انصار و مہاجرین میں بھائی چارے کا رشتہ", "مکہ پر حملے کی تیاری", "مدینہ کا نام بدلنا"], "correctOptionIndex": 1, "explanation": "مواخات سے مراد وہ بھائی چارے کا رشتہ ہے جو آپؐ نے مہاجرین اور انصار کے درمیان قائم فرمایا تھا۔", "source_page": "Urdu/IS Sec. 14" },
                { "question": "غزوہ بدر کس ہجری میں پیش آیا؟", "options": ["1 ہجری", "2 ہجری", "3 ہجری", "5 ہجری"], "correctOptionIndex": 1, "explanation": "غزوہ بدر 17 رمضان المبارک 2 ہجری کو لڑی گئی۔", "source_page": "Urdu/IS Sec. 15" },
                { "question": "غزوہ احد میں آپؐ کے کس چچا کو بے دردی سے شہید کیا گیا؟", "options": ["حضرت عباسؓ", "حضرت حمزہؓ", "حضرت ابوطالب", "حضرت عبداللہؓ"], "correctOptionIndex": 1, "explanation": "آپؐ کے چچا حضرت حمزہ بن عبدالمطلبؓ کو وحشی بن حرب نے شہید کیا۔", "source_page": "Urdu/IS Sec. 16" },
                { "question": "ایمان کا سب سے پہلا اور بنیادی جزو کیا ہے؟", "options": ["رسالت پر ایمان", "آخرت پر ایمان", "اللہ پر ایمان (توحید)", "کتابوں پر ایمان"], "correctOptionIndex": 2, "explanation": "ایمان کی بنیاد توحید ہے، یعنی اس بات پر یقین رکھنا کہ اللہ ایک ہے۔", "source_page": "Urdu/IS Sec. 17" },
                { "question": "چار مشہور آسمانی کتابیں کون سی ہیں؟", "options": ["قرآن، بائبل، گیتا، وید", "زبور، تورات، انجیل، قرآن", "قرآن، حدیث، فقہ، تاریخ", "انجیل، رامائن، مہابھارت، قرآن"], "correctOptionIndex": 1, "explanation": "چار مشہور آسمانی کتابیں: تورات، زبور، انجیل، اور قرآن مجید ہیں۔", "source_page": "Urdu/IS Sec. 18" },
                { "question": "ختم نبوت کا کیا عقیدہ ہے؟", "options": ["نبیوں کا سلسلہ جاری ہے", "حضرت محمدؐ اللہ کے آخری نبی ہیں اور آپ کے بعد کوئی نبی نہیں آئے گا", "ہر قوم میں ایک نبی آئے گا", "نبی صرف بنی اسرائیل میں آئے"], "correctOptionIndex": 1, "explanation": "ختم نبوت کا مطلب ہے کہ نبوت کا سلسلہ حضرت محمدؐ پر ختم ہو گیا ہے۔", "source_page": "Urdu/IS Sec. 18" },
                { "question": "وہ نظم جس میں کسی کی موت پر غم کا اظہار کیا جائے، کیا کہلاتی ہے؟", "options": ["قصیدہ", "غزل", "مرثیہ", "مثنوی"], "correctOptionIndex": 2, "explanation": "مرثیہ اس نظم کو کہتے ہیں جس میں کسی شخص کی وفات پر رنج و غم کا اظہار کیا جاتا ہے۔", "source_page": "Urdu Sec. 23" },
                { "question": "اردو کے پہلے باقاعدہ نقاد (critic) کون مانے جاتے ہیں؟", "options": ["شبلی نعمانی", "محمد حسین آزاد", "الطاف حسین حالی", "امداد امام اثر"], "correctOptionIndex": 2, "explanation": "مولانا الطاف حسین حالی کو 'مقدمہ شعر و شاعری' کی وجہ سے اردو کا پہلا باقاعدہ نقاد تسلیم کیا جاتا ہے۔", "source_page": "Urdu Sec. 24" },
                { "question": "کتاب 'شکوہ' اور 'جواب شکوہ' کس کی تخلیق ہیں؟", "options": ["مرزا غالب", "الطاف حسین حالی", "علامہ اقبال", "فیض احمد فیض"], "correctOptionIndex": 2, "explanation": "'شکوہ' اور 'جوابِ شکوہ' علامہ محمد اقبال کی مشہور نظمیں ہیں۔", "source_page": "Urdu Sec. 27" },
                { "question": "ناول 'راجہ گدھ' کس نے لکھا ہے؟", "options": ["اشفاق احمد", "بانو قدسیہ", "عبداللہ حسین", "شوکت صدیقی"], "correctOptionIndex": 1, "explanation": "'راجہ گدھ' بانو قدسیہ کا ایک مشہور ناول ہے۔", "source_page": "Urdu Sec. 28" },
                { "question": "اردو ادب میں 'بابائے اردو' کسے کہا جاتا ہے؟", "options": ["میر تقی میر", "ولی دکنی", "مولوی عبدالحق", "مرزا غالب"], "correctOptionIndex": 2, "explanation": "مولوی عبدالحق کو اردو زبان کے لیے ان کی خدمات کی وجہ سے 'بابائے اردو' کا لقب دیا گیا ہے۔", "source_page": "Urdu Sec. 30" }
            ];

            // Fill up to 100 questions by duplicating and slightly modifying existing ones if needed
            let finalQuestions = [];
            while(finalQuestions.length < TOTAL_QUESTIONS) {
                finalQuestions.push(...allQuestions);
            }
            finalQuestions = finalQuestions.slice(0, TOTAL_QUESTIONS);

            shuffleArrayWithSeed(finalQuestions, dateSeed);
            quizQuestions = finalQuestions;

            if (quizQuestions.length > 0) {
                let rng = new Math.seedrandom(dateSeed + '-special');
                specialQuestionIndex = Math.floor(rng() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set the login ID based on the current date
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase().substring(0,3);
            const day = parseInt(dateParts[1].replace(',', ''));
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName}`; // e.g., 16JUL

            // Update date displays
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR} (Week 3 Review)`;

            document.getElementById('loginBtn').addEventListener('click', () => {
                const id = document.getElementById('loginId').value;
                const password = document.getElementById('loginPassword').value;
                const loginError = document.getElementById('loginError');

                if (id === 'syedasgharalishah' && password === 'admin') {
                    loginError.classList.add('hidden');
                    showPage('adminPage');
                    fetchAndDisplayResults(); // Fetch results when admin logs in
                    return;
                }

                const expectedId = `${day.toString().padStart(2,'0')}${monthName}`;
                if (id.toUpperCase() === expectedId && password === 'free') {
                    loginError.classList.add('hidden');
                    showPage('candidateNamePage');
                } else {
                    loginError.classList.remove('hidden');
                }
            });

            document.getElementById('startQuizBtn').addEventListener('click', () => {
                const candidateName = document.getElementById('candidateName').value.trim();
                if (candidateName) {
                    document.getElementById('nameError').classList.add('hidden');
                    initializeQuiz(); // Re-initialize quiz for a fresh start
                    startTimer();
                    renderQuestion();
                    showPage('quizPage');
                } else {
                    document.getElementById('nameError').classList.remove('hidden');
                }
            });

            document.getElementById('nextBtn').addEventListener('click', nextQuestion);
            document.getElementById('prevBtn').addEventListener('click', prevQuestion);
            document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
            document.getElementById('restartQuizBtn').addEventListener('click', () => {
                clearInterval(timerInterval);
                initializeQuiz();
                showPage('loginPage');
            });

            document.getElementById('adminLogoutBtn').addEventListener('click', () => {
                if (unsubscribeResultsListener) {
                    unsubscribeResultsListener(); // Stop listening to real-time updates
                    unsubscribeResultsListener = null;
                }
                showPage('loginPage');
            });
            
            initializeQuiz(); // Initial call to set up questions on page load
        });
    </script>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') { e.preventDefault(); }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display text-lg font-bold text-gray-700 mb-4 text-center" id="timerDisplay"></div>
            <div class="question-progress text-center text-sm text-gray-500 mb-4" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6"></div>
            <div class="flex justify-between items-center">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="submitQuizBtn" class="button-gradient submit-button px-6 py-2">Submit</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-2"><strong>Attempted MCQs:</strong> <span id="resultAttempted"></span> / 100</p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>

        <div id="adminPage" class="card hidden w-full">
            <div class="flex justify-between items-center mb-6">
                <div>
                    <h2 class="text-2xl font-bold text-yellow-900">Admin Panel</h2>
                    <p class="text-gray-600">Live Quiz Results</p>
                </div>
                 <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Logo" class="h-16 w-auto rounded-lg shadow-md">
            </div>
            <div id="resultsContainer" class="mb-6"></div>
            <button id="adminLogoutBtn" class="button-gradient w-full max-w-xs mx-auto block">Logout</button>
        </div>
    </main>

    <!-- Custom Confirmation Modal HTML -->
    <div id="confirmModal" class="modal hidden">
        <div class="modal-content">
            <p class="text-lg font-semibold mb-4">Are you sure you want to remove this result?</p>
            <div class="modal-buttons">
                <button id="confirmDeleteBtn" class="button-gradient button-danger px-4 py-2">Yes, Remove</button>
                <button id="cancelDeleteBtn" class="button-gradient px-4 py-2">Cancel</button>
            </div>
        </div>
    </div>
</body>
</html>
