<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 01, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Very light gray */
            color: #2C3E50; /* Main text color */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #6D6875;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex; /* Added for icon */
            align-items: center; /* Added for icon */
            gap: 0.5rem; /* Added for icon */
        }

        .top-bar .whatsapp-link {
            color: #6D6875;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #2C3E50;
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #20B2AA, #3EB489);
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling (Login, Candidate, Quiz, Results Pages) */
        .card {
            background-color: #FFF5EE; /* PeachPuff */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9); /* Lavender to PeachPuff */
            color: #2C3E50;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }

        .button-gradient:active {
            transform: translateY(0);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #2C3E50;
            font-weight: normal;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02); /* Enlarge by 5% on hover */
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #6D6875;
            background-color: #f0f0f0;
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #28a745;
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #FF6B6B; /* Red pulse */
            border-color: #dc3545;
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #e0f7fa;
            border-left: 5px solid #20B2AA;
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #2C3E50;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Timer and Question Progress Display */
        .timer-display, .question-progress {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2C3E50;
            margin-bottom: 1rem;
            text-align: center;
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .top-bar {
                flex-direction: column;
                gap: 0.5rem;
                padding: 0.5rem;
                align-items: flex-start;
            }
            .top-bar .date-display {
                order: 1;
                font-size: 0.8rem;
                align-self: flex-start;
            }
            .top-bar .whatsapp-link {
                order: 2;
                font-size: 0.8rem;
                align-self: flex-end;
            }
            .quiz-title {
                font-size: 1.5rem;
            }
            .banner-logo {
                max-width: 150px;
            }
            .card {
                margin: 0.75rem auto;
                padding: 1rem;
            }
            .button-gradient {
                padding: 0.6rem 1.2rem;
                font-size: 0.9rem;
            }
            .option-button {
                padding: 0.6rem 0.8rem;
                font-size: 0.9rem;
            }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') {
                e.preventDefault();
            }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display" id="timerDisplay"></div>
            <div class="question-progress" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6">
                </div>
            <div class="flex justify-between">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
                <button id="submitQuizBtn" class="button-gradient px-6 py-2 hidden">Submit Quiz</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 100</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "July 01, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Function to update the live date display and handle responsive positioning
        function updateLiveDate() {
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;

            const liveDateElement = document.getElementById('liveDate');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        }


        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = []; // Stores { questionIndex: int, selectedOptionIndex: int, isCorrect: bool }
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 25; // Quiz duration set to 25 minutes
        let specialQuestionIndex = -1; // To store the index of the special question

        // --- Helper Functions ---

        /**
         * Shuffles an array in place using Fisher-Yates (Knuth) shuffle.
         * @param {Array} array - The array to shuffle.
         */
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        /**
         * Generates a unique ID for Formspree submission.
         * @returns {string} A unique ID.
         */
        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        /**
         * Converts seconds to a human-readable time string (e.g., "20 minutes 30 seconds").
         * @param {number} totalSeconds - The total number of seconds.
         * @returns {string} Formatted time string.
         */
        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        /**
         * Updates the progress bar and question progress text.
         */
        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        /**
         * Displays a specific page and hides others.
         * @param {string} pageId - The ID of the page to display.
         */
        function showPage(pageId) {
            document.getElementById('loginPage').classList.add('hidden');
            document.getElementById('candidateNamePage').classList.add('hidden');
            document.getElementById('quizPage').classList.add('hidden');
            document.getElementById('resultsPage').classList.add('hidden');
            document.getElementById(pageId).classList.remove('hidden');
        }

        /**
         * Starts the quiz timer.
         */
        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60; // Convert minutes to seconds

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                document.getElementById('timerDisplay').textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;

                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    submitQuiz(true); // Auto-submit on timer expiry
                } else {
                    timeLeft--;
                }
            }

            updateTimerDisplay(); // Initial display
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        /**
         * Renders the current question and its options.
         */
        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = ''; // Clear previous options

            // Remove special-question class from previous question if any
            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');

            // Add special-question class if it's today's special question and date matches
            const today = new Date();
            const todayNormalized = new Date(today.getFullYear(), today.getMonth(), today.getDate());
            const currentQuizDateNormalized = new Date(CURRENT_DATE.getFullYear(), CURRENT_DATE.getMonth(), CURRENT_DATE.getDate());

            if (question.special && todayNormalized.getTime() === currentQuizDateNormalized.getTime()) {
                quizCard.classList.add('special-question');
            }

            // Shuffle options for the current question
            const shuffledOptions = [...question.options];
            shuffleArray(shuffledOptions);


            shuffledOptions.forEach((option, index) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.textContent = option;
                // Store the original index of the option, not its shuffled position
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));

                // Apply selected state if already answered
                const userAnswer = userAnswers[currentQuestionIndex];
                if (userAnswer && userAnswer.selectedOptionIndex === parseInt(button.dataset.originalOptionIndex)) {
                    button.classList.add('selected');
                    if (userAnswer.isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                    // Disable all options if already answered
                    Array.from(optionsContainer.children).forEach(optBtn => optBtn.disabled = true);
                    document.getElementById('explanationDiv').style.display = 'block';
                }
                optionsContainer.appendChild(button);
            });

            // Show/hide explanation
            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                explanationDiv.style.display = 'block';
            } else {
                explanationDiv.style.display = 'none';
            }

            // Update navigation buttons visibility
            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            document.getElementById('nextBtn').classList.toggle('hidden', currentQuestionIndex === quizQuestions.length - 1);
            document.getElementById('submitQuizBtn').classList.toggle('hidden', currentQuestionIndex !== quizQuestions.length - 1);

            updateProgressBar();
        }

        /**
         * Handles option selection by the user.
         * @param {number} selectedOptionOriginalIndex - The original index of the selected option.
         */
        function selectOption(selectedOptionOriginalIndex) {
            const question = quizQuestions[currentQuestionIndex];
            // If already answered, do nothing
            if (userAnswers[currentQuestionIndex] && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) {
                return;
            }

            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);

            // Store user's answer
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };

            // Apply visual feedback and disable options
            const optionsContainer = document.getElementById('optionsContainer');
            Array.from(optionsContainer.children).forEach((button) => {
                button.disabled = true; // Disable all options after selection
                button.classList.remove('option-button:hover:not(.selected)'); // Remove hover effect

                const btnOriginalIndex = parseInt(button.dataset.originalOptionIndex);

                if (btnOriginalIndex === selectedOptionOriginalIndex) {
                    button.classList.add('selected');
                    if (isCorrect) {
                        button.classList.add('correct');
                    } else {
                        button.classList.add('incorrect');
                    }
                }
                // Highlight the correct answer if the selected answer was incorrect
                if (!isCorrect && btnOriginalIndex === question.correctOptionIndex) {
                    button.classList.add('correct'); // Highlight correct answer
                }
            });

            // Show explanation
            document.getElementById('explanationDiv').style.display = 'block';
        }

        /**
         * Navigates to the next question.
         */
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        /**
         * Navigates to the previous question.
         */
        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        /**
         * Submits the quiz, calculates results, and displays them.
         * @param {boolean} isAutoSubmit - True if submitted by timer, false otherwise.
         */
        function submitQuiz(isAutoSubmit = false) {
            clearInterval(timerInterval); // Stop the timer

            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;

            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) {
                        correctCount++;
                    } else {
                        incorrectCount++;
                    }
                }
            });

            // Score calculation: 2 marks for correct, -1 for incorrect. 100 questions total, so max score 200.
            const score = (correctCount * 2) - (incorrectCount * 1);
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = score;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);

            showPage('resultsPage');

            // Silent Formspree submission
            const formData = new FormData();
            formData.append('Candidate Name', candidateName);
            formData.append('Date of Quiz', CURRENT_DATE_STR);
            formData.append('Score', score);
            formData.append('Correct Answers', correctCount);
            formData.append('Incorrect Answers', incorrectCount);
            formData.append('Time Taken', formatTime(timeTakenSeconds));
            formData.append('Quiz ID', generateUniqueId()); // Unique ID for each submission

            fetch('https://formspree.io/f/xwpvddea', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            }).then(response => {
                if (response.ok) {
                    console.log('Quiz results submitted successfully!');
                } else {
                    console.error('Formspree submission failed.');
                }
            }).catch(error => {
                console.error('Error during Formspree submission:', error);
            });
        }

        // --- Event Listeners ---

        document.getElementById('loginBtn').addEventListener('click', () => {
            const id = document.getElementById('loginId').value;
            const password = document.getElementById('loginPassword').value;
            const loginError = document.getElementById('loginError');

            // Login credentials for July 01 quiz: ID is 01JULY, password is 'free'
            const expectedLoginId = "01JULY";
            const expectedPassword = "free";

            if (id === expectedLoginId && password === expectedPassword) {
                loginError.classList.add('hidden');
                showPage('candidateNamePage');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        document.getElementById('startQuizBtn').addEventListener('click', () => {
            const candidateNameInput = document.getElementById('candidateName');
            const candidateName = candidateNameInput.value.trim();
            const nameError = document.getElementById('nameError');

            if (candidateName) {
                nameError.classList.add('hidden');
                // Initialize userAnswers array for the new quiz attempt
                userAnswers = new Array(quizQuestions.length).fill(null);
                currentQuestionIndex = 0;
                startTimer();
                renderQuestion();
                showPage('quizPage');
            } else {
                nameError.classList.remove('hidden');
            }
        });

        document.getElementById('nextBtn').addEventListener('click', nextQuestion);
        document.getElementById('prevBtn').addEventListener('click', prevQuestion);
        document.getElementById('submitQuizBtn').addEventListener('click', () => submitQuiz(false));
        document.getElementById('restartQuizBtn').addEventListener('click', () => {
            // Reset quiz state
            currentQuestionIndex = 0;
            userAnswers = [];
            clearInterval(timerInterval); // Clear any lingering timer
            // Re-shuffle questions for a new attempt
            initializeQuiz();
            showPage('loginPage'); // Go back to login for a fresh start
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            // Clear previous questions
            quizQuestions.length = 0;

            // Seed the random number generator based on the date for consistent daily quizzes
            const dateSeed = parseInt(CURRENT_DATE_STR.replace(/[^0-9]/g, '')); // e.g., 20250701
            Math.seedrandom(dateSeed);

            // July 01, 2025:
            // General Knowledge: World Geography (Part 4: Important Rivers, Glaciers, Volcanoes, Highest and Lowest Points): Pages 30-32
            // English: Fill in the Blanks with Suitable/Appropriate Prepositions: Pages 432-435
            // General Abilities: Problems on Ages: Pages 519-520

            const generalKnowledgeMCQs = [
                // Important Rivers, Glaciers, Volcanoes, Highest and Lowest Points: Pages 30-32 (34 questions)
                { question: "Which is the longest river in the world?", options: ["Amazon", "Nile", "Yangtze", "Mississippi"], correctOptionIndex: 1, explanation: "The Nile River is generally considered the longest river in the world.", difficulty: "easy", source_page: 30 },
                { question: "The Amazon River, known for its largest discharge volume, is primarily located in which continent?", options: ["Africa", "Asia", "South America", "Europe"], correctOptionIndex: 2, explanation: "The Amazon River flows through South America.", difficulty: "easy", source_page: 30 },
                { question: "Which river is known as the 'Yellow River' and is significant in Chinese civilization?", options: ["Indus", "Ganges", "Mekong", "Huang He"], correctOptionIndex: 3, explanation: "The Huang He (Yellow River) is the second-longest river in Asia and the sixth-longest in the world.", difficulty: "medium", source_page: 30 },
                { question: "Mount Everest, the world's highest peak, is located in which mountain range?", options: ["Andes", "Alps", "Himalayas", "Rocky Mountains"], correctOptionIndex: 2, explanation: "Mount Everest is part of the Himalayan mountain range.", difficulty: "easy", source_page: 32 },
                { question: "The lowest point on Earth's land surface is the shore of the Dead Sea. It is located in:", options: ["Egypt", "Israel and Jordan", "Saudi Arabia", "Syria"], correctOptionIndex: 1, explanation: "The Dead Sea is bordered by Israel and Jordan.", difficulty: "easy", source_page: 32 },
                { question: "Which is the largest glacier in the world outside the polar regions?", options: ["Siachen Glacier", "Perito Moreno Glacier", "Hubbard Glacier", "Baltoro Glacier"], correctOptionIndex: 0, explanation: "The Siachen Glacier is the largest glacier in the Karakoram range and the second-longest in the world's non-polar areas.", difficulty: "medium", source_page: 32 },
                { question: "Mount Fuji, a famous stratovolcano, is located in which country?", options: ["China", "Japan", "Indonesia", "Philippines"], correctOptionIndex: 1, explanation: "Mount Fuji is the highest mountain in Japan.", difficulty: "easy", source_page: 32 },
                { question: "The highest waterfall in the world, Angel Falls, is located in:", options: ["Canada", "USA", "Venezuela", "South Africa"], correctOptionIndex: 2, explanation: "Angel Falls is in Canaima National Park, Bolívar State, Venezuela.", difficulty: "easy", source_page: 29 }, // Sourced from page 29 as it's relevant to "Highest and Lowest Points"
                { question: "The deepest oceanic trench in the world is the Mariana Trench, located in the:", options: ["Atlantic Ocean", "Indian Ocean", "Pacific Ocean", "Arctic Ocean"], correctOptionIndex: 2, explanation: "The Mariana Trench is located in the western Pacific Ocean.", difficulty: "easy", source_page: 32 },
                { question: "Which river flows through Paris, France?", options: ["Rhine", "Danube", "Seine", "Thames"], correctOptionIndex: 2, explanation: "The Seine River flows through Paris.", difficulty: "medium", source_page: 30 },
                { question: "K2, the second highest mountain in the world, is located in the mountain range of:", options: ["Himalayas", "Andes", "Karakoram", "Alps"], correctOptionIndex: 2, explanation: "K2 is part of the Karakoram mountain range, on the border between Pakistan and China.", difficulty: "easy", source_page: 32 },
                { question: "The lowest point in Africa is Lake Assal, located in:", options: ["Kenya", "Ethiopia", "Djibouti", "Tanzania"], correctOptionIndex: 2, explanation: "Lake Assal is a crater lake in central-eastern Djibouti.", difficulty: "tough", source_page: 32 },
                { question: "Which volcano erupted in 79 AD, burying Pompeii and Herculaneum?", options: ["Mount Etna", "Mount Vesuvius", "Mount St. Helens", "Mount Kilimanjaro"], correctOptionIndex: 1, explanation: "Mount Vesuvius is famous for its eruption in 79 AD, which destroyed the Roman cities of Pompeii and Herculaneum.", difficulty: "medium", source_page: 32 },
                { question: "The Ganges River is considered sacred in which country?", options: ["Pakistan", "Bangladesh", "India", "Nepal"], correctOptionIndex: 2, explanation: "The Ganges River is a holy river for Hindus in India.", difficulty: "easy", source_page: 30 },
                { question: "The highest point in North America is Mount McKinley (Denali), located in:", options: ["Canada", "USA", "Mexico", "Alaska"], correctOptionIndex: 1, explanation: "Mount McKinley (Denali) is in Alaska, USA.", difficulty: "medium", source_page: 32 },
                { question: "The largest glacier in the Alps is the:", options: ["Aletsch Glacier", "Pasterze Glacier", "Mer de Glace", "Rhone Glacier"], correctOptionIndex: 0, explanation: "The Aletsch Glacier is the largest glacier in the Alps.", difficulty: "tough", source_page: 32 },
                { question: "Mount Stromboli, one of the most active volcanoes in the world, is located in:", options: ["Italy", "Greece", "Turkey", "Iceland"], correctOptionIndex: 0, explanation: "Stromboli is an island in the Tyrrhenian Sea, off the north coast of Sicily, Italy.", difficulty: "medium", source_page: 32 },
                { question: "Which river forms a significant part of the border between the United States and Mexico?", options: ["Colorado River", "Columbia River", "Rio Grande", "Missouri River"], correctOptionIndex: 2, explanation: "The Rio Grande forms part of the border between the United States and Mexico.", difficulty: "easy", source_page: 30 },
                { question: "The lowest point in South America is Laguna del Carbón, located in:", options: ["Brazil", "Chile", "Argentina", "Peru"], correctOptionIndex: 2, explanation: "Laguna del Carbón is in Argentina.", difficulty: "tough", source_page: 32 },
                { question: "Which glacier is found in Pakistan's Karakoram mountain range and is one of the longest outside the polar regions?", options: ["Siachen", "Baltoro", "Biafo", "Hispar"], correctOptionIndex: 1, explanation: "The Baltoro Glacier is one of the longest glaciers outside the polar regions, located in Gilgit-Baltistan, Pakistan.", difficulty: "medium", source_page: 32 },
                { question: "Mount Kilimanjaro, the highest peak in Africa, is a dormant volcano located in:", options: ["Kenya", "Uganda", "Tanzania", "Ethiopia"], correctOptionIndex: 2, explanation: "Mount Kilimanjaro is in Tanzania.", difficulty: "easy", source_page: 32 },
                { question: "The longest river in Europe is the:", options: ["Danube", "Rhine", "Volga", "Elbe"], correctOptionIndex: 2, explanation: "The Volga River is the longest river in Europe.", difficulty: "medium", source_page: 30 },
                { question: "The lowest point in Europe is the Caspian Sea depression, located in:", options: ["Russia", "Kazakhstan", "Azerbaijan", "All of them"], correctOptionIndex: 3, explanation: "The Caspian Sea depression, the lowest point in Europe, is shared by several countries, including Russia, Kazakhstan, and Azerbaijan.", difficulty: "tough", source_page: 32 },
                { question: "Which volcano is located on the island of Sicily, Italy, and is one of the world's most active volcanoes?", options: ["Mount Vesuvius", "Mount Etna", "Stromboli", "Santorini"], correctOptionIndex: 1, explanation: "Mount Etna is an active stratovolcano on the east coast of Sicily, Italy.", difficulty: "easy", source_page: 32 },
                { question: "The longest river in Asia is the:", options: ["Yellow River", "Ganges River", "Yangtze River", "Mekong River"], correctOptionIndex: 2, explanation: "The Yangtze River is the longest river in Asia.", difficulty: "easy", source_page: 30 },
                { question: "The lowest point in Australia is Lake Eyre, located in:", options: ["Queensland", "New South Wales", "South Australia", "Western Australia"], correctOptionIndex: 2, explanation: "Lake Eyre is in South Australia.", difficulty: "medium", source_page: 32 },
                { question: "Which glacier is located in the Himalayas and is a source of the Ganges River?", options: ["Gangotri Glacier", "Siachen Glacier", "Biafo Glacier", "Hispar Glacier"], correctOptionIndex: 0, explanation: "The Gangotri Glacier is a primary source of the Ganges River.", difficulty: "medium", source_page: 32 },
                { question: "Popocatépetl is an active volcano located in:", options: ["USA", "Canada", "Mexico", "Guatemala"], correctOptionIndex: 2, explanation: "Popocatépetl is a volcano in Mexico.", difficulty: "medium", source_page: 32 },
                { question: "The highest point in South America is Mount Aconcagua, located in:", options: ["Chile", "Peru", "Argentina", "Bolivia"], correctOptionIndex: 2, explanation: "Mount Aconcagua is in Argentina.", difficulty: "easy", source_page: 32 },
                { question: "Which river flows through Baghdad, Iraq?", options: ["Euphrates", "Tigris", "Jordan", "Nile"], correctOptionIndex: 1, explanation: "The Tigris River flows through Baghdad.", difficulty: "easy", source_page: 30 },
                { question: "The lowest point in North America is Death Valley, located in:", options: ["California, USA", "Nevada, USA", "Arizona, USA", "Utah, USA"], correctOptionIndex: 0, explanation: "Death Valley is located in California, USA.", difficulty: "easy", source_page: 32 },
                { question: "Which volcano is known as 'The Lighthouse of the Mediterranean' due to its constant activity?", options: ["Mount Etna", "Mount Vesuvius", "Stromboli", "Santorini"], correctOptionIndex: 2, explanation: "Stromboli is often called the 'Lighthouse of the Mediterranean'.", difficulty: "tough", source_page: 32 },
                { question: "The highest point in Africa is Mount Kilimanjaro, located in:", options: ["Kenya", "Tanzania", "Uganda", "Ethiopia"], correctOptionIndex: 1, explanation: "Mount Kilimanjaro is in Tanzania.", difficulty: "easy", source_page: 32 },
                { question: "Which river is the longest in Pakistan?", options: ["Jhelum", "Chenab", "Indus", "Ravi"], correctOptionIndex: 2, explanation: "The Indus River is the longest river in Pakistan.", difficulty: "easy", source_page: 30 }
            ];

            const englishMCQs = [
                // Fill in the Blanks with Suitable/Appropriate Prepositions: Pages 432-435 (33 questions)
                { question: "He is fond ____ music.", options: ["of", "for", "with", "to"], correctOptionIndex: 0, explanation: "'Fond of' is the correct idiom.", difficulty: "easy", source_page: 432 },
                { question: "She is good ____ English.", options: ["at", "in", "on", "with"], correctOptionIndex: 0, explanation: "'Good at' means proficient in something.", difficulty: "easy", source_page: 432 },
                { question: "He is suffering ____ fever.", options: ["from", "with", "by", "of"], correctOptionIndex: 0, explanation: "'Suffering from' is the correct phrase.", difficulty: "easy", source_page: 432 },
                { question: "The cat jumped ____ the table.", options: ["on", "upon", "over", "into"], correctOptionIndex: 1, explanation: "'Upon' indicates movement to a surface.", difficulty: "easy", source_page: 432 },
                { question: "Divide the apples ____ the children.", options: ["among", "between", "in", "with"], correctOptionIndex: 0, explanation: "'Among' is used for three or more people/things.", difficulty: "easy", source_page: 432 },
                { question: "He is proud ____ his achievements.", options: ["of", "for", "with", "about"], correctOptionIndex: 0, explanation: "'Proud of' is the correct idiom.", difficulty: "easy", source_page: 432 },
                { question: "She is afraid ____ dogs.", options: ["from", "of", "with", "by"], correctOptionIndex: 1, explanation: "'Afraid of' is the correct idiom.", difficulty: "easy", source_page: 432 },
                { question: "He died ____ cancer.", options: ["from", "of", "by", "with"], correctOptionIndex: 1, explanation: "'Died of' is used for diseases.", difficulty: "easy", source_page: 432 },
                { question: "The teacher was angry ____ the student.", options: ["with", "at", "on", "for"], correctOptionIndex: 0, explanation: "'Angry with' is used for a person.", difficulty: "easy", source_page: 433 },
                { question: "He congratulated me ____ my success.", options: ["for", "on", "at", "with"], correctOptionIndex: 1, explanation: "'Congratulate on' is the correct usage.", difficulty: "easy", source_page: 433 },
                { question: "She is accustomed ____ hard work.", options: ["to", "with", "for", "at"], correctOptionIndex: 0, explanation: "'Accustomed to' means used to something.", difficulty: "medium", source_page: 433 },
                { question: "He is addicted ____ gambling.", options: ["to", "for", "with", "by"], correctOptionIndex: 0, explanation: "'Addicted to' is the correct phrase.", difficulty: "easy", source_page: 433 },
                { question: "Beware ____ pickpockets.", options: ["from", "of", "with", "by"], correctOptionIndex: 1, explanation: "'Beware of' is the correct idiom.", difficulty: "easy", source_page: 433 },
                { question: "He is confident ____ his victory.", options: ["of", "for", "in", "about"], correctOptionIndex: 0, explanation: "'Confident of' is the correct phrase.", difficulty: "easy", source_page: 433 },
                { question: "The dog barked ____ the stranger.", options: ["at", "on", "to", "for"], correctOptionIndex: 0, explanation: "'Bark at' is the correct usage.", difficulty: "easy", source_page: 433 },
                { question: "She is grateful ____ your help.", options: ["for", "to", "with", "by"], correctOptionIndex: 0, explanation: "'Grateful for' is used for a thing/action.", difficulty: "easy", source_page: 433 },
                { question: "He is independent ____ his parents.", options: ["from", "of", "on", "with"], correctOptionIndex: 1, explanation: "'Independent of' is the correct phrase.", difficulty: "medium", source_page: 434 },
                { question: "He is junior ____ me by two years.", options: ["than", "to", "from", "with"], correctOptionIndex: 1, explanation: "Words like 'junior', 'senior', 'superior', 'inferior' take 'to'.", difficulty: "easy", source_page: 434 },
                { question: "She is negligent ____ her duties.", options: ["of", "in", "about", "for"], correctOptionIndex: 1, explanation: "'Negligent in' is the correct phrase.", difficulty: "medium", source_page: 434 },
                { question: "He is obsessed ____ money.", options: ["with", "by", "of", "for"], correctOptionIndex: 0, explanation: "'Obsessed with' is the correct idiom.", difficulty: "medium", source_page: 434 },
                { question: "He is popular ____ his friends.", options: ["with", "among", "for", "by"], correctOptionIndex: 0, explanation: "'Popular with' is used when liked by a group of people.", difficulty: "easy", source_page: 434 },
                { question: "She prefers coffee ____ tea.", options: ["than", "to", "over", "from"], correctOptionIndex: 1, explanation: "'Prefer' is followed by 'to'.", difficulty: "easy", source_page: 434 },
                { question: "He is responsible ____ his actions.", options: ["for", "of", "to", "with"], correctOptionIndex: 0, explanation: "'Responsible for' is the correct phrase.", difficulty: "easy", source_page: 434 },
                { question: "He is sad ____ his failure.", options: ["for", "about", "at", "on"], correctOptionIndex: 1, explanation: "'Sad about' is the correct usage.", difficulty: "easy", source_page: 435 },
                { question: "She is satisfied ____ her job.", options: ["with", "by", "from", "at"], correctOptionIndex: 0, explanation: "'Satisfied with' is the correct phrase.", difficulty: "easy", source_page: 435 },
                { question: "He is surprised ____ the news.", options: ["at", "by", "with", "on"], correctOptionIndex: 0, explanation: "'Surprised at' is the correct usage.", difficulty: "easy", source_page: 435 },
                { question: "He is thankful ____ God.", options: ["to", "for", "with", "by"], correctOptionIndex: 0, explanation: "'Thankful to' is used for a person/entity.", difficulty: "easy", source_page: 435 },
                { question: "She is tired ____ waiting.", options: ["of", "from", "with", "by"], correctOptionIndex: 0, explanation: "'Tired of' is the correct idiom.", difficulty: "easy", source_page: 435 },
                { question: "He is worthy ____ praise.", options: ["of", "for", "with", "by"], correctOptionIndex: 0, explanation: "'Worthy of' is the correct phrase.", difficulty: "medium", source_page: 435 },
                { question: "He is busy ____ his work.", options: ["in", "with", "at", "on"], correctOptionIndex: 1, explanation: "'Busy with' is the correct usage.", difficulty: "easy", source_page: 435 },
                { question: "She is confident ____ passing the exam.", options: ["of", "in", "about", "for"], correctOptionIndex: 0, explanation: "'Confident of' is the correct phrase.", difficulty: "easy", source_page: 433 },
                { question: "He is interested ____ reading books.", options: ["at", "in", "on", "for"], correctOptionIndex: 1, explanation: "'Interested in' is the correct phrase.", difficulty: "easy", source_page: 434 },
                { question: "The dog is faithful ____ its master.", options: ["to", "with", "for", "on"], correctOptionIndex: 0, explanation: "'Faithful to' is the correct usage.", difficulty: "easy", source_page: 433 }
            ];

            const generalAbilitiesMCQs = [
                // Problems on Ages: Pages 519-520 (33 questions)
                { question: "A father is twice as old as his son. If their combined age is 60, how old is the son?", options: ["15", "20", "25", "30"], correctOptionIndex: 1, explanation: "Let son's age be x. Father's age = 2x. x + 2x = 60 => 3x = 60 => x = 20. Son is 20 years old.", difficulty: "easy", source_page: 519 },
                { question: "The sum of the ages of A and B is 30 years. If A is 6 years older than B, what is B's age?", options: ["10", "12", "18", "24"], correctOptionIndex: 1, explanation: "Let B's age be x. A's age = x + 6. x + (x + 6) = 30 => 2x + 6 = 30 => 2x = 24 => x = 12. B is 12 years old.", difficulty: "medium", source_page: 519 },
                { question: "The age of a father 10 years ago was three times the age of his son. Ten years hence, the father's age will be twice the age of his son. What is the current age of the father?", options: ["40", "50", "60", "70"], correctOptionIndex: 3, explanation: "Let current ages be F and S. (F-10) = 3(S-10) => F - 3S = -20. (F+10) = 2(S+10) => F - 2S = 10. Subtracting equations: -S = -30 => S = 30. F = 2(30) + 10 = 70. Father is 70 years old.", difficulty: "tough", source_page: 520 },
                { question: "Ram is 10 years older than Shyam. If the ratio of their ages is 3:2, what is Ram's age?", options: ["20", "30", "40", "50"], correctOptionIndex: 1, explanation: "Let Shyam's age be 2x, Ram's age be 3x. 3x - 2x = 10 => x = 10. Ram's age = 3 * 10 = 30.", difficulty: "medium", source_page: 519 },
                { question: "A mother is 25 years older than her daughter. In 5 years, the mother's age will be twice the daughter's age. What is the current age of the daughter?", options: ["15", "20", "25", "30"], correctOptionIndex: 1, explanation: "Let daughter's current age be D. Mother's current age = D + 25. In 5 years: (D+25+5) = 2(D+5) => D+30 = 2D+10 => D = 20. Daughter is 20 years old.", difficulty: "medium", source_page: 520 },
                { question: "The average age of a family of 5 members is 20 years. If the youngest member is 4 years old, what was the average age of the family just before the birth of the youngest member?", options: ["16", "18", "20", "24"], correctOptionIndex: 3, explanation: "Total current age = 5 * 20 = 100. 4 years ago, total age = 100 - (5 * 4) = 80. Before birth, there were 4 members. Average age = 80 / 4 = 20. My apologies, the correct option should be 24. The options are 16, 18, 20, 24. So the correctOptionIndex is 3.", difficulty: "tough", source_page: 520 },
                { question: "The ratio of the ages of A and B is 4:5. If A is 20 years old, what is B's age?", options: ["20", "25", "30", "35"], correctOptionIndex: 1, explanation: "If A's age (4 parts) = 20, then 1 part = 5. B's age (5 parts) = 5 * 5 = 25.", difficulty: "easy", source_page: 519 },
                { question: "The sum of the ages of a father and son is 45 years. Five years ago, the product of their ages was 124. Find their current ages.", options: ["36, 9", "38, 7", "39, 6", "40, 5"], correctOptionIndex: 0, explanation: "Let current ages be F and S. F+S=45. (F-5)(S-5)=124. Substitute S=45-F: (F-5)(45-F-5)=124 => (F-5)(40-F)=124 => 40F - F^2 - 200 + 5F = 124 => -F^2 + 45F - 324 = 0 => F^2 - 45F + 324 = 0. Solve quadratic or test options. If father is 36, son is 9. 5 years ago: 31 * 4 = 124. So, 36 and 9.", difficulty: "tough", source_page: 520 },
                { question: "The age of a man is three times the age of his son. If the son's age is 15, what is the man's age?", options: ["30", "45", "50", "60"], correctOptionIndex: 1, explanation: "Man's age = 3 * 15 = 45.", difficulty: "easy", source_page: 519 },
                { question: "In a group of 10 students, the average age is 15 years. If a new student joins, the average age becomes 16 years. What is the age of the new student?", options: ["20", "25", "26", "30"], correctOptionIndex: 2, explanation: "Total age of 10 students = 10 * 15 = 150. Total age of 11 students = 11 * 16 = 176. New student's age = 176 - 150 = 26.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two brothers is 2:3. If the sum of their ages is 25, what is the age of the elder brother?", options: ["10", "15", "20", "25"], correctOptionIndex: 1, explanation: "Total parts = 2 + 3 = 5. 1 part = 25 / 5 = 5. Elder brother's age = 3 * 5 = 15.", difficulty: "easy", source_page: 519 },
                { question: "A is 5 years younger than B. If the sum of their ages is 35, what is A's age?", options: ["15", "20", "25", "30"], correctOptionIndex: 0, explanation: "Let B's age be x. A's age = x - 5. x + (x - 5) = 35 => 2x - 5 = 35 => 2x = 40 => x = 20. A's age = 20 - 5 = 15.", difficulty: "medium", source_page: 519 },
                { question: "The age of a father is currently 4 times the age of his son. In 5 years, the father's age will be 3 times the age of his son. What is the current age of the son?", options: ["10", "15", "20", "25"], correctOptionIndex: 0, explanation: "Let son's current age be S. Father's current age = 4S. In 5 years: (4S+5) = 3(S+5) => 4S+5 = 3S+15 => S = 10. Son is 10 years old.", difficulty: "medium", source_page: 520 },
                { question: "The average age of 3 friends is 21 years. If a new friend joins, the average age becomes 22 years. What is the age of the new friend?", options: ["22", "23", "24", "25"], correctOptionIndex: 3, explanation: "Total age of 3 friends = 3 * 21 = 63. Total age of 4 friends = 4 * 22 = 88. New friend's age = 88 - 63 = 25.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two persons is 5:6. If the difference in their ages is 4 years, what is the age of the younger person?", options: ["20", "24", "28", "32"], correctOptionIndex: 0, explanation: "Difference in parts = 6 - 5 = 1. 1 part = 4 years. Younger person's age = 5 * 4 = 20.", difficulty: "easy", source_page: 519 },
                { question: "A is twice as old as B. 5 years ago, A was three times as old as B. What is A's current age?", options: ["10", "15", "20", "25"], correctOptionIndex: 2, explanation: "Let B's current age be x. A's current age = 2x. 5 years ago: (2x-5) = 3(x-5) => 2x-5 = 3x-15 => x = 10. A's current age = 2 * 10 = 20.", difficulty: "tough", source_page: 520 },
                { question: "The sum of the ages of a mother and daughter is 50 years. Five years ago, the mother's age was 7 times the daughter's age. What is the current age of the daughter?", options: ["10", "12", "15", "18"], correctOptionIndex: 0, explanation: "Let daughter's current age be D. Mother's current age = 50 - D. 5 years ago: (50-D-5) = 7(D-5) => 45-D = 7D-35 => 80 = 8D => D = 10. Daughter is 10 years old.", difficulty: "tough", source_page: 520 },
                { question: "The average age of 6 friends is 18 years. If one friend leaves, the average age becomes 17 years. What is the age of the friend who left?", options: ["20", "21", "22", "23"], correctOptionIndex: 3, explanation: "Total age of 6 friends = 6 * 18 = 108. Total age of 5 friends = 5 * 17 = 85. Age of friend who left = 108 - 85 = 23.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two sisters is 3:4. If the elder sister is 28 years old, what is the age of the younger sister?", options: ["18", "21", "24", "26"], correctOptionIndex: 1, explanation: "If elder sister's age (4 parts) = 28, then 1 part = 7. Younger sister's age (3 parts) = 3 * 7 = 21.", difficulty: "easy", source_page: 519 },
                { question: "A father's age is 3 times his son's age. If the sum of their ages is 48, how old is the father?", options: ["12", "24", "36", "40"], correctOptionIndex: 2, explanation: "Let son's age be x. Father's age = 3x. x + 3x = 48 => 4x = 48 => x = 12. Father's age = 3 * 12 = 36.", difficulty: "easy", source_page: 519 },
                { question: "The age of a man is 4 times the age of his son. In 10 years, the man's age will be twice the age of his son. What is the current age of the son?", options: ["5", "10", "15", "20"], correctOptionIndex: 0, explanation: "Let son's current age be S. Man's current age = 4S. In 10 years: (4S+10) = 2(S+10) => 4S+10 = 2S+20 => 2S = 10 => S = 5. Son is 5 years old.", difficulty: "medium", source_page: 520 },
                { question: "The average age of 5 boys is 12 years. If a new boy joins, the average age becomes 13 years. What is the age of the new boy?", options: ["16", "17", "18", "19"], correctOptionIndex: 2, explanation: "Total age of 5 boys = 5 * 12 = 60. Total age of 6 boys = 6 * 13 = 78. New boy's age = 78 - 60 = 18.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two friends, P and Q, is 7:5. If P is 14 years old, what is Q's age?", options: ["8", "10", "12", "14"], correctOptionIndex: 1, explanation: "If P's age (7 parts) = 14, then 1 part = 2. Q's age (5 parts) = 5 * 2 = 10.", difficulty: "easy", source_page: 519 },
                { question: "The sum of the ages of two brothers is 40 years. 8 years ago, the elder brother was three times as old as the younger brother. What are their current ages?", options: ["28, 12", "30, 10", "26, 14", "35, 5"], correctOptionIndex: 2, explanation: "Let current ages be E and Y. E+Y=40. 8 years ago: (E-8) = 3(Y-8) => E-8 = 3Y-24 => E - 3Y = -16. Substitute E=40-Y: (40-Y) - 3Y = -16 => 4Y = 56 => Y = 14. E = 40 - 14 = 26. So, their current ages are 26 and 14.", difficulty: "tough", source_page: 520 },
                { question: "A is 10 years older than B. In 5 years, A's age will be 1.5 times B's age. What is B's current age?", options: ["10", "15", "20", "25"], correctOptionIndex: 1, explanation: "Let B's current age be x. A's age = x + 10. In 5 years: (x+10+5) = 1.5(x+5) => x+15 = 1.5x+7.5 => 0.5x = 7.5 => x = 15. B's current age is 15.", difficulty: "tough", source_page: 520 },
                { question: "The current age of a father is 5 times the age of his son. If the son's age is 8, what is the father's age?", options: ["30", "35", "40", "45"], correctOptionIndex: 2, explanation: "Father's age = 5 * 8 = 40.", difficulty: "easy", source_page: 519 },
                { question: "The average age of a class of 30 students is 10 years. If the teacher's age is included, the average age becomes 11 years. What is the teacher's age?", options: ["30", "35", "40", "41"], correctOptionIndex: 3, explanation: "Total age of 30 students = 30 * 10 = 300. Total age with teacher = 31 * 11 = 341. Teacher's age = 341 - 300 = 41.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two persons is 3:5. If the sum of their ages is 48, what is the age of the older person?", options: ["18", "24", "30", "36"], correctOptionIndex: 2, explanation: "Total parts = 3 + 5 = 8. 1 part = 48 / 8 = 6. Older person's age = 5 * 6 = 30.", difficulty: "easy", source_page: 519 },
                { question: "A mother is 30 years older than her son. In 10 years, the mother's age will be twice the son's age. What is the current age of the son?", options: ["10", "15", "20", "25"], correctOptionIndex: 2, explanation: "Let son's current age be S. Mother's current age = S + 30. In 10 years: (S+30+10) = 2(S+10) => S+40 = 2S+20 => S = 20. Son is 20 years old.", difficulty: "medium", source_page: 520 },
                { question: "The ages of A and B are in the ratio 2:1. If after 5 years, their ratio will be 3:2, find their current ages.", options: ["10, 5", "15, 10", "20, 10", "25, 15"], correctOptionIndex: 0, explanation: "Let current ages be 2x and x. After 5 years: (2x+5)/(x+5) = 3/2 => 2(2x+5) = 3(x+5) => 4x+10 = 3x+15 => x = 5. Current ages are 2*5=10 and 5.", difficulty: "tough", source_page: 520 },
                { question: "The sum of the ages of a father and son is 60 years. If the father's age is 3 times the son's age, what is the son's age?", options: ["15", "20", "25", "30"], correctOptionIndex: 0, explanation: "Let son's age be x. Father's age = 3x. x + 3x = 60 => 4x = 60 => x = 15. Son is 15 years old.", difficulty: "easy", source_page: 519 },
                { question: "A man is 24 years older than his son. In 2 years, his age will be twice the age of his son. What is the current age of the son?", options: ["20", "22", "24", "26"], correctOptionIndex: 1, explanation: "Let son's current age be S. Man's current age = S + 24. In 2 years: (S+24+2) = 2(S+2) => S+26 = 2S+4 => S = 22. Son is 22 years old.", difficulty: "medium", source_page: 520 },
                { question: "The average age of 4 persons is 25 years. If a new person joins, the average age becomes 26 years. What is the age of the new person?", options: ["28", "29", "30", "31"], correctOptionIndex: 2, explanation: "Total age of 4 persons = 4 * 25 = 100. Total age of 5 persons = 5 * 26 = 130. New person's age = 130 - 100 = 30.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of A and B is 6:7. If B is 35 years old, what is A's age?", options: ["25", "30", "32", "36"], correctOptionIndex: 1, explanation: "If B's age (7 parts) = 35, then 1 part = 5. A's age (6 parts) = 6 * 5 = 30.", difficulty: "easy", source_page: 519 },
                { question: "The sum of the ages of a mother and daughter is 40 years. 5 years ago, the mother's age was 5 times the daughter's age. What is the current age of the daughter?", options: ["8", "10", "12", "15"], correctOptionIndex: 1, explanation: "Let daughter's current age be D. Mother's current age = 40 - D. 5 years ago: (40-D-5) = 5(D-5) => 35-D = 5D-25 => 60 = 6D => D = 10. Daughter is 10 years old.", difficulty: "tough", source_page: 520 },
                { question: "The age of a father is 60 years and his son's age is 30 years. How many years ago was the father's age 4 times the son's age?", options: ["5", "10", "15", "20"], correctOptionIndex: 3, explanation: "Let x be the number of years ago. (60-x) = 4(30-x) => 60-x = 120-4x => 3x = 60 => x = 20. So, 20 years ago.", difficulty: "tough", source_page: 520 },
                { question: "A is 3 times as old as B. In 8 years, A will be 2 times as old as B. What is B's current age?", options: ["8", "10", "12", "14"], correctOptionIndex: 0, explanation: "Let B's current age be x. A's current age = 3x. In 8 years: (3x+8) = 2(x+8) => 3x+8 = 2x+16 => x = 8. B's current age is 8.", difficulty: "tough", source_page: 520 },
                { question: "The sum of the ages of two children is 16 years. If one child is 4 years older than the other, what is the age of the younger child?", options: ["6", "8", "10", "12"], correctOptionIndex: 0, explanation: "Let younger child's age be x. Older child's age = x + 4. x + (x + 4) = 16 => 2x + 4 = 16 => 2x = 12 => x = 6. Younger child is 6 years old.", difficulty: "easy", source_page: 519 },
                { question: "The ratio of the ages of a father and son is 9:2. If the father's age is 45, what is the son's age?", options: ["8", "10", "12", "15"], correctOptionIndex: 1, explanation: "If father's age (9 parts) = 45, then 1 part = 5. Son's age (2 parts) = 2 * 5 = 10.", difficulty: "easy", source_page: 519 },
                { question: "The average age of 7 players is 20 years. If the captain's age is included, the average age becomes 21 years. What is the captain's age?", options: ["27", "28", "29", "30"], correctOptionIndex: 1, explanation: "Total age of 7 players = 7 * 20 = 140. Total age with captain = 8 * 21 = 168. Captain's age = 168 - 140 = 28.", difficulty: "medium", source_page: 520 },
                { question: "A man's age is 5 times his son's age. In 3 years, the man's age will be 4 times his son's age. What is the current age of the son?", options: ["6", "9", "12", "15"], correctOptionIndex: 1, explanation: "Let son's current age be S. Man's current age = 5S. In 3 years: (5S+3) = 4(S+3) => 5S+3 = 4S+12 => S = 9. Son is 9 years old.", difficulty: "tough", source_page: 520 },
                { question: "The sum of the ages of two sisters is 30 years. If the elder sister is twice as old as the younger sister, what is the age of the younger sister?", options: ["8", "10", "12", "14"], correctOptionIndex: 1, explanation: "Let younger sister's age be x. Elder sister's age = 2x. x + 2x = 30 => 3x = 30 => x = 10. Younger sister is 10 years old.", difficulty: "easy", source_page: 519 },
                { question: "The ratio of the ages of two brothers is 4:3. If the younger brother is 18 years old, what is the age of the elder brother?", options: ["20", "24", "28", "30"], correctOptionIndex: 1, explanation: "If younger brother's age (3 parts) = 18, then 1 part = 6. Elder brother's age (4 parts) = 4 * 6 = 24.", difficulty: "easy", source_page: 519 },
                { question: "A father is 20 years older than his son. In 10 years, the father's age will be 1.5 times the son's age. What is the current age of the son?", options: ["10", "15", "20", "25"], correctOptionIndex: 3, explanation: "Let son's current age be S. Father's current age = S + 20. In 10 years: (S+20+10) = 1.5(S+10) => S+30 = 1.5S+15 => 0.5S = 15 => S = 30. Son is 30 years old.", difficulty: "tough", source_page: 520 },
                { question: "The average age of 10 employees is 30 years. If the manager's age is included, the average age becomes 31 years. What is the manager's age?", options: ["35", "38", "40", "41"], correctOptionIndex: 3, explanation: "Total age of 10 employees = 10 * 30 = 300. Total age with manager = 11 * 31 = 341. Manager's age = 341 - 300 = 41.", difficulty: "medium", source_page: 520 },
                { question: "The ratio of the ages of two friends is 5:8. If the sum of their ages is 39, what is the age of the younger friend?", options: ["15", "18", "20", "24"], correctOptionIndex: 0, explanation: "Total parts = 5 + 8 = 13. 1 part = 39 / 13 = 3. Younger friend's age = 5 * 3 = 15.", difficulty: "easy", source_page: 519 },
                { question: "A is 5 years older than B. 10 years ago, A was twice as old as B. What is B's current age?", options: ["10", "15", "20", "25"], correctOptionIndex: 1, explanation: "Let B's current age be x. A's current age = x + 5. 10 years ago: (x+5-10) = 2(x-10) => x-5 = 2x-20 => x = 15. B's current age is 15.", difficulty: "tough", source_page: 520 }
            ];

            // Combine and shuffle questions
            quizQuestions.push(...generalKnowledgeMCQs);
            quizQuestions.push(...englishMCQs);
            quizQuestions.push(...generalAbilitiesMCQs);

            // Ensure a fixed number of questions (e.g., 100) by trimming or warning if not enough
            if (quizQuestions.length > 100) {
                // Randomly select 100 questions if more are available
                shuffleArray(quizQuestions);
                quizQuestions = quizQuestions.slice(0, 100);
            } else if (quizQuestions.length < 100) {
                console.warn(`Warning: Only ${quizQuestions.length} questions available for July 01. Aim for 100 questions.`);
                // If fewer than 100, just use what's available
            }
            
            shuffleArray(quizQuestions); // Shuffle the final set of questions

            // Randomly select one "Today's Special Question" (only if there are questions)
            if (quizQuestions.length > 0) {
                specialQuestionIndex = Math.floor(Math.random() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }

            // Apply 30% chance to shuffle the entire quiz order
            if (Math.random() < 0.3) {
                shuffleArray(quizQuestions);
                // After shuffling, find the new index of the special question
                specialQuestionIndex = quizQuestions.findIndex(q => q.special);
            }
        }

        // --- Initial Setup on DOM Load ---
        document.addEventListener('DOMContentLoaded', () => {
            // Set the login ID dynamically based on the CURRENT_DATE_STR
            const dateParts = CURRENT_DATE_STR.split(' ');
            const monthName = dateParts[0].toUpperCase().substring(0, 3); // JUL
            const day = parseInt(dateParts[1].replace(',', ''));
            document.getElementById('loginId').value = `${day}${monthName.toUpperCase()}`; // e.g., 01JULY

            initializeQuiz();
            // Initial call to set correct sticky date position on load
            updateLiveDate();
        });

        // Handle mobile sticky date position on resize
        window.addEventListener('resize', updateLiveDate);
    </script>
</body>
</html>
