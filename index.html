<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - 29 July</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* Custom CSS for animations and specific styles not easily covered by Tailwind */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap');

        body {
            font-family: 'Inter', sans-serif;
            background-color: #F8F9FA; /* Background color */
            color: #2C3E50; /* Default text color */
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        .text-primary {
            color: #2C3E50;
        }

        .date-color {
            color: #6D6875;
        }

        .gradient-button {
            background-image: linear-gradient(to right, #E6E6FA, #FFDAB9);
            transition: transform 0.2s ease-in-out, box-shadow 0.2s ease-in-out;
        }

        .gradient-button:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
        }

        .option-card {
            transition: transform 0.2s ease-in-out, background-color 0.3s ease-in-out;
        }

        .option-card:hover {
            transform: scale(1.05);
        }

        /* Pulse animation for correct answer */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        .pulse-green {
            animation: pulse-green 0.6s ease-out;
            background-color: #90EE90; /* Light Green */
        }

        /* Shake animation for wrong answer */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }

        .shake-red {
            animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            background-color: #FF6B6B; /* Red */
        }

        /* Progress bar animation */
        .progress-bar-inner {
            background-image: linear-gradient(to right, #20B2AA, #3EB489);
            transition: width 0.5s ease-in-out;
        }

        /* Sticky date positioning for desktop */
        .sticky-date {
            position: sticky;
            top: 1rem;
            z-index: 10;
        }

        /* Responsive adjustments for sticky date */
        @media (min-width: 768px) {
            .sticky-date {
                right: 1rem;
                left: auto;
            }
        }

        @media (max-width: 767px) {
            .sticky-date {
                left: 1rem;
                right: auto;
            }
        }

        /* Hide elements for security */
        .no-select {
            -webkit-touch-callout: none; /* iOS Safari */
            -webkit-user-select: none; /* Safari */
            -khtml-user-select: none; /* Konqueror HTML */
            -moz-user-select: none; /* Old versions of Firefox */
            -ms-user-select: none; /* Internet Explorer/Edge */
            user-select: none; /* Non-prefixed version, currently supported by Chrome, Edge, Opera and Firefox */
        }

        /* Modal styling */
        .modal {
            display: none; /* Hidden by default */
            position: fixed; /* Stay in place */
            z-index: 100; /* Sit on top */
            left: 0;
            top: 0;
            width: 100%; /* Full width */
            height: 100%; /* Full height */
            overflow: auto; /* Enable scroll if needed */
            background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background-color: #fefefe;
            margin: auto;
            padding: 20px;
            border: 1px solid #888;
            width: 80%;
            max-width: 500px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
            text-align: center;
        }

        .close-button {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
        }

        .close-button:hover,
        .close-button:focus {
            color: black;
            text-decoration: none;
            cursor: pointer;
        }
    </style>
</head>
<body class="no-select" oncontextmenu="return false;">

    <div id="login-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Quiz Login</h2>
            <div class="mb-4">
                <label for="username" class="block text-primary text-sm font-bold mb-2">Username:</label>
                <input type="text" id="username" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter username">
            </div>
            <div class="mb-6">
                <label for="password" class="block text-primary text-sm font-bold mb-2">Password:</label>
                <input type="password" id="password" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter password">
            </div>
            <button id="login-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Login</button>
            <p id="login-error" class="text-red-500 text-center mt-4 hidden">Invalid username or password.</p>
        </div>
    </div>

    <div id="candidate-info-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE]">
            <h2 class="text-3xl font-bold text-center text-primary mb-6">Candidate Information</h2>
            <div class="mb-6">
                <label for="full-name" class="block text-primary text-sm font-bold mb-2">Full Name:</label>
                <input type="text" id="full-name" class="shadow appearance-none border rounded-lg w-full py-3 px-4 text-primary leading-tight focus:outline-none focus:shadow-outline bg-gray-100" placeholder="Enter your full name">
            </div>
            <button id="start-quiz-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Start Quiz</button>
            <p id="name-error" class="text-red-500 text-center mt-4 hidden">Please enter your full name.</p>
        </div>
    </div>

    <div id="quiz-page" class="min-h-screen bg-[#F8F9FA] p-4 md:p-8 hidden">
        <div class="relative mb-6">
            <div id="live-date" class="sticky-date text-sm font-semibold date-color p-2 rounded-lg bg-white shadow-md flex items-center justify-end md:justify-start">
                <i class="far fa-calendar-alt mr-2"></i>
                <span></span>
            </div>
            <h1 class="text-4xl font-bold text-center text-primary mt-4 mb-4">CSS MPT Daily Quiz – <span id="quiz-date-title"></span></h1>

            <div class="w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden shadow-inner">
                <div id="progress-bar" class="progress-bar-inner h-full rounded-full text-xs text-white flex items-center justify-center" style="width: 0%;">
                    <span id="progress-text">0%</span>
                </div>
            </div>

            <div class="w-full rounded-xl overflow-hidden shadow-lg mb-4">
                <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Quiz Banner" class="w-full h-auto object-cover rounded-xl">
            </div>

            <div class="text-center text-primary text-sm md:text-base font-bold mb-6">
                <p>DAWNDIGEST</p>
                <p>PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698</p>
                <p>Updated on: <span id="updated-date"></span></p>
            </div>

            <div class="text-center text-lg font-bold text-primary mb-6">
                Time Remaining: <span id="timer">40:00</span>
            </div>
        </div>

        <div id="quiz-container" class="grid grid-cols-1 md:grid-cols-1 gap-6">
            <div id="question-card" class="bg-white p-6 rounded-xl shadow-lg border border-[#FFF5EE]">
                <p class="text-lg font-semibold mb-4 text-primary"><span id="question-number"></span>. <span id="question-text"></span></p>
                <div id="options-container" class="grid grid-cols-1 gap-3">
                    </div>
                <div id="explanation-container" class="mt-4 p-3 rounded-lg bg-gray-100 text-sm italic text-primary hidden">
                    <p id="explanation-text"></p>
                </div>
            </div>

            <div class="flex justify-around mt-6">
                <button id="prev-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg opacity-50 cursor-not-allowed" disabled>Previous</button>
                <button id="submit-now-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg">Submit</button>
                <button id="next-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg">Next</button>
            </div>
        </div>
    </div>

    <div id="results-page" class="min-h-screen flex items-center justify-center bg-[#F8F9FA] p-4 hidden">
        <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-md border border-[#FFF5EE] text-primary">
            <h2 class="text-3xl font-bold text-center mb-6">Quiz Results</h2>
            <p class="text-lg mb-2"><strong>Candidate Name:</strong> <span id="result-name"></span></p>
            <p class="text-lg mb-2"><strong>Total Score:</strong> <span id="result-score"></span> / 100</p>
            <p class="text-lg mb-2"><strong>Time Taken:</strong> <span id="result-time"></span></p>
            <p class="text-lg mb-4"><strong>Questions Attempted:</strong> <span id="result-attempted"></span></p>
            <button id="retake-quiz-button" class="gradient-button text-primary font-bold py-3 px-6 rounded-lg w-full focus:outline-none focus:shadow-outline">Retake Quiz</button>
        </div>
    </div>

    <div id="custom-modal" class="modal">
        <div class="modal-content">
            <span class="close-button">&times;</span>
            <p id="modal-message" class="text-lg text-primary"></p>
            <button id="modal-ok-button" class="gradient-button text-primary font-bold py-2 px-4 rounded-lg mt-4 hidden">OK</button>
            <button id="modal-cancel-button" class="gradient-button text-primary font-bold py-2 px-4 rounded-lg mt-4 ml-2 hidden">Cancel</button>
        </div>
    </div>

    <script>
        // Disable right-click, copy/paste, and developer tools
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', event => {
            if (event.key === 'F12' ||
                (event.ctrlKey && event.shiftKey && event.key === 'I') ||
                (event.ctrlKey && event.key === 'u') ||
                (event.ctrlKey && event.key === 'U') ||
                (event.ctrlKey && event.key === 'c') ||
                (event.ctrlKey && event.key === 'C') ||
                (event.ctrlKey && event.key === 'v') ||
                (event.ctrlKey && event.key === 'V')
            ) {
                event.preventDefault();
            }
        });

        // Custom Modal Functions
        function showModal(message, type = 'alert', onConfirm = null) {
            const modal = document.getElementById('custom-modal');
            const modalMessage = document.getElementById('modal-message');
            const okButton = document.getElementById('modal-ok-button');
            const cancelButton = document.getElementById('modal-cancel-button');
            const closeButton = document.querySelector('#custom-modal .close-button');

            modalMessage.textContent = message;
            okButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(true);
                } else if (type === 'alert' && onConfirm) {
                    onConfirm();
                }
            };
            cancelButton.onclick = () => {
                modal.style.display = 'none';
                if (type === 'confirm' && onConfirm) {
                    onConfirm(false);
                }
            };
            closeButton.onclick = () => modal.style.display = 'none';

            if (type === 'alert') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'none';
            } else if (type === 'confirm') {
                okButton.style.display = 'inline-block';
                cancelButton.style.display = 'inline-block';
            }
            modal.style.display = 'flex'; // Use flex to center
        }


        // Quiz Data and State
        let currentQuestionIndex = 0;
        let score = 0;
        let questionsAttempted = 0;
        let timerInterval;
        const quizDuration = 40 * 60; // 40 minutes in seconds
        let timeElapsed = 0;
        let userName = '';
        let quizStartTime;
        let quizCompleted = false;

        // Store answers
        const userAnswers = {}; // { questionIndex: selectedOptionIndex }

        // Curated MCQs - 100 questions from General Knowledge (What and Where: Pages 13-19)
        const allQuizQuestions = [
            { question: "Where is Temple Tree situated?", options: ["USA", "UK", "Sri Lanka", "India"], answer: 2, explanation: "Temple Trees is the official residence of the Prime Minister of Sri Lanka." },
            { question: "Where is Damascus, a city, located?", options: ["Iraq", "Syria", "Lebanon", "Jordan"], answer: 1, explanation: "Damascus is the capital city of Syria." },
            { question: "Where is the Kremlin, a historic fortified complex, located?", options: ["Germany", "Russia", "France", "Poland"], answer: 1, explanation: "The Moscow Kremlin is a fortified complex in the center of Moscow, overlooking the Moskva River." },
            { question: "Where is the Elysee Palace, the official residence of the President of France, located?", options: ["Lyon", "Marseille", "Paris", "Nice"], answer: 2, explanation: "The Élysée Palace is in Paris and is the official residence of the President of the French Republic." },
            { question: "Where is Mount Kilimanjaro located?", options: ["Kenya", "Tanzania", "Uganda", "South Africa"], answer: 1, explanation: "Mount Kilimanjaro is a dormant volcano in Tanzania." },
            { question: "The Hanging Gardens, one of the Seven Wonders of the Ancient World, were located in:", options: ["Egypt", "Greece", "Babylon", "Rome"], answer: 2, explanation: "The Hanging Gardens of Babylon were described as a remarkable feat of engineering with an ascending series of tiered gardens." },
            { question: "Where is the 'Wailing Wall' located?", options: ["Rome", "Athens", "Jerusalem", "Mecca"], answer: 2, explanation: "The Wailing Wall, or Western Wall, is located in the Old City of Jerusalem." },
            { question: "Where is the world's highest mountain system, the Himalayas, located?", options: ["Europe", "Asia", "Africa", "South America"], answer: 1, explanation: "The Himalayas are a mountain range in Asia separating the plains of the Indian subcontinent from the Tibetan Plateau." },
            { question: "Where is the USA's film industry, Hollywood, located?", options: ["New York", "Chicago", "Los Angeles", "San Francisco"], answer: 2, explanation: "Hollywood is a neighborhood in the central region of Los Angeles, California." },
            { question: "Where was the world's first atomic bomb dropped on August 6, 1945?", options: ["Nagasaki", "Tokyo", "Hiroshima", "Kyoto"], answer: 2, explanation: "The United States dropped an atomic bomb on the city of Hiroshima in Japan on August 6, 1945." },
            { question: "What is the name of the place where the manuscripts of the Old Testament were kept in Golden Temple, Amritsar?", options: ["Akal Takht", "Harmandir Sahib", "Darshani Deori", "None of these"], answer: 0, explanation: "The Akal Takht is one of five takhts (seats of power) of the Sikhs, located in the Harmandir Sahib (Golden Temple) complex." },
            { question: "Where are the headquarters of the US Department of Defense, The Pentagon, located?", options: ["New York", "Washington D.C.", "Arlington, Virginia", "Los Angeles"], answer: 2, explanation: "The Pentagon is located in Arlington County, Virginia, across the Potomac River from Washington, D.C." },
            { question: "Where is the Taklamakan Desert located?", options: ["Mongolia", "China", "Kazakhstan", "Russia"], answer: 1, explanation: "The Taklamakan Desert is a sandy desert in Southwest Xinjiang, Northwest China." },
            { question: "Where is the world's largest desert, the Sahara, located?", options: ["Asia", "Africa", "Australia", "South America"], answer: 1, explanation: "The Sahara is a desert on the African continent." },
            { question: "Where is the Qutub Minar located?", options: ["Mumbai", "Delhi", "Agra", "Jaipur"], answer: 1, explanation: "The Qutub Minar is a minaret and 'victory tower' that forms part of the Qutb complex, a UNESCO World Heritage Site in Delhi, India." },
            { question: "Where does the River Thames flow?", options: ["Paris", "Rome", "London", "Berlin"], answer: 2, explanation: "The River Thames is a river that flows through southern England, including London." },
            { question: "Where is the official residence of the President of the USA, the White House, located?", options: ["New York", "Washington D.C.", "Chicago", "Boston"], answer: 1, explanation: "The White House is the official residence and workplace of the president of the United States, located in Washington, D.C." },
            { question: "Where is Waterloo, the site of Napoleon's final defeat, located?", options: ["France", "Germany", "Belgium", "UK"], answer: 2, explanation: "Waterloo is a municipality in Wallonia, located in the province of Walloon Brabant, Belgium." },
            { question: "Where is the Statue of Liberty located?", options: ["Washington D.C.", "Boston", "New York Harbor", "Philadelphia"], answer: 2, explanation: "The Statue of Liberty is a colossal neoclassical sculpture on Liberty Island in New York Harbor." },
            { question: "Where are the Victoria Falls located?", options: ["On the border of Zimbabwe and Zambia", "Brazil", "Argentina", "Canada"], answer: 0, explanation: "Victoria Falls is a waterfall on the Zambezi River in southern Africa, which provides habitat for several unique species of plants and animals." },
            { question: "Where is the 'West Bank' territory located?", options: ["Between Israel and Jordan", "Syria", "Egypt", "Lebanon"], answer: 0, explanation: "The West Bank is a landlocked territory near the Mediterranean coast of Western Asia, bordered by Jordan to the east and Israel to the south, west, and north." },
            { question: "Where are the Pyramids of Giza located?", options: ["Luxor", "Cairo", "Aswan", "Alexandria"], answer: 1, explanation: "The Great Pyramids of Giza are located on the outskirts of Cairo, Egypt." },
            { question: "Which countries are situated around the Black Sea?", options: ["Turkey, Syria, Bulgaria", "Bulgaria, Romania, Turkey", "Lebanon, Syria, Cyprus, Turkey", "Greece, Albania, Italy"], answer: 1, explanation: "The Black Sea is bordered by Ukraine, Romania, Bulgaria, Turkey, Georgia, and Russia." },
            { question: "Where is Tahrir Square, a major public town square, located?", options: ["Tripoli, Libya", "Cairo, Egypt", "Tunis, Tunisia", "Damascus, Syria"], answer: 1, explanation: "Tahrir Square, also known as 'Martyr Square', is a major public town square in Downtown Cairo, Egypt." },
            { question: "Where is Downing Street, the official residence of the British Prime Minister, located?", options: ["Manchester", "Birmingham", "London", "Liverpool"], answer: 2, explanation: "10 Downing Street in London is the official residence and office of the Prime Minister of the United Kingdom." },
            { question: "Where is Wall Street, the financial district, located?", options: ["London", "Tokyo", "New York", "Hong Kong"], answer: 2, explanation: "Wall Street is a street in the Financial District of Lower Manhattan in New York City." },
            { question: "Where is the 'Forbidden City', a palace complex, located?", options: ["Shanghai", "Beijing", "Hong Kong", "Xi'an"], answer: 1, explanation: "The Forbidden City is a palace complex in central Beijing, China." },
            { question: "Where is the world's largest building by volume, the Boeing Everett Factory, located?", options: ["California", "Washington", "Texas", "Florida"], answer: 1, explanation: "The Boeing Everett Factory in Washington is the largest building in the world by volume." },
            { question: "Where are the Alps, one of the great mountain range systems of Europe, located?", options: ["Spanning across 8 countries in Europe", "Only in Switzerland", "Only in Austria", "In Russia"], answer: 0, explanation: "The Alps are a mountain range system that stretches across eight Alpine countries in Europe." },
            { question: "Where is the ancient city of Babylon located?", options: ["Modern-day Iran", "Modern-day Iraq", "Modern-day Syria", "Modern-day Egypt"], answer: 1, explanation: "The ruins of Babylon are located in modern-day Iraq." },
            { "question": "The famous 'Leaning Tower' is located in which city?", "options": ["Rome", "Florence", "Pisa", "Venice"], "answer": 2, "explanation": "The Leaning Tower of Pisa is the campanile, or freestanding bell tower, of the cathedral of the Italian city of Pisa." },
            { "question": "Where is the 'Great Barrier Reef', the world's largest coral reef system, located?", "options": ["Off the coast of California", "Off the coast of Queensland, Australia", "In the Caribbean Sea", "In the Red Sea"], "answer": 1, "explanation": "The Great Barrier Reef is located in the Coral Sea, off the coast of Queensland, Australia." },
            { "question": "Where is the 'Christ the Redeemer' statue located?", "options": ["Mexico City, Mexico", "Lima, Peru", "Rio de Janeiro, Brazil", "Buenos Aires, Argentina"], "answer": 2, "explanation": "Christ the Redeemer is an Art Deco statue of Jesus Christ in Rio de Janeiro, Brazil." },
            { "question": "Where is the ancient city of Petra located?", "options": ["Egypt", "Jordan", "Israel", "Saudi Arabia"], "answer": 1, "explanation": "Petra is a famous archaeological site in Jordan's southwestern desert." },
            { "question": "Where is the 'Sistine Chapel', famous for its frescoes by Michelangelo, located?", "options": ["Florence", "Rome", "Vatican City", "Milan"], "answer": 2, "explanation": "The Sistine Chapel is a chapel in the Apostolic Palace, in Vatican City." },
            { "question": "Where is the world's tallest building, the Burj Khalifa, located?", "options": ["Shanghai, China", "Dubai, UAE", "New York, USA", "Mecca, Saudi Arabia"], "answer": 1, "explanation": "The Burj Khalifa is a skyscraper in Dubai, United Arab Emirates." },
            { "question": "Where is the ancient Inca citadel 'Machu Picchu' located?", "options": ["Colombia", "Ecuador", "Peru", "Bolivia"], "answer": 2, "explanation": "Machu Picchu is a 15th-century Inca citadel located in the Eastern Cordillera of southern Peru." },
            { "question": "Where is the 'Acropolis', an ancient citadel containing the Parthenon, located?", "options": ["Rome, Italy", "Athens, Greece", "Cairo, Egypt", "Istanbul, Turkey"], "answer": 1, "explanation": "The Acropolis of Athens is an ancient citadel located on a rocky outcrop above the city of Athens." },
            { "question": "Where is the famous opera house 'La Scala' located?", "options": ["Vienna, Austria", "Paris, France", "Milan, Italy", "London, UK"], "answer": 2, "explanation": "La Scala is a famous opera house in Milan, Italy." },
            { "question": "Where is the 'Hermitage Museum', one of the largest art museums in the world, located?", "options": ["Moscow, Russia", "Saint Petersburg, Russia", "Paris, France", "London, UK"], "answer": 1, "explanation": "The State Hermitage Museum is a museum of art and culture in Saint Petersburg, Russia." },
            { "question": "Where is 'Stonehenge', a prehistoric monument, located?", "options": ["Ireland", "Scotland", "Wiltshire, England", "Wales"], "answer": 2, "explanation": "Stonehenge is a prehistoric monument on Salisbury Plain in Wiltshire, England." },
            { "question": "Where is the 'Angkor Wat' temple complex located?", "options": ["Thailand", "Vietnam", "Cambodia", "Laos"], "answer": 2, "explanation": "Angkor Wat is a temple complex in Cambodia and the largest religious monument in the world." },
            { "question": "Where is the 'Golden Gate Bridge' located?", "options": ["New York City", "San Francisco", "Los Angeles", "Seattle"], "answer": 1, "explanation": "The Golden Gate Bridge is a suspension bridge spanning the Golden Gate, the one-mile-wide strait connecting San Francisco Bay and the Pacific Ocean." },
            { "question": "Where is the 'Mount Rushmore' National Memorial located?", "options": ["Wyoming", "Montana", "South Dakota", "Colorado"], "answer": 2, "explanation": "Mount Rushmore National Memorial is centered on a colossal sculpture carved into the granite face of Mount Rushmore in the Black Hills in Keystone, South Dakota." },
            { "question": "Where is the 'Niagara Falls' located?", "options": ["On the border between Canada and the USA", "Only in Canada", "Only in the USA", "In Mexico"], "answer": 0, "explanation": "Niagara Falls is a group of three waterfalls at the southern end of Niagara Gorge, spanning the border between the province of Ontario in Canada and the state of New York in the United States." },
            { "question": "Where is the 'Eiffel Tower' located?", "options": ["Berlin, Germany", "Rome, Italy", "Paris, France", "Madrid, Spain"], "answer": 2, "explanation": "The Eiffel Tower is a wrought-iron lattice tower on the Champ de Mars in Paris, France." },
            { "question": "Where is the 'Taj Mahal' located?", "options": ["Delhi, India", "Mumbai, India", "Agra, India", "Jaipur, India"], "answer": 2, "explanation": "The Taj Mahal is an ivory-white marble mausoleum on the south bank of the Yamuna river in the Indian city of Agra." },
            { "question": "Where is the 'Louvre Museum', the world's largest art museum, located?", "options": ["London, UK", "Paris, France", "New York, USA", "Rome, Italy"], "answer": 1, "explanation": "The Louvre Museum is the world's largest art museum and a historic monument in Paris, France." },
            { "question": "Where is the 'Red Square' located?", "options": ["Beijing, China", "Moscow, Russia", "Warsaw, Poland", "Kyiv, Ukraine"], "answer": 1, "explanation": "Red Square is one of the oldest and largest squares in Moscow, Russia." },
            { "question": "Where is the 'Brandenburg Gate', an 18th-century neoclassical monument, located?", "options": ["Vienna, Austria", "Prague, Czech Republic", "Berlin, Germany", "Budapest, Hungary"], "answer": 2, "explanation": "The Brandenburg Gate is an 18th-century neoclassical monument in Berlin, Germany." },
            { "question": "Where is the 'Grand Canyon' located?", "options": ["Utah", "Nevada", "Arizona", "Colorado"], "answer": 2, "explanation": "The Grand Canyon is a steep-sided canyon carved by the Colorado River in Arizona, United States." },
            { "question": "Where is the 'Serengeti National Park', famous for its annual migration of wildebeest, located?", "options": ["Kenya", "Tanzania", "South Africa", "Ethiopia"], "answer": 1, "explanation": "The Serengeti National Park is a large national park in northern Tanzania." },
            { "question": "Where is the 'Galapagos Islands', known for their unique wildlife, located?", "options": ["Off the coast of Chile", "Off the coast of Ecuador", "Off the coast of Colombia", "Off the coast of Peru"], "answer": 1, "explanation": "The Galápagos Islands are an archipelago of volcanic islands around the equator in the Pacific Ocean, belonging to Ecuador." },
            { "question": "Where is 'Mecca', the holiest city in Islam, located?", "options": ["UAE", "Qatar", "Saudi Arabia", "Oman"], "answer": 2, "explanation": "Mecca is a city in the Hejazi region of Saudi Arabia." },
            { "question": "Where is 'Vatican City', the smallest independent state in the world, located?", "options": ["Within Rome, Italy", "Within Milan, Italy", "On an island in the Mediterranean", "Bordering France"], "answer": 0, "explanation": "Vatican City is an independent city-state enclaved within Rome, Italy." },
            { "question": "Where is the ancient city of 'Troy' located?", "options": ["Greece", "Italy", "Turkey", "Egypt"], "answer": 2, "explanation": "The archaeological site of Troy is located in modern-day Turkey." },
            { "question": "Where is the 'Dead Sea', a salt lake known for its high salinity, located?", "options": ["Bordering Israel and Jordan", "In Egypt", "In Syria", "In Saudi Arabia"], "answer": 0, "explanation": "The Dead Sea is a salt lake bordered by Jordan to the east and Israel and the West Bank to the west." },
            { "question": "Where is 'Silicon Valley', a global center for high technology and innovation, located?", "options": ["Southern California", "Northern California", "Texas", "Washington"], "answer": 1, "explanation": "Silicon Valley is a region in the southern part of the San Francisco Bay Area in Northern California." },
            { "question": "Where is 'Pamplona', famous for the running of the bulls, located?", "options": ["Portugal", "France", "Spain", "Italy"], "answer": 2, "explanation": "Pamplona is the capital of the Navarre province in northern Spain." },
            { "question": "Where is 'Timbuktu', a historical center of Islamic scholarship, located?", "options": ["Nigeria", "Niger", "Mali", "Chad"], "answer": 2, "explanation": "Timbuktu is a city in the West African nation of Mali." },
            { "question": "Where is the 'Amazon Rainforest', the world's largest tropical rainforest, primarily located?", "options": ["Argentina", "Peru", "Brazil", "Colombia"], "answer": 2, "explanation": "The vast majority of the Amazon Rainforest (about 60%) is contained within Brazil." },
            { "question": "Where is 'Mount Fuji', an active volcano and Japan's tallest peak, located?", "options": ["On the island of Hokkaido", "On the island of Honshu", "On the island of Kyushu", "On the island of Shikoku"], "answer": 1, "explanation": "Mount Fuji is located on the island of Honshu and is the highest mountain in Japan." },
            { "question": "Where is the 'Loch Ness', famous for alleged sightings of a monster, located?", "options": ["Ireland", "Wales", "England", "Scotland"], "answer": 3, "explanation": "Loch Ness is a large, deep, freshwater loch in the Scottish Highlands." },
            { "question": "Where is the 'Sahara Desert', the largest hot desert in the world, located?", "options": ["Southern Africa", "Northern Africa", "The Middle East", "Central Asia"], "answer": 1, "explanation": "The Sahara Desert covers much of Northern Africa." },
            { "question": "Where is 'Mount Everest', the Earth's highest mountain above sea level, located?", "options": ["In India", "In China", "On the border of Nepal and China", "In Bhutan"], "answer": 2, "explanation": "Mount Everest is located in the Mahalangur Himal sub-range of the Himalayas, on the border between Nepal and the Tibet Autonomous Region of China." },
            { "question": "Where is the 'Gobi Desert', a large desert region in Asia, located?", "options": ["In Western China and Southern Mongolia", "In India and Pakistan", "In Kazakhstan and Uzbekistan", "In Iran and Afghanistan"], "answer": 0, "explanation": "The Gobi Desert covers parts of Northern and Northwestern China and of Southern Mongolia." },
            { "question": "Where is 'Angel Falls', the world's tallest uninterrupted waterfall, located?", "options": ["Brazil", "Colombia", "Venezuela", "Guyana"], "answer": 2, "explanation": "Angel Falls is a waterfall in Venezuela." },
            { "question": "Where is the 'Mariana Trench', the deepest oceanic trench on Earth, located?", "options": ["In the Atlantic Ocean", "In the Indian Ocean", "In the western Pacific Ocean", "In the Arctic Ocean"], "answer": 2, "explanation": "The Mariana Trench is located in the western Pacific Ocean, to the east of the Mariana Islands." },
            { "question": "Where is the 'Panama Canal', an artificial waterway connecting the Atlantic and Pacific oceans, located?", "options": ["Colombia", "Costa Rica", "Panama", "Nicaragua"], "answer": 2, "explanation": "The Panama Canal is located in Panama." },
            { "question": "Where is the 'Suez Canal', an artificial sea-level waterway connecting the Mediterranean Sea to the Red Sea, located?", "options": ["In Egypt", "In Saudi Arabia", "In Jordan", "In Israel"], "answer": 0, "explanation": "The Suez Canal is located in Egypt." },
            { "question": "Where is the 'Strait of Gibraltar', a narrow strait connecting the Atlantic Ocean to the Mediterranean Sea, located?", "options": ["Between Spain and Morocco", "Between Italy and Sicily", "Between Greece and Turkey", "Between France and the UK"], "answer": 0, "explanation": "The Strait of Gibraltar separates the Iberian Peninsula in Europe from Morocco in Africa." },
            { "question": "Where is the 'Bermuda Triangle', a region where a number of aircraft and ships are said to have disappeared, located?", "options": ["In the western part of the North Atlantic Ocean", "In the Pacific Ocean", "In the Indian Ocean", "In the Caribbean Sea"], "answer": 0, "explanation": "The Bermuda Triangle is a loosely defined region in the western part of the North Atlantic Ocean." },
            { "question": "Where is 'Area 51', a highly classified United States Air Force facility, located?", "options": ["Arizona", "New Mexico", "Nevada", "California"], "answer": 2, "explanation": "Area 51 is located in the southern portion of Nevada in the western United States." },
            { "question": "Where is the 'Chernobyl Nuclear Power Plant', site of a major nuclear disaster, located?", "options": ["Russia", "Belarus", "Ukraine", "Poland"], "answer": 2, "explanation": "The Chernobyl Nuclear Power Plant is a closed nuclear power plant near the abandoned city of Pripyat in northern Ukraine." },
            { "question": "Where is the 'Hollywood Walk of Fame' located?", "options": ["Beverly Hills", "Hollywood Boulevard, Los Angeles", "Santa Monica", "Malibu"], "answer": 1, "explanation": "The Hollywood Walk of Fame comprises more than 2,690 five-pointed terrazzo and brass stars embedded in the sidewalks along 15 blocks of Hollywood Boulevard and three blocks of Vine Street in Hollywood, California." },
            { "question": "Where is the 'Alhambra', a palace and fortress complex of the Moorish rulers, located?", "options": ["Seville, Spain", "Cordoba, Spain", "Granada, Spain", "Madrid, Spain"], "answer": 2, "explanation": "The Alhambra is a palace and fortress complex located in Granada, Andalusia, Spain." },
            { "question": "Where is the 'Neuschwanstein Castle', a 19th-century Romanesque Revival palace, located?", "options": ["Austria", "Switzerland", "Bavaria, Germany", "France"], "answer": 2, "explanation": "Neuschwanstein Castle is a 19th-century historicist palace on a rugged hill above the village of Hohenschwangau near Füssen in southwest Bavaria, Germany." },
            { "question": "Where is the 'Blue Lagoon', a geothermal spa, located?", "options": ["Norway", "Sweden", "Finland", "Iceland"], "answer": 3, "explanation": "The Blue Lagoon is a geothermal spa in southwestern Iceland." },
            { "question": "Where is the 'Ha Long Bay', known for its emerald waters and thousands of towering limestone islands, located?", "options": ["Thailand", "Vietnam", "Philippines", "Malaysia"], "answer": 1, "explanation": "Hạ Long Bay is a UNESCO World Heritage Site and popular travel destination in Quảng Ninh Province, Vietnam." },
            { "question": "Where is the 'Victoria and Alfred Waterfront', a popular tourist destination, located?", "options": ["Durban, South Africa", "Cape Town, South Africa", "Port Elizabeth, South Africa", "Johannesburg, South Africa"], "answer": 1, "explanation": "The Victoria & Alfred Waterfront in Cape Town is situated on the Atlantic shore, Table Bay Harbour, the City of Cape Town and Table Mountain." },
            { "question": "Where is 'Robben Island', where Nelson Mandela was imprisoned, located?", "options": ["Off the coast of Durban", "Off the coast of Cape Town", "In the Indian Ocean", "Near Johannesburg"], "answer": 1, "explanation": "Robben Island is an island in Table Bay, 6.9 kilometres west of the coast of Bloubergstrand, Cape Town, South Africa." },
            { "question": "Where is the 'Champs-Élysées', one of the world's most famous avenues, located?", "options": ["Rome", "London", "Paris", "Berlin"], "answer": 2, "explanation": "The Avenue des Champs-Élysées is an avenue in the 8th arrondissement of Paris, France." },
            { "question": "Where is the 'Las Vegas Strip', known for its concentration of resort hotels and casinos, located?", "options": ["California", "Arizona", "Nevada", "Utah"], "answer": 2, "explanation": "The Las Vegas Strip is a stretch of South Las Vegas Boulevard in Clark County, Nevada." },
            { "question": "Where is the 'French Quarter', the oldest neighborhood in the city, located?", "options": ["New Orleans", "Charleston", "Savannah", "Boston"], "answer": 0, "explanation": "The French Quarter, also known as the Vieux Carré, is the oldest neighborhood in the city of New Orleans." },
            { "question": "Where is 'Bourbon Street', famous for its nightlife, located?", "options": ["In the heart of the French Quarter in New Orleans", "In Miami", "In Las Vegas", "In New York City"], "answer": 0, "explanation": "Bourbon Street is a historic street in the heart of the French Quarter of New Orleans." },
            { "question": "Where is the 'Times Square', a major commercial intersection and tourist destination, located?", "options": ["Los Angeles", "Chicago", "New York City", "Boston"], "answer": 2, "explanation": "Times Square is a major commercial intersection, tourist destination, entertainment center, and neighborhood in the Midtown Manhattan section of New York City." },
            { "question": "Where is the 'Statue of David' by Michelangelo located?", "options": ["Rome", "Florence", "Venice", "Milan"], "answer": 1, "explanation": "Michelangelo's David is housed in the Galleria dell'Accademia in Florence, Italy." },
            { "question": "Where is the 'Mona Lisa' by Leonardo da Vinci displayed?", "options": ["Uffizi Gallery, Florence", "Prado Museum, Madrid", "Louvre Museum, Paris", "British Museum, London"], "answer": 2, "explanation": "The Mona Lisa is on permanent display at the Louvre Museum in Paris." },
            { "question": "Where is the 'Sagrada Família', a large unfinished Roman Catholic minor basilica, located?", "options": ["Madrid, Spain", "Lisbon, Portugal", "Barcelona, Spain", "Seville, Spain"], "answer": 2, "explanation": "The Basílica de la Sagrada Família is a large unfinished Roman Catholic minor basilica in the Eixample district of Barcelona, Catalonia, Spain." }
        ];

        // Shuffle questions and assign "special question"
        let quizQuestions = [];

        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function initializeQuizQuestions() {
            quizQuestions = shuffleArray([...allQuizQuestions]).slice(0, 100);
        }


        // DOM Elements
        const loginPage = document.getElementById('login-page');
        const candidateInfoPage = document.getElementById('candidate-info-page');
        const quizPage = document.getElementById('quiz-page');
        const resultsPage = document.getElementById('results-page');

        const loginButton = document.getElementById('login-button');
        const usernameInput = document.getElementById('username');
        const passwordInput = document.getElementById('password');
        const loginError = document.getElementById('login-error');

        const fullNameInput = document.getElementById('full-name');
        const startQuizButton = document.getElementById('start-quiz-button');
        const nameError = document.getElementById('name-error');

        const liveDateSpan = document.querySelector('#live-date span');
        const quizDateTitleSpan = document.getElementById('quiz-date-title');
        const updatedDateSpan = document.getElementById('updated-date');
        const timerSpan = document.getElementById('timer');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        const questionNumberSpan = document.getElementById('question-number');
        const questionTextSpan = document.getElementById('question-text');
        const optionsContainer = document.getElementById('options-container');
        const explanationContainer = document.getElementById('explanation-container');
        const explanationText = document.getElementById('explanation-text');
        const questionCard = document.getElementById('question-card');

        const prevButton = document.getElementById('prev-button');
        const nextButton = document.getElementById('next-button');
        const submitNowButton = document.getElementById('submit-now-button');


        const resultNameSpan = document.getElementById('result-name');
        const resultScoreSpan = document.getElementById('result-score');
        const resultTimeSpan = document.getElementById('result-time');
        const resultAttemptedSpan = document.getElementById('result-attempted');
        const retakeQuizButton = document.getElementById('retake-quiz-button');

        // Functions
        function updateLiveDate() {
            const quizDate = new Date('2025-07-29T00:00:00');
            const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
            const formattedDate = quizDate.toLocaleDateString('en-US', options);
            liveDateSpan.textContent = formattedDate;
            quizDateTitleSpan.textContent = formattedDate;
            updatedDateSpan.textContent = formattedDate;
        }

        function startTimer() {
            quizStartTime = Date.now();
            timerInterval = setInterval(() => {
                timeElapsed++;
                const remainingSeconds = quizDuration - timeElapsed;

                if (remainingSeconds <= 0) {
                    clearInterval(timerInterval);
                    timerSpan.textContent = "00:00";
                    if (!quizCompleted) {
                        showModal("Time's up! Your quiz will be submitted.", "alert", submitQuiz);
                    }
                } else {
                    const minutes = Math.floor(remainingSeconds / 60);
                    const seconds = remainingSeconds % 60;
                    timerSpan.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}%`;
        }
        
        function loadQuestion(index) {
            if (index >= 0 && index < quizQuestions.length) {
                currentQuestionIndex = index;
                const question = quizQuestions[currentQuestionIndex];

                questionNumberSpan.textContent = currentQuestionIndex + 1;
                questionTextSpan.textContent = question.question;
                optionsContainer.innerHTML = ''; // Clear previous options
                explanationContainer.classList.add('hidden');
                explanationText.textContent = '';

                // Shuffle options before displaying
                const optionsWithOriginalIndex = question.options.map((option, originalIndex) => ({ option, originalIndex }));
                const shuffledOptions = shuffleArray(optionsWithOriginalIndex);

                shuffledOptions.forEach(({ option, originalIndex }) => {
                    const optionDiv = document.createElement('div');
                    optionDiv.classList.add('option-card', 'p-3', 'rounded-lg', 'shadow-md', 'cursor-pointer', 'bg-white', 'hover:bg-gray-50', 'text-primary', 'font-medium', 'border', 'border-gray-200');
                    optionDiv.textContent = option;
                    optionDiv.dataset.originalIndex = originalIndex;
                    optionDiv.addEventListener('click', () => selectOption(optionDiv));
                    optionsContainer.appendChild(optionDiv);
                });
                
                // If an answer was already submitted for this question, show it
                if (userAnswers[currentQuestionIndex] !== undefined) {
                    showPreviousAnswer();
                }

                updateNavigationButtons();
                updateProgressBar();
            }
        }

        function selectOption(selectedDiv) {
            if (userAnswers[currentQuestionIndex] !== undefined) return;

            const selectedOptionIndex = parseInt(selectedDiv.dataset.originalIndex);
            const question = quizQuestions[currentQuestionIndex];
            const correctAnswerIndex = question.answer;

            userAnswers[currentQuestionIndex] = selectedOptionIndex;
            questionsAttempted++;

            if (selectedOptionIndex === correctAnswerIndex) {
                score++;
                selectedDiv.classList.add('pulse-green', 'border-green-500');
            } else {
                selectedDiv.classList.add('shake-red', 'border-red-500');
                // Highlight the correct answer
                Array.from(optionsContainer.children).forEach(child => {
                    if (parseInt(child.dataset.originalIndex) === correctAnswerIndex) {
                        child.classList.add('pulse-green', 'border-green-500');
                    }
                });
            }

            explanationText.textContent = `Explanation: ${question.explanation}`;
            explanationContainer.classList.remove('hidden');

            // Disable all options
            Array.from(optionsContainer.children).forEach(child => {
                child.style.pointerEvents = 'none';
            });
        }

        function showPreviousAnswer() {
            const question = quizQuestions[currentQuestionIndex];
            const previouslySelected = userAnswers[currentQuestionIndex];
            const correctAnswerIndex = question.answer;

            Array.from(optionsContainer.children).forEach(child => {
                const childIndex = parseInt(child.dataset.originalIndex);
                child.style.pointerEvents = 'none'; // Disable options on review

                if (childIndex === correctAnswerIndex) {
                    child.classList.add('pulse-green', 'border-green-500');
                }
                if (childIndex === previouslySelected && previouslySelected !== correctAnswerIndex) {
                    child.classList.add('shake-red', 'border-red-500');
                }
            });

            explanationText.textContent = `Explanation: ${question.explanation}`;
            explanationContainer.classList.remove('hidden');
        }


        function updateNavigationButtons() {
            prevButton.disabled = currentQuestionIndex === 0;
            prevButton.classList.toggle('opacity-50', currentQuestionIndex === 0);
            prevButton.classList.toggle('cursor-not-allowed', currentQuestionIndex === 0);
            prevButton.classList.toggle('cursor-pointer', currentQuestionIndex !== 0);

            // Use visibility to hide the 'Next' button on the last question to preserve layout
            if (currentQuestionIndex === quizQuestions.length - 1) {
                nextButton.style.visibility = 'hidden';
            } else {
                nextButton.style.visibility = 'visible';
            }
        }

        function navigateQuestions(direction) {
            if (direction === 'next') {
                if (currentQuestionIndex < quizQuestions.length - 1) {
                    loadQuestion(currentQuestionIndex + 1);
                }
            } else if (direction === 'prev') {
                if (currentQuestionIndex > 0) {
                    loadQuestion(currentQuestionIndex - 1);
                }
            }
        }

        function submitQuiz() {
            quizCompleted = true;
            clearInterval(timerInterval); // Stop the timer

            const finalTimeSeconds = timeElapsed;
            const finalMinutes = Math.floor(finalTimeSeconds / 60);
            const finalSeconds = finalTimeSeconds % 60;
            const formattedFinalTime = `${finalMinutes.toString().padStart(2, '0')}:${finalSeconds.toString().padStart(2, '0')}`;

            resultNameSpan.textContent = userName;
            resultScoreSpan.textContent = score;
            resultTimeSpan.textContent = formattedFinalTime;
            resultAttemptedSpan.textContent = questionsAttempted;

            quizPage.classList.add('hidden');
            resultsPage.classList.remove('hidden');
        }

        function resetQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            questionsAttempted = 0;
            timeElapsed = 0;
            userName = '';
            quizCompleted = false;
            Object.keys(userAnswers).forEach(key => delete userAnswers[key]);
            clearInterval(timerInterval);
            timerSpan.textContent = "40:00";
            progressBar.style.width = '0%';
            progressText.textContent = '0%';
            loginPage.classList.remove('hidden');
            resultsPage.classList.add('hidden');
            candidateInfoPage.classList.add('hidden');
            quizPage.classList.add('hidden');
            usernameInput.value = '';
            passwordInput.value = '';
            fullNameInput.value = '';
            loginError.classList.add('hidden');
            nameError.classList.add('hidden');
            initializeQuizQuestions();
        }

        // Event Listeners
        loginButton.addEventListener('click', () => {
            const username = usernameInput.value.toUpperCase();
            const password = passwordInput.value;

            // Updated login credentials for July 29
            if (username === '29JULY' && password === 'free') {
                loginPage.classList.add('hidden');
                candidateInfoPage.classList.remove('hidden');
                loginError.classList.add('hidden');
            } else {
                loginError.classList.remove('hidden');
            }
        });

        startQuizButton.addEventListener('click', () => {
            const enteredName = fullNameInput.value.trim();
            if (enteredName) {
                userName = enteredName;
                candidateInfoPage.classList.add('hidden');
                quizPage.classList.remove('hidden');
                nameError.classList.add('hidden');
                startTimer();
                loadQuestion(currentQuestionIndex);
            } else {
                nameError.classList.add('hidden');
            }
        });

        nextButton.addEventListener('click', () => navigateQuestions('next'));
        prevButton.addEventListener('click', () => navigateQuestions('prev'));
        
        submitNowButton.addEventListener('click', () => {
            if (!quizCompleted) {
                showModal("Are you sure you want to submit the quiz?", "confirm", (confirmed) => {
                    if (confirmed) {
                        submitQuiz();
                    }
                });
            }
        });

        retakeQuizButton.addEventListener('click', resetQuiz);

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', () => {
            updateLiveDate();
            initializeQuizQuestions();
        });

        // Handle mobile sticky date position
        window.addEventListener('resize', () => {
            const liveDateElement = document.getElementById('live-date');
            if (window.innerWidth < 768) {
                liveDateElement.classList.remove('justify-end');
                liveDateElement.classList.add('justify-start');
            } else {
                liveDateElement.classList.remove('justify-start');
                liveDateElement.classList.add('justify-end');
            }
        });
        window.dispatchEvent(new Event('resize'));

    </script>
</body>
</html>
