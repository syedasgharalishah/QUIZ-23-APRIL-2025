<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS MPT Daily Quiz - July 22, 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&family=Inter:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Include seedrandom.js for consistent daily question shuffling -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/seedrandom/3.0.5/seedrandom.min.js"></script>
    <style>
        /* Base Body Styling */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #FDF5E6; /* Old Lace */
            color: #8B4513; /* SaddleBrown */
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scrolling */
        }

        /* Top Bar Styling */
        .top-bar {
            background-color: #ffffff;
            border-bottom: 1px solid #e0e0e0;
            padding: 0.75rem 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .top-bar .date-display {
            color: #555;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .top-bar .whatsapp-link {
            color: #555;
            text-decoration: none;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Header Section Styling */
        .header-section {
            background-color: #ffffff;
            padding: 1.5rem 1rem;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            margin-bottom: 1rem;
        }

        .quiz-title {
            font-family: 'Roboto', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            color: #8B4513; /* SaddleBrown */
            margin-bottom: 1rem;
        }

        /* Progress Bar Styling */
        .progress-bar-container {
            width: 80%;
            max-width: 600px;
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 1rem auto;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            width: 0%;
            background: linear-gradient(to right, #D2B48C, #CD853F); /* Tan to Peru */
            border-radius: 5px;
            transition: width 0.3s ease-in-out;
        }

        /* Banner Image and Credits */
        .banner-logo {
            max-width: 200px;
            height: auto;
            border-radius: 8px;
            margin-top: 1rem;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .credits {
            font-size: 0.85rem;
            color: #2C3E50;
            margin-top: 0.5rem;
            font-weight: bold;
        }

        /* Card Styling */
        .card {
            background-color: #FAF0E6; /* Linen */
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
            padding: 1.5rem;
            margin: 1rem auto;
            max-width: 700px;
            width: 90%;
            box-sizing: border-box;
        }

        /* Button Styling */
        .button-gradient {
            background-image: linear-gradient(to right, #F4A460, #D2B48C); /* SandyBrown to Tan */
            color: #4B2E2E;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            cursor: pointer;
            border: none;
        }

        .button-gradient:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        
        .submit-button {
             background-image: linear-gradient(to right, #4CAF50, #8BC34A);
             color: white;
        }
        
        .submit-button:hover {
            box-shadow: 0 6px 12px rgba(76, 175, 80, 0.4);
        }

        /* Option Button Styling */
        .option-button {
            background-color: #ffffff;
            border: 1px solid #ddd;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            text-align: left;
            cursor: pointer;
            transition: all 0.2s ease;
            margin-bottom: 0.75rem;
            color: #8B4513;
        }
        
        .option-button:hover:not(.selected) {
            transform: scale(1.02);
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }

        .option-button.selected {
            border-color: #CD853F; /* Peru */
            background-color: #FFF8DC; /* Cornsilk */
            font-weight: bold;
        }

        .option-button.correct {
            background-color: #90EE90; /* LightGreen */
            border-color: #2E8B57; /* SeaGreen */
            animation: pulse-green 0.5s ease-out forwards;
        }

        .option-button.incorrect {
            background-color: #F08080; /* LightCoral */
            border-color: #CD5C5C; /* IndianRed */
            animation: shake-red 0.5s ease-out forwards;
        }

        /* Special Question Highlight */
        .special-question {
            border: 3px solid #FFD700; /* Gold border */
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        /* Explanation Section */
        .explanation {
            background-color: #FFF5EE; /* SeaShell */
            border-left: 5px solid #D2B48C; /* Tan */
            padding: 1rem;
            margin-top: 1rem;
            border-radius: 8px;
            color: #8B4513;
            font-size: 0.9rem;
            display: none; /* Hidden by default */
        }

        /* Responsive Adjustments */
        @media (max-width: 768px) {
            .quiz-title { font-size: 1.5rem; }
            .card { padding: 1rem; }
        }

        /* Keyframe Animations */
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(144, 238, 144, 0); }
            100% { box-shadow: 0 0 0 0 rgba(144, 238, 144, 0); }
        }

        @keyframes shake-red {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
    </style>
</head>
<body>
    
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, setDoc, collection } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        
        // --- Firebase Configuration and Initialization ---
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : {
                apiKey: "AIzaSyALjJrKf6acGhdEYlsKO-gCpBJHw6UbKTs",
                authDomain: "css-quiz-results.firebaseapp.com",
                projectId: "css-quiz-results",
                storageBucket: "css-quiz-results.appspot.com",
                messagingSenderId: "1077285247585",
                appId: "1:1077285247585:web:47e010dd8fa288b9fa2820"
            };
        
        let app, auth, db;
        let userId;

        // Initialize Firebase
        try {
            app = initializeApp(firebaseConfig);
            auth = getAuth(app);
            db = getFirestore(app);
            console.log("Firebase initialized successfully for quiz.");
        } catch (e) {
            console.error("Error initializing Firebase:", e);
            document.body.innerHTML = '<div class="text-red-500 text-center p-8">Error initializing the application. Please check the console for details. This might be due to missing Firebase configuration.</div>';
        }

        // Handle Authentication
        onAuthStateChanged(auth, async (user) => {
            if (user) {
                userId = user.uid;
            } else {
                try {
                    if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                        await signInWithCustomToken(auth, __initial_auth_token);
                    } else {
                        await signInAnonymously(auth);
                    }
                } catch (error) {
                    console.error("Error during sign-in:", error);
                }
            }
        });

        // Make db instance globally available for the submitQuiz function
        window.db = db;
    </script>

    <script>
        // Disable right-click, copy/paste, and developer tools for security
        document.addEventListener('contextmenu', event => event.preventDefault());
        document.addEventListener('keydown', e => {
            if (e.ctrlKey && (e.key === 'u' || e.key === 'U' || e.key === 'I' || e.key === 'i' || e.key === 'J' || e.key === 'j')) {
                e.preventDefault();
            }
            if (e.key === 'F12') { e.preventDefault(); }
        });
        document.addEventListener('copy', event => event.preventDefault());
        document.addEventListener('paste', event => event.preventDefault());
    </script>

    <div class="top-bar">
        <div class="date-display" id="liveDate">
            <i class="fas fa-calendar-alt"></i> <span id="currentDateText"></span>
        </div>
        <a href="https://chat.whatsapp.com/your-whatsapp-community-link" target="_blank" class="whatsapp-link">
            <i class="fab fa-whatsapp"></i> Join WhatsApp Community
        </a>
    </div>

    <div class="header-section">
        <h1 class="quiz-title" id="quizTitle"></h1>
        <div class="progress-bar-container">
            <div class="progress-bar" id="progressBar"></div>
        </div>
        <img src="https://i.ibb.co/tMYHtj6n/480709804-2211254089269599-2819007219717277160-n.jpg" alt="Banner Logo" class="banner-logo mx-auto">
        <div class="credits">
            DAWNDIGEST
            <br>
            PREPARED BY: SYED ASGHAR ALI SHAH Contact: 03265762698
            <br>
            Updated on: <span id="updatedDate"></span>
        </div>
    </div>

    <main class="flex-grow flex items-center justify-center p-4">
        <div id="loginPage" class="card">
            <h2 class="text-xl font-bold mb-4 text-center">Login</h2>
            <div class="mb-4">
                <label for="loginId" class="block text-sm font-medium text-gray-700 mb-1">ID:</label>
                <input type="text" id="loginId" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="">
            </div>
            <div class="mb-6">
                <label for="loginPassword" class="block text-sm font-medium text-gray-700 mb-1">Password:</label>
                <input type="password" id="loginPassword" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" value="free">
            </div>
            <p id="loginError" class="text-red-500 text-sm mb-4 hidden">Invalid ID or Password</p>
            <button id="loginBtn" class="button-gradient w-full">Login</button>
        </div>

        <div id="candidateNamePage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Candidate Information</h2>
            <div class="mb-6">
                <label for="candidateName" class="block text-sm font-medium text-gray-700 mb-1">Enter Full Name:</label>
                <input type="text" id="candidateName" class="w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-yellow-700" placeholder="Your Full Name">
            </div>
            <p id="nameError" class="text-red-500 text-sm mb-4 hidden">Please enter your full name.</p>
            <button id="startQuizBtn" class="button-gradient w-full">Start Quiz</button>
        </div>

        <div id="quizPage" class="card hidden">
            <div class="timer-display text-lg font-bold text-gray-700 mb-4 text-center" id="timerDisplay"></div>
            <div class="question-progress text-center text-sm text-gray-500 mb-4" id="questionProgress"></div>
            <h2 class="text-lg font-semibold mb-4" id="questionText"></h2>
            <div id="optionsContainer" class="flex flex-col gap-3 mb-6"></div>
            <div class="flex justify-between items-center">
                <button id="prevBtn" class="button-gradient px-6 py-2">Previous</button>
                <button id="submitQuizBtn" class="button-gradient submit-button px-6 py-2">Submit</button>
                <button id="nextBtn" class="button-gradient px-6 py-2">Next</button>
            </div>
            <div id="explanationDiv" class="explanation"></div>
        </div>

        <div id="resultsPage" class="card hidden">
            <h2 class="text-xl font-bold mb-4 text-center">Quiz Results</h2>
            <p class="mb-2"><strong>Candidate Name:</strong> <span id="resultCandidateName"></span></p>
            <p class="mb-2"><strong>Date of Quiz:</strong> <span id="resultDate"></span></p>
            <p class="mb-2"><strong>Score:</strong> <span id="resultScore"></span> / 200</p>
            <p class="mb-2"><strong>Correct Answers:</strong> <span id="resultCorrect"></span></p>
            <p class="mb-2"><strong>Incorrect Answers:</strong> <span id="resultIncorrect"></span></p>
            <p class="mb-2"><strong>Attempted MCQs:</strong> <span id="resultAttempted"></span> / 100</p>
            <p class="mb-4"><strong>Time Taken:</strong> <span id="resultTimeTaken"></span></p>
            <button id="restartQuizBtn" class="button-gradient w-full">Restart Quiz</button>
        </div>
    </main>

    <script>
        // Set the current date for display and logic
        const CURRENT_DATE_STR = "July 22, 2025";
        const CURRENT_DATE = new Date(CURRENT_DATE_STR);

        // Function to update the live date display
        function updateLiveDate() {
            document.getElementById('currentDateText').textContent = CURRENT_DATE_STR;
            document.getElementById('updatedDate').textContent = CURRENT_DATE_STR;
            document.getElementById('quizTitle').textContent = `CSS MPT Daily Quiz – ${CURRENT_DATE_STR}`;
        }

        // Quiz Data Structure
        let quizQuestions = []; // Will be populated by initializeQuiz
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let quizStartTime;
        let timerInterval;
        const QUIZ_DURATION_MINUTES = 100;
        const TOTAL_QUESTIONS = 100;
        let specialQuestionIndex = -1;
        let quizSubmitted = false;

        // --- Helper Functions ---
        function shuffleArrayWithSeed(array, seed) {
            let rng = new Math.seedrandom(seed);
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(rng() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        function generateUniqueId() {
            return 'quiz_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
        }

        function formatTime(totalSeconds) {
            const minutes = Math.floor(totalSeconds / 60);
            const seconds = totalSeconds % 60;
            return `${minutes} minutes ${seconds} seconds`;
        }

        function updateProgressBar() {
            const progress = ((currentQuestionIndex + 1) / quizQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('questionProgress').textContent = `Question ${currentQuestionIndex + 1}/${quizQuestions.length} – ${Math.round(progress)}% Complete`;
        }

        function showPage(pageId) {
            ['loginPage', 'candidateNamePage', 'quizPage', 'resultsPage'].forEach(id => {
                const el = document.getElementById(id);
                if (el) el.classList.add('hidden');
            });
            const pageToShow = document.getElementById(pageId);
            if(pageToShow) pageToShow.classList.remove('hidden');
        }

        function startTimer() {
            quizStartTime = Date.now();
            let timeLeft = QUIZ_DURATION_MINUTES * 60;

            function updateTimerDisplay() {
                const minutes = Math.floor(timeLeft / 60);
                const seconds = timeLeft % 60;
                const timerDisplay = document.getElementById('timerDisplay');
                if(timerDisplay) timerDisplay.textContent = `Time Left: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    if (!quizSubmitted) submitQuiz(true);
                } else {
                    timeLeft--;
                }
            }
            updateTimerDisplay();
            timerInterval = setInterval(updateTimerDisplay, 1000);
        }

        function renderQuestion() {
            const question = quizQuestions[currentQuestionIndex];
            document.getElementById('questionText').innerHTML = question.question;
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';

            const quizCard = document.getElementById('quizPage');
            quizCard.classList.remove('special-question');
            if (question.special) {
                quizCard.classList.add('special-question');
            }
            
            const optionSeed = `${CURRENT_DATE_STR}-${currentQuestionIndex}`;
            const shuffledOptions = [...question.options];
            shuffleArrayWithSeed(shuffledOptions, optionSeed);

            shuffledOptions.forEach((option) => {
                const button = document.createElement('button');
                button.classList.add('option-button', 'w-full');
                button.innerHTML = option;
                button.dataset.originalOptionIndex = question.options.indexOf(option);
                button.onclick = () => selectOption(parseInt(button.dataset.originalOptionIndex));
                optionsContainer.appendChild(button);
            });

            const userAnswer = userAnswers[currentQuestionIndex];
            if (userAnswer && userAnswer.selectedOptionIndex !== undefined) {
                 Array.from(optionsContainer.children).forEach((button, index) => {
                    button.disabled = true;
                    const btnOriginalIndex = question.options.indexOf(shuffledOptions[index]);
                    if (btnOriginalIndex === userAnswer.selectedOptionIndex) {
                        button.classList.add('selected', userAnswer.isCorrect ? 'correct' : 'incorrect');
                    }
                    if (userAnswer.isCorrect === false && btnOriginalIndex === question.correctOptionIndex) {
                         button.classList.add('correct');
                    }
                });
            }

            const explanationDiv = document.getElementById('explanationDiv');
            explanationDiv.innerHTML = `<p class="font-bold">Explanation:</p><p>${question.explanation}</p>`;
            explanationDiv.style.display = (userAnswer && userAnswer.selectedOptionIndex !== undefined) ? 'block' : 'none';

            document.getElementById('prevBtn').classList.toggle('hidden', currentQuestionIndex === 0);
            const showNextButton = currentQuestionIndex < quizQuestions.length - 1;
            document.getElementById('nextBtn').classList.toggle('hidden', !showNextButton);
        }

        function selectOption(selectedOptionOriginalIndex) {
            if (userAnswers[currentQuestionIndex] !== null && userAnswers[currentQuestionIndex].selectedOptionIndex !== undefined) return;

            const question = quizQuestions[currentQuestionIndex];
            const isCorrect = (selectedOptionOriginalIndex === question.correctOptionIndex);
            userAnswers[currentQuestionIndex] = {
                questionIndex: currentQuestionIndex,
                selectedOptionIndex: selectedOptionOriginalIndex,
                isCorrect: isCorrect
            };
            
            renderQuestion(); // Re-render to show selection and explanation
        }
        
        function nextQuestion() {
            if (currentQuestionIndex < quizQuestions.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            }
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        async function submitQuiz(isAutoSubmit = false) {
            if(quizSubmitted) return;
            quizSubmitted = true;

            clearInterval(timerInterval);
            const endTime = Date.now();
            const timeTakenSeconds = Math.round((endTime - quizStartTime) / 1000);

            let correctCount = 0;
            let incorrectCount = 0;
            let attemptedCount = 0;
            userAnswers.forEach(answer => {
                if (answer && answer.selectedOptionIndex !== undefined) {
                    attemptedCount++;
                    if (answer.isCorrect) correctCount++;
                    else incorrectCount++;
                }
            });

            const score = (correctCount * 2) - incorrectCount;
            const candidateName = document.getElementById('candidateName').value;

            document.getElementById('resultCandidateName').textContent = candidateName;
            document.getElementById('resultDate').textContent = CURRENT_DATE_STR;
            document.getElementById('resultScore').textContent = `${score}`;
            document.getElementById('resultCorrect').textContent = `${correctCount}`;
            document.getElementById('resultIncorrect').textContent = `${incorrectCount}`;
            document.getElementById('resultAttempted').textContent = `${attemptedCount} / ${TOTAL_QUESTIONS}`;
            document.getElementById('resultTimeTaken').textContent = formatTime(timeTakenSeconds);
            
            showPage('resultsPage');

            const resultData = {
                candidateName: candidateName,
                quizDate: CURRENT_DATE_STR,
                score: score,
                correctCount: correctCount,
                incorrectCount: incorrectCount,
                attemptedCount: attemptedCount,
                timeTaken: formatTime(timeTakenSeconds),
                timeTakenSeconds: timeTakenSeconds,
                submittedAt: new Date().toISOString()
            };
            
            const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-quiz-app';
            if (window.db) {
                try {
                    const { doc, collection, setDoc } = await import("https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js");
                    const resultsCollectionPath = `/artifacts/${appId}/public/data/quiz_results`;
                    const newResultRef = doc(collection(window.db, resultsCollectionPath)); 
                    await setDoc(newResultRef, resultData);
                    console.log("Result saved to Firestore.");
                } catch (error) {
                    console.error("Error writing document to Firestore: ", error);
                }
            } else {
                 console.error("Firestore database (db) not initialized on window object.");
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    const loginIdInput = document.getElementById('loginId');
                    const loginPasswordInput = document.getElementById('loginPassword');
                    const loginError = document.getElementById('loginError');

                    const id = loginIdInput ? loginIdInput.value : '';
                    const password = loginPasswordInput ? loginPasswordInput.value : '';
                    
                    if (id === 'syedasgharalishah' && password === 'admin') {
                        alert('Admin login is not handled in this file. Please use the admin panel file.');
                        return;
                    }
                    if (id.toUpperCase() === '22JULY' && password === 'free') {
                        if (loginError) loginError.classList.add('hidden');
                        showPage('candidateNamePage');
                    } else {
                        if (loginError) loginError.classList.remove('hidden');
                    }
                });
            }

            const startQuizBtn = document.getElementById('startQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    const candidateNameInput = document.getElementById('candidateName');
                    const nameError = document.getElementById('nameError');
                    const candidateName = candidateNameInput ? candidateNameInput.value.trim() : '';
                    
                    if (candidateName) {
                        if (nameError) nameError.classList.add('hidden');
                        userAnswers = new Array(quizQuestions.length).fill(null);
                        currentQuestionIndex = 0;
                        quizSubmitted = false;
                        startTimer();
                        renderQuestion();
                        showPage('quizPage');
                    } else {
                        if (nameError) nameError.classList.remove('hidden');
                    }
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.addEventListener('click', prevQuestion);
            
            const submitQuizBtn = document.getElementById('submitQuizBtn');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => submitQuiz(false));
            
            const restartQuizBtn = document.getElementById('restartQuizBtn');
            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    clearInterval(timerInterval);
                    initializeQuiz();
                    showPage('loginPage');
                });
            }
            
            // Initial setup calls
            initializeQuiz();
            updateLiveDate();
            showPage('loginPage'); 

            // Handle initial loginId display
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) {
                const dateParts = CURRENT_DATE_STR.split(' ');
                const monthName = dateParts[0].toUpperCase();
                const day = parseInt(dateParts[1].replace(',', ''));
                loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`; // e.g., 22JUL
            }
        });

        // --- Quiz Initialization ---
        function initializeQuiz() {
            quizQuestions.length = 0;
            const dateSeed = CURRENT_DATE_STR;
            
            const allQuestions = [
                // === July 22nd Syllabus Quiz (100 MCQs) ===

                // General Knowledge: Abbreviations (pp. 126-130) - 40 Questions
                { "question": "What does 'F.I.R.' stand for?", "options": ["First Information Report", "Final Information Report", "First Inquiry Report", "Federal Information Report"], "correctOptionIndex": 0, "explanation": "F.I.R. stands for First Information Report.", "source_page": 126 },
                { "question": "What does 'G.H.Q.' stand for?", "options": ["General Head Quarters", "Grand Head Quarters", "General High Quarters", "Government Head Quarters"], "correctOptionIndex": 0, "explanation": "G.H.Q. stands for General Head Quarters.", "source_page": 126 },
                { "question": "What does 'I.S.I.' stand for?", "options": ["Internal Services Intelligence", "Inter-Services Investigation", "Inter-Services Intelligence", "International Services Intelligence"], "correctOptionIndex": 2, "explanation": "I.S.I. stands for Inter-Services Intelligence.", "source_page": 127 },
                { "question": "What does 'K.G.B.' stand for?", "options": ["Komitet Gosudarstvennoy Bezopasnosti", "Kremlin General Bureau", "Komitet General Bezopasnosti", "Kremlin Gosudarstvennoy Bureau"], "correctOptionIndex": 0, "explanation": "K.G.B. stands for Komitet Gosudarstvennoy Bezopasnosti (Committee for State Security).", "source_page": 127 },
                { "question": "What does 'M.I.' stand for?", "options": ["Military Intelligence", "Major Intelligence", "Main Intelligence", "Military Investigation"], "correctOptionIndex": 0, "explanation": "M.I. stands for Military Intelligence.", "source_page": 128 },
                { "question": "What does 'N.A.T.O.' stand for?", "options": ["North Atlantic Treaty Organization", "North Asian Treaty Organization", "North American Trade Organization", "New Atlantic Treaty Organization"], "correctOptionIndex": 0, "explanation": "N.A.T.O. stands for North Atlantic Treaty Organization.", "source_page": 128 },
                { "question": "What does 'P.A.F.' stand for?", "options": ["Pakistan Air Force", "Pakistan Army Force", "Pakistan Armed Force", "Punjab Air Force"], "correctOptionIndex": 0, "explanation": "P.A.F. stands for Pakistan Air Force.", "source_page": 129 },
                { "question": "What does 'R.A.F.' stand for?", "options": ["Russian Air Force", "Royal Air Force", "Rapid Action Force", "Royal Army Force"], "correctOptionIndex": 1, "explanation": "R.A.F. stands for Royal Air Force (of the United Kingdom).", "source_page": 129 },
                { "question": "What does 'S.S.G.' stand for?", "options": ["Special Security Group", "Special Services Group", "State Security Group", "Strategic Services Group"], "correctOptionIndex": 1, "explanation": "S.S.G. stands for Special Services Group.", "source_page": 130 },
                { "question": "What does 'U.N.O.' stand for?", "options": ["United Nations Organization", "Union of National Organizations", "United National Office", "United Nations Office"], "correctOptionIndex": 0, "explanation": "U.N.O. stands for United Nations Organization.", "source_page": 130 },
                { "question": "What does 'G.P.O.' stand for?", "options": ["General Post Office", "Government Post Office", "Grand Post Office", "General Postal Office"], "correctOptionIndex": 0, "explanation": "G.P.O. stands for General Post Office.", "source_page": 126 },
                { "question": "What does 'I.G.' stand for?", "options": ["Inspector General", "Internal Guard", "Inspector of Government", "Intelligence General"], "correctOptionIndex": 0, "explanation": "I.G. stands for Inspector General (of Police).", "source_page": 127 },
                { "question": "What does 'L.L.B.' stand for?", "options": ["Bachelor of Law and Legislation", "Legum Baccalaureus (Bachelor of Laws)", "Bachelor of Legal Letters", "Licensed Lawyer of Britain"], "correctOptionIndex": 1, "explanation": "L.L.B. stands for Legum Baccalaureus, which is Latin for Bachelor of Laws.", "source_page": 127 },
                { "question": "What does 'M.O.U.' stand for?", "options": ["Memorandum of Understanding", "Memorandum of Unity", "Movement of Understanding", "Memorandum of Union"], "correctOptionIndex": 0, "explanation": "M.O.U. stands for Memorandum of Understanding.", "source_page": 128 },
                { "question": "What does 'N.G.O.' stand for?", "options": ["Non-Governmental Organization", "National Governmental Organization", "New Governmental Organization", "Non-Guaranteed Organization"], "correctOptionIndex": 0, "explanation": "N.G.O. stands for Non-Governmental Organization.", "source_page": 128 },
                { "question": "What does 'P.C.S.' stand for?", "options": ["Pakistan Civil Service", "Provincial Civil Service", "Public Civil Service", "Pakistan Commissioned Service"], "correctOptionIndex": 1, "explanation": "P.C.S. stands for Provincial Civil Service.", "source_page": 129 },
                { "question": "What does 'R.S.V.P.' stand for?", "options": ["Reply Soon Via Post", "Répondez s'il vous plaît (Reply, if you please)", "Reserve Soon Via Phone", "Reply, Send Verification Please"], "correctOptionIndex": 1, "explanation": "R.S.V.P. is an abbreviation of the French phrase 'Répondez s'il vous plaît', meaning 'Please respond'.", "source_page": 129 },
                { "question": "What does 'U.A.E.' stand for?", "options": ["United Arab Emirates", "Union of Arab Emirates", "United African Emirates", "United Asian Emirates"], "correctOptionIndex": 0, "explanation": "U.A.E. stands for United Arab Emirates.", "source_page": 130 },
                { "question": "What does 'V.I.P.' stand for?", "options": ["Very Important Person", "Very Important Personality", "Valuable Important Person", "Very Influential Person"], "correctOptionIndex": 0, "explanation": "V.I.P. stands for Very Important Person.", "source_page": 130 },
                { "question": "What does 'H.Q.' stand for?", "options": ["High Quality", "Head Quarters", "High Quota", "High Quantity"], "correctOptionIndex": 1, "explanation": "H.Q. stands for Head Quarters.", "source_page": 126 },
                { "question": "What does 'I.S.P.R.' stand for?", "options": ["Inter-Services Public Relations", "Internal Security Public Relations", "Inter-State Public Relations", "International Services Public Relations"], "correctOptionIndex": 0, "explanation": "I.S.P.R. stands for Inter-Services Public Relations.", "source_page": 127 },
                { "question": "What does 'M.B.B.S.' stand for?", "options": ["Bachelor of Medicine and Bachelor of Surgery", "Master of Medicine and Bachelor of Surgery", "Bachelor of Medical and Biological Sciences", "Master of Biological and Bacterial Sciences"], "correctOptionIndex": 0, "explanation": "M.B.B.S. stands for Bachelor of Medicine, Bachelor of Surgery.", "source_page": 128 },
                { "question": "What does 'N.O.C.' stand for?", "options": ["No Objection Certificate", "National Olympic Committee", "No Official Comment", "Both A and B"], "correctOptionIndex": 3, "explanation": "N.O.C. can stand for both No Objection Certificate and National Olympic Committee.", "source_page": 128 },
                { "question": "What does 'P.I.A.' stand for?", "options": ["Pakistan International Airlines", "Pakistan International Airport", "Punjab International Airlines", "Pakistan Imperial Airways"], "correctOptionIndex": 0, "explanation": "P.I.A. stands for Pakistan International Airlines.", "source_page": 129 },
                { "question": "What does 'S.H.O.' stand for?", "options": ["Senior House Officer", "Station House Officer", "Security House Officer", "State House Officer"], "correctOptionIndex": 1, "explanation": "S.H.O. stands for Station House Officer.", "source_page": 130 },
                { "question": "What does 'U.K.' stand for?", "options": ["United Kingdom", "United Kingdom of Europe", "Union of Kingdoms", "United Kingdom of America"], "correctOptionIndex": 0, "explanation": "U.K. stands for United Kingdom.", "source_page": 130 },
                { "question": "What does 'W.T.O.' stand for?", "options": ["World Trade Organization", "World Tourist Organization", "World Transport Organization", "Western Trade Organization"], "correctOptionIndex": 0, "explanation": "W.T.O. stands for World Trade Organization.", "source_page": 130 },
                { "question": "What does 'I.C.U.' stand for?", "options": ["Intensive Care Unit", "Internal Care Unit", "Immediate Care Unit", "Intensive Cardiac Unit"], "correctOptionIndex": 0, "explanation": "I.C.U. stands for Intensive Care Unit.", "source_page": 127 },
                { "question": "What does 'K.R.L.' stand for?", "options": ["Khan Research Laboratories", "Karachi Research Laboratories", "Kashmir Research Laboratories", "Khyber Research Laboratories"], "correctOptionIndex": 0, "explanation": "K.R.L. stands for Khan Research Laboratories.", "source_page": 127 },
                { "question": "What does 'M.N.A.' stand for?", "options": ["Member of National Assembly", "Minister of National Affairs", "Master of National Administration", "Member of National Administration"], "correctOptionIndex": 0, "explanation": "M.N.A. stands for Member of National Assembly.", "source_page": 128 },
                { "question": "What does 'P.M.' stand for?", "options": ["Prime Minister", "Post Meridiem", "President Minister", "Both A and B"], "correctOptionIndex": 3, "explanation": "P.M. can stand for both Prime Minister and Post Meridiem (after midday).", "source_page": 129 },
                { "question": "What does 'U.S.A.' stand for?", "options": ["United States of America", "Union of South America", "United States of Asia", "United States Alliance"], "correctOptionIndex": 0, "explanation": "U.S.A. stands for United States of America.", "source_page": 130 },
                { "question": "What does 'Z.I.A.' stand for?", "options": ["Zia-ul-Haq International Airport", "Zulfiqarabad International Airport", "Zone of International Affairs", "Zia International Airport"], "correctOptionIndex": 3, "explanation": "Z.I.A. stands for Zia International Airport (the former name of Hazrat Shahjalal International Airport in Dhaka).", "source_page": 130 },
                { "question": "What does 'I.M.F.' stand for?", "options": ["International Monetary Fund", "International Money Fund", "International Market Fund", "Indian Monetary Fund"], "correctOptionIndex": 0, "explanation": "I.M.F. stands for International Monetary Fund.", "source_page": 127 },
                { "question": "What does 'M.P.A.' stand for?", "options": ["Member of Provincial Assembly", "Master of Public Administration", "Minister of Provincial Affairs", "Both A and B"], "correctOptionIndex": 3, "explanation": "M.P.A. can stand for both Member of Provincial Assembly and Master of Public Administration.", "source_page": 128 },
                { "question": "What does 'P.T.V.' stand for?", "options": ["Pakistan Television", "Public Television", "Provincial Television", "Pakistan Telecom Vision"], "correctOptionIndex": 0, "explanation": "P.T.V. stands for Pakistan Television.", "source_page": 129 },
                { "question": "What does 'U.N.H.C.R.' stand for?", "options": ["United Nations High Commissioner for Refugees", "United Nations Human Commission for Rights", "United Nations Health Committee for Refugees", "United Nations High Council for Refugees"], "correctOptionIndex": 0, "explanation": "U.N.H.C.R. stands for United Nations High Commissioner for Refugees.", "source_page": 130 },
                { "question": "What does 'I.S.S.B.' stand for?", "options": ["Inter-Services Selection Board", "Internal Security Selection Board", "International Services Selection Board", "Inter-State Selection Board"], "correctOptionIndex": 0, "explanation": "I.S.S.B. stands for Inter-Services Selection Board.", "source_page": 127 },
                { "question": "What does 'Ph.D.' stand for?", "options": ["Doctor of Philosophy", "Doctor of Physics", "Doctor of Philology", "Professional Doctorate"], "correctOptionIndex": 0, "explanation": "Ph.D. stands for Doctor of Philosophy.", "source_page": 129 },
                { "question": "What does 'U.F.O.' stand for?", "options": ["Unidentified Flying Object", "Undercover Flying Object", "Unusual Flying Object", "Unknown Flying Object"], "correctOptionIndex": 0, "explanation": "U.F.O. stands for Unidentified Flying Object.", "source_page": 130 },

                // English: Antonyms (pp. 498-502) - 35 Questions
                { "question": "Choose the antonym for ABUNDANCE.", "options": ["Plentiful", "Ample", "Scarcity", "Wealth"], "correctOptionIndex": 2, "explanation": "Abundance means a large quantity of something, while scarcity means a shortage.", "source_page": 498 },
                { "question": "Choose the antonym for BRAVERY.", "options": ["Courage", "Valor", "Cowardice", "Boldness"], "correctOptionIndex": 2, "explanation": "Bravery is the quality of being courageous, whereas cowardice is the lack of bravery.", "source_page": 498 },
                { "question": "Choose the antonym for CREATE.", "options": ["Build", "Make", "Form", "Destroy"], "correctOptionIndex": 3, "explanation": "To create is to bring something into existence; to destroy is to end its existence.", "source_page": 499 },
                { "question": "Choose the antonym for DEMAND.", "options": ["Request", "Claim", "Supply", "Order"], "correctOptionIndex": 2, "explanation": "In economics, demand (what people want) is the opposite of supply (what is available).", "source_page": 499 },
                { "question": "Choose the antonym for EXPAND.", "options": ["Increase", "Grow", "Widen", "Contract"], "correctOptionIndex": 3, "explanation": "To expand is to become larger; to contract is to become smaller.", "source_page": 500 },
                { "question": "Choose the antonym for FRIEND.", "options": ["Ally", "Companion", "Foe", "Partner"], "correctOptionIndex": 2, "explanation": "A friend is a person one likes and trusts; a foe is an enemy.", "source_page": 500 },
                { "question": "Choose the antonym for GATHER.", "options": ["Collect", "Assemble", "Scatter", "Group"], "correctOptionIndex": 2, "explanation": "To gather is to bring things together; to scatter is to throw them in random directions.", "source_page": 501 },
                { "question": "Choose the antonym for HONESTY.", "options": ["Integrity", "Truthfulness", "Deceit", "Sincerity"], "correctOptionIndex": 2, "explanation": "Honesty is the quality of being truthful, while deceit is the quality of being dishonest.", "source_page": 501 },
                { "question": "Choose the antonym for INNOCENT.", "options": ["Guilty", "Blameless", "Pure", "Harmless"], "correctOptionIndex": 0, "explanation": "Innocent means not responsible for a crime, while guilty means responsible for it.", "source_page": 502 },
                { "question": "Choose the antonym for ACCEPT.", "options": ["Receive", "Admit", "Reject", "Agree"], "correctOptionIndex": 2, "explanation": "To accept is to agree to receive something; to reject is to refuse it.", "source_page": 498 },
                { "question": "Choose the antonym for BRIGHT.", "options": ["Shining", "Radiant", "Dull", "Vivid"], "correctOptionIndex": 2, "explanation": "Bright means giving out or reflecting a lot of light, while dull means lacking brightness.", "source_page": 498 },
                { "question": "Choose the antonym for CRUEL.", "options": ["Brutal", "Kind", "Vicious", "Harsh"], "correctOptionIndex": 1, "explanation": "Cruel means willfully causing pain or suffering, while kind means being friendly and considerate.", "source_page": 499 },
                { "question": "Choose the antonym for DIFFICULT.", "options": ["Hard", "Challenging", "Easy", "Tough"], "correctOptionIndex": 2, "explanation": "Difficult means needing much effort or skill, while easy means achieved without great effort.", "source_page": 499 },
                { "question": "Choose the antonym for ENTRANCE.", "options": ["Inlet", "Opening", "Exit", "Doorway"], "correctOptionIndex": 2, "explanation": "An entrance is a way in, while an exit is a way out.", "source_page": 500 },
                { "question": "Choose the antonym for FAMOUS.", "options": ["Renowned", "Well-known", "Obscure", "Prominent"], "correctOptionIndex": 2, "explanation": "Famous means known by many people, while obscure means not well known.", "source_page": 500 },
                { "question": "Choose the antonym for GUEST.", "options": ["Visitor", "Host", "Caller", "Company"], "correctOptionIndex": 1, "explanation": "A guest is a person who is invited to visit, while a host is the person who receives or entertains them.", "source_page": 501 },
                { "question": "Choose the antonym for HOPE.", "options": ["Aspiration", "Desire", "Despair", "Ambition"], "correctOptionIndex": 2, "explanation": "Hope is a feeling of expectation and desire for a certain thing to happen, while despair is the complete loss or absence of hope.", "source_page": 501 },
                { "question": "Choose the antonym for JUNIOR.", "options": ["Senior", "Younger", "Inferior", "Lesser"], "correctOptionIndex": 0, "explanation": "Junior refers to a lower status or younger age, while senior refers to a higher status or older age.", "source_page": 502 },
                { "question": "Choose the antonym for ANCIENT.", "options": ["Old", "Aged", "Modern", "Antique"], "correctOptionIndex": 2, "explanation": "Ancient refers to the distant past, while modern refers to the present or recent times.", "source_page": 498 },
                { "question": "Choose the antonym for BUSY.", "options": ["Occupied", "Engaged", "Idle", "Active"], "correctOptionIndex": 2, "explanation": "Busy means having a great deal to do, while idle means not active or working.", "source_page": 498 },
                { "question": "Choose the antonym for DEFICIT.", "options": ["Shortage", "Loss", "Surplus", "Debt"], "correctOptionIndex": 2, "explanation": "A deficit is when expenses exceed revenues, while a surplus is when revenues exceed expenses.", "source_page": 499 },
                { "question": "Choose the antonym for ENCOURAGE.", "options": ["Support", "Promote", "Discourage", "Inspire"], "correctOptionIndex": 2, "explanation": "To encourage is to give support or hope, while to discourage is to cause someone to lose confidence or enthusiasm.", "source_page": 500 },
                { "question": "Choose the antonym for FOOLISH.", "options": ["Silly", "Wise", "Absurd", "Unwise"], "correctOptionIndex": 1, "explanation": "Foolish means lacking good sense, while wise means having good judgment.", "source_page": 500 },
                { "question": "Choose the antonym for GLORY.", "options": ["Honor", "Prestige", "Shame", "Fame"], "correctOptionIndex": 2, "explanation": "Glory is high renown or honor, while shame is a painful feeling of humiliation.", "source_page": 501 },
                { "question": "Choose the antonym for HUMBLE.", "options": ["Modest", "Meek", "Proud", "Unassuming"], "correctOptionIndex": 2, "explanation": "Humble means having a low estimate of one's own importance, while proud means having a high opinion of oneself.", "source_page": 501 },
                { "question": "Choose the antonym for KNOWLEDGE.", "options": ["Wisdom", "Learning", "Ignorance", "Understanding"], "correctOptionIndex": 2, "explanation": "Knowledge is awareness or familiarity gained by experience, while ignorance is the lack of knowledge.", "source_page": 502 },
                { "question": "Choose the antonym for BLESSING.", "options": ["Curse", "Benefit", "Boon", "Favor"], "correctOptionIndex": 0, "explanation": "A blessing is God's favor and protection, while a curse is a solemn utterance intended to invoke harm.", "source_page": 498 },
                { "question": "Choose the antonym for CHEAP.", "options": ["Inexpensive", "Costly", "Low-priced", "Economical"], "correctOptionIndex": 1, "explanation": "Cheap means low in price, while costly means expensive.", "source_page": 499 },
                { "question": "Choose the antonym for DOMESTIC.", "options": ["Home", "Native", "Foreign", "Local"], "correctOptionIndex": 2, "explanation": "Domestic relates to one's own country, while foreign relates to another country.", "source_page": 499 },
                { "question": "Choose the antonym for EXTERIOR.", "options": ["Outside", "Outer", "Surface", "Interior"], "correctOptionIndex": 3, "explanation": "The exterior is the outer surface, while the interior is the inner part.", "source_page": 500 },
                { "question": "Choose the antonym for FRESH.", "options": ["New", "Recent", "Stale", "Modern"], "correctOptionIndex": 2, "explanation": "Fresh means not previously known or used, while stale means no longer fresh.", "source_page": 500 },
                { "question": "Choose the antonym for HEAVEN.", "options": ["Paradise", "Utopia", "Hell", "Zion"], "correctOptionIndex": 2, "explanation": "Heaven is a place of eternal happiness, while hell is a place of eternal suffering.", "source_page": 501 },
                { "question": "Choose the antonym for INCLUDE.", "options": ["Comprise", "Encompass", "Exclude", "Involve"], "correctOptionIndex": 2, "explanation": "To include is to make part of a whole, while to exclude is to keep out.", "source_page": 502 },
                { "question": "Choose the antonym for KING.", "options": ["Monarch", "Ruler", "Subject", "Emperor"], "correctOptionIndex": 2, "explanation": "A king is a male sovereign ruler, while a subject is a person under the rule of a monarch.", "source_page": 502 },
                { "question": "Choose the antonym for BOLD.", "options": ["Brave", "Courageous", "Timid", "Daring"], "correctOptionIndex": 2, "explanation": "Bold means willing to take risks, while timid means showing a lack of courage.", "source_page": 498 },

                // General Abilities: Heights and Distances (pp. 546-547) & Alligation or Mixture (pp. 548-549) - 25 Questions
                { "question": "The angle of elevation of the sun, when the length of the shadow of a tree is √3 times the height of the tree, is:", "options": ["30°", "45°", "60°", "75°"], "correctOptionIndex": 0, "explanation": "tan(θ) = Height/Shadow = h/(h√3) = 1/√3. Therefore, θ = 30°.", "source_page": 546 },
                { "question": "A ladder 15 m long just reaches the top of a vertical wall. If the ladder makes an angle of 60° with the wall, then the height of the wall is:", "options": ["15√3 m", "7.5√3 m", "7.5 m", "15 m"], "correctOptionIndex": 2, "explanation": "The angle with the ground is 90°-60°=30°. sin(30°) = Height/Ladder. Height = 15 * sin(30°) = 15 * 0.5 = 7.5 m.", "source_page": 546 },
                { "question": "From a point on the ground, the angle of elevation of the top of a tower is 30°. After walking 40m towards the tower, the angle becomes 60°. The height of the tower is:", "options": ["20 m", "20√3 m", "10√3 m", "40 m"], "correctOptionIndex": 1, "explanation": "Let height be h and initial distance be x. tan(30°)=h/x and tan(60°)=h/(x-40). Solving these two equations gives h = 20√3 m.", "source_page": 547 },
                { "question": "In what ratio must a grocer mix two varieties of pulses costing Rs. 15 and Rs. 20 per kg respectively so as to get a mixture worth Rs. 16.50 per kg?", "options": ["3:7", "5:7", "7:3", "7:5"], "correctOptionIndex": 2, "explanation": "Using the rule of alligation: (Cheaper Qty) : (Dearer Qty) = (20 - 16.50) : (16.50 - 15) = 3.50 : 1.50 = 35:15 = 7:3.", "source_page": 548 },
                { "question": "A mixture of 30 litres contains milk and water in the ratio 7:3. How much water must be added to it so that the ratio of milk and water becomes 3:7?", "options": ["30 litres", "40 litres", "45 litres", "50 litres"], "correctOptionIndex": 1, "explanation": "Initial milk = (7/10)*30 = 21L. Initial water = 9L. Let x be water added. New ratio: 21 / (9+x) = 3/7. 147 = 27 + 3x. 120 = 3x. x = 40 litres.", "source_page": 548 },
                { "question": "In what ratio must water be mixed with milk to gain 20% by selling the mixture at cost price?", "options": ["1:4", "1:5", "1:6", "1:7"], "correctOptionIndex": 1, "explanation": "Let CP of milk be Re 1. SP of mixture = Re 1. Gain = 20%. CP of mixture = (100/120)*1 = 5/6. By alligation, Ratio of Water:Milk = (1 - 5/6) : (5/6 - 0) = 1/6 : 5/6 = 1:5.", "source_page": 549 },
                { "question": "If the height of a pole is equal to the length of its shadow, the angle of elevation of the sun is:", "options": ["30°", "45°", "60°", "90°"], "correctOptionIndex": 1, "explanation": "tan(θ) = Height/Shadow. If Height = Shadow, then tan(θ) = 1, which means θ = 45°.", "source_page": 546 },
                { "question": "From the top of a 100 m high tower, the angle of depression of a point on the ground is 30°. The distance of the point from the foot of the tower is:", "options": ["100 m", "100√3 m", "100/√3 m", "200 m"], "correctOptionIndex": 1, "explanation": "The angle of elevation from the point is also 30°. tan(30°) = 100/Distance. 1/√3 = 100/Distance. Distance = 100√3 m.", "source_page": 546 },
                { "question": "A container has 40 litres of milk. From this, 4 litres of milk was taken out and replaced by water. This process was repeated further two times. How much milk is now in the container?", "options": ["29.16 litres", "28 litres", "26.34 litres", "24 litres"], "correctOptionIndex": 0, "explanation": "Amount of milk left = 40 * (1 - 4/40)^3 = 40 * (9/10)^3 = 40 * (729/1000) = 29.16 litres.", "source_page": 549 },
                { "question": "A man standing on the bank of a river observes that the angle subtended by a tree on the opposite bank is 60°. When he retires 20 m from the bank, he finds the angle to be 30°. The breadth of the river is:", "options": ["10 m", "15 m", "20 m", "25 m"], "correctOptionIndex": 0, "explanation": "Let breadth be x and height be h. tan(60°)=h/x => h=x√3. tan(30°)=h/(x+20) => 1/√3 = x√3/(x+20) => x+20=3x => 2x=20 => x=10 m.", "source_page": 547 },
                { "question": "How many kg of rice at Rs. 42 per kg be mixed with 8 kg of rice at Rs. 50 per kg to get a mixture worth Rs. 46 per kg?", "options": ["6 kg", "8 kg", "10 kg", "12 kg"], "correctOptionIndex": 1, "explanation": "By alligation: (50-46) : (46-42) = 4 : 4 = 1:1. The ratio of quantities must be 1:1. So, 8 kg of the first type must be mixed.", "source_page": 548 },
                { "question": "The angle of elevation of the top of a building from a point on the ground is 45°. The distance of the point from the building is 50 m. Find the height of the building.", "options": ["25 m", "50 m", "50√2 m", "50√3 m"], "correctOptionIndex": 1, "explanation": "tan(45°) = Height/Distance. Since tan(45°) = 1, Height = Distance = 50 m.", "source_page": 546 },
                { "question": "A milk vendor has 2 cans of milk. The first contains 25% water and the rest milk. The second contains 50% water. How much milk should he mix from each of the containers so as to get 12 litres of a mixture with water to milk ratio of 3:5?", "options": ["6 litres, 6 litres", "7 litres, 5 litres", "5 litres, 7 litres", "4 litres, 8 litres"], "correctOptionIndex": 0, "explanation": "Target mixture has water = 3/8. First can has water = 1/4. Second can has water = 1/2. By alligation on water: (1/2 - 3/8) : (3/8 - 1/4) = 1/8 : 1/8 = 1:1. So, he must mix equal quantities, i.e., 6 litres from each.", "source_page": 549 },
                { "question": "The angle of depression of two ships from the top of a lighthouse are 45° and 30° towards east. If the ships are 200 m apart, the height of the lighthouse is:", "options": ["100(√3+1) m", "100(√3-1) m", "100√3 m", "200 m"], "correctOptionIndex": 0, "explanation": "Let h be height. Let x be distance to nearer ship. tan45=h/x => x=h. tan30=h/(x+200) => 1/√3=h/(h+200) => h+200=h√3 => h(√3-1)=200 => h=200/(√3-1) = 100(√3+1) m.", "source_page": 547 },
                { "question": "A merchant has 1000 kg of sugar, part of which he sells at 8% profit and the rest at 18% profit. He gains 14% on the whole. The quantity sold at 18% profit is:", "options": ["400 kg", "560 kg", "600 kg", "640 kg"], "correctOptionIndex": 2, "explanation": "By alligation: (18-14) : (14-8) = 4:6 = 2:3. The ratio of quantities is 2:3. Quantity sold at 18% profit = (3/5) * 1000 = 600 kg.", "source_page": 548 }
            ];
            
            shuffleArrayWithSeed(allQuestions, dateSeed);
            quizQuestions = allQuestions.slice(0, TOTAL_QUESTIONS);

            if (quizQuestions.length > 0) {
                let rng = new Math.seedrandom(dateSeed + '-special');
                specialQuestionIndex = Math.floor(rng() * quizQuestions.length);
                quizQuestions[specialQuestionIndex].special = true;
            }
        }

        // --- Event Listeners ---
        document.addEventListener('DOMContentLoaded', () => {
            const loginBtn = document.getElementById('loginBtn');
            if (loginBtn) {
                loginBtn.addEventListener('click', () => {
                    const loginIdInput = document.getElementById('loginId');
                    const loginPasswordInput = document.getElementById('loginPassword');
                    const loginError = document.getElementById('loginError');

                    const id = loginIdInput ? loginIdInput.value : '';
                    const password = loginPasswordInput ? loginPasswordInput.value : '';
                    
                    if (id === 'syedasgharalishah' && password === 'admin') {
                        alert('Admin login is not handled in this file. Please use the admin panel file.');
                        return;
                    }
                    if (id.toUpperCase() === '20JULY' && password === 'free') {
                        if (loginError) loginError.classList.add('hidden');
                        showPage('candidateNamePage');
                    } else {
                        if (loginError) loginError.classList.remove('hidden');
                    }
                });
            }

            const startQuizBtn = document.getElementById('startQuizBtn');
            if (startQuizBtn) {
                startQuizBtn.addEventListener('click', () => {
                    const candidateNameInput = document.getElementById('candidateName');
                    const nameError = document.getElementById('nameError');
                    const candidateName = candidateNameInput ? candidateNameInput.value.trim() : '';
                    
                    if (candidateName) {
                        if (nameError) nameError.classList.add('hidden');
                        userAnswers = new Array(quizQuestions.length).fill(null);
                        currentQuestionIndex = 0;
                        quizSubmitted = false;
                        startTimer();
                        renderQuestion();
                        showPage('quizPage');
                    } else {
                        if (nameError) nameError.classList.remove('hidden');
                    }
                });
            }

            const nextBtn = document.getElementById('nextBtn');
            if (nextBtn) nextBtn.addEventListener('click', nextQuestion);
            
            const prevBtn = document.getElementById('prevBtn');
            if (prevBtn) prevBtn.addEventListener('click', prevQuestion);
            
            const submitQuizBtn = document.getElementById('submitQuizBtn');
            if (submitQuizBtn) submitQuizBtn.addEventListener('click', () => submitQuiz(false));
            
            const restartQuizBtn = document.getElementById('restartQuizBtn');
            if (restartQuizBtn) {
                restartQuizBtn.addEventListener('click', () => {
                    clearInterval(timerInterval);
                    initializeQuiz();
                    showPage('loginPage');
                });
            }
            
            // Initial setup calls
            initializeQuiz();
            updateLiveDate();
            showPage('loginPage'); 

            // Handle initial loginId display
            const loginIdInput = document.getElementById('loginId');
            if(loginIdInput) {
                const dateParts = CURRENT_DATE_STR.split(' ');
                const monthName = dateParts[0].toUpperCase();
                const day = parseInt(dateParts[1].replace(',', ''));
                loginIdInput.value = `${day.toString().padStart(2,'0')}${monthName.substring(0,3)}`; // e.g., 20JUL
            }
        });
    </script>
</body>
</html>
